export function InitEditor(n,t,i,r,u){var f;CodeMirror.modeURL=n;var l=document.getElementById(r),s=CodeMirror.fromTextArea(l,{lineNumbers:!0,theme:u,height:i+"px",indentUnit:4}),e=t,c,o,h;(c=/.+\.([^.]+)$/.exec(e))?(f=CodeMirror.findModeByExtension(c[1]),f&&(o=f.mode,h=f.mime)):/\//.test(e)?(f=CodeMirror.findModeByMIME(e),f&&(o=f.mode,h=e)):o=h=e;o?(s.setOption("mode",h),CodeMirror.autoLoadMode(s,o)):alert("Could not find a mode corresponding to "+e);s.on("blur",function(){SetEntityValue(s.getValue())})}export function SetEditorValue(n,t){var i=document.querySelector("#"+n+" + .CodeMirror").CodeMirror;i.setValue(t)}export function SetDotNetHelper(n){window.dotNetHelper=n}export function SetEntityValue(n){window.dotNetHelper.invokeMethodAsync("SetEntityValue",n)}export function SetEditorMode(n,t){var e=document.querySelector("#"+n+" + .CodeMirror").CodeMirror,r=t,o,u,f,i;(o=/.+\.([^.]+)$/.exec(r))?(i=CodeMirror.findModeByExtension(o[1]),i&&(u=i.mode,f=i.mime)):/\//.test(r)?(i=CodeMirror.findModeByMIME(r),i&&(u=i.mode,f=r)):u=f=r;u?(e.setOption("mode",f),CodeMirror.autoLoadMode(e,u)):alert("Could not find a mode corresponding to "+r)}!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).CodeMirror=t()}(this,function(){function ru(n){return new RegExp("(^|\\s)"+n+"(?:$|\\s)\\s*")}function bi(n){for(var t=n.childNodes.length;0<t;--t)n.removeChild(n.firstChild);return n}function ct(n,t){return bi(n).appendChild(t)}function u(n,t,i,r){var u=document.createElement(n),f;if(i&&(u.className=i),r&&(u.style.cssText=r),"string"==typeof t)u.appendChild(document.createTextNode(t));else if(t)for(f=0;f<t.length;++f)u.appendChild(t[f]);return u}function uu(n,t,i,r){return n=u(n,t,i,r),n.setAttribute("role","presentation"),n}function ki(n,t){if(3==t.nodeType&&(t=t.parentNode),n.contains)return n.contains(t);do if((t=11==t.nodeType?t.host:t)==n)return!0;while(t=t.parentNode)}function vt(n){var t;try{t=n.activeElement}catch(i){t=n.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function or(n,t){var i=n.className;ru(t).test(i)||(n.className+=(i?" ":"")+t)}function uh(n,t){for(var r=n.split(" "),i=0;i<r.length;i++)r[i]&&!ru(r[i]).test(t)&&(t+=" "+r[i]);return t}function kt(n){return n.display.wrapper.ownerDocument}function eo(n){return kt(n).defaultView}function fh(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t)}}function sr(n,t,i){for(var r in t=t||{},n)!n.hasOwnProperty(r)||!1===i&&t.hasOwnProperty(r)||(t[r]=n[r]);return t}function yt(n,t,i,r,u){var f,e,o;for(null==t&&-1==(t=n.search(/[^\s\u00a0]/))&&(t=n.length),f=r||0,e=u||0;;){if(o=n.indexOf("\t",f),o<0||t<=o)return e+(t-f);e=(e+=o-f)+(i-e%i);f=o+1}}function di(){this.id=null;this.f=null;this.time=0;this.handler=fh(this.onTimeout,this)}function tt(n,t){for(var i=0;i<n.length;++i)if(n[i]==t)return i;return-1}function oh(n,t,i){for(var u,e,r=0,f=0;;){if(u=n.indexOf("\t",r),e=(u=-1==u?n.length:u)-r,u==n.length||t<=f+e)return r+Math.min(e,t-f);if(f+=u-r,r=u+1,t<=(f+=i-f%i))return r}}function sh(n){for(;pf.length<=n;)pf.push(c(pf)+" ");return pf[n]}function c(n){return n[n.length-1]}function so(n,t){for(var r=[],i=0;i<n.length;i++)r[i]=t(n[i],i);return r}function ga(){}function nv(n,t){return n=Object.create?Object.create(n):(ga.prototype=n,new ga),t&&sr(t,n),n}function hh(n){return/\w/.test(n)||""<n&&(n.toUpperCase()!=n.toLowerCase()||tv.test(n))}function ho(n,t){return t?!!(-1<t.source.indexOf("\\w")&&hh(n))||t.test(n):hh(n)}function iv(n){for(var t in n)if(n.hasOwnProperty(t)&&n[t])return;return 1}function ch(n){return 768<=n.charCodeAt(0)&&rv.test(n)}function uv(n,t,i){for(;(i<0?0<t:t<n.length)&&ch(n.charAt(t));)t+=i;return t}function wf(n,t,i){for(var r,u=i<t?-1:1;;){if(t==i)return t;if(r=(t+i)/2,r=u<0?Math.ceil(r):Math.floor(r),r==t)return n(r)?t:i;n(r)?i=r:t=r+u}}function bf(n,t,i){var f,r,u;for(fu=null,r=0;r<n.length;++r){if(u=n[r],u.from<t&&u.to>t)return r;u.to==t&&(u.from!=u.to&&"before"==i?f=r:fu=r);u.from==t&&(u.from!=u.to&&"before"!=i?f=r:fu=r)}return null!=f?f:fu}function eu(n,t,i){this.level=n;this.from=t;this.to=i}function ai(n,t){var i=n.order;return null==i?n.order=ev(n.text,t):i}function wh(n,t){return n._handlers&&n._handlers[t]||ph}function lt(n,t,i){var r;n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):(r=(n=n._handlers)&&n[t])&&-1<(i=tt(r,i))&&(n[t]=r.slice(0,i).concat(r.slice(i+1)))}function b(n,t){var r=wh(n,t),u,i;if(r.length)for(u=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,u)}function k(n,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),b(n,i||t.type,n,t),bh(t)||t.codemirrorIgnore}function ov(n){var i=n._handlers&&n._handlers.cursorActivity,r,t;if(i)for(r=n.curOp.cursorActivityHandlers||(n.curOp.cursorActivityHandlers=[]),t=0;t<i.length;++t)-1==tt(r,i[t])&&r.push(i[t])}function pt(n,t){return 0<wh(n,t).length}function ou(n){n.prototype.on=function(n,t){f(this,n,t)};n.prototype.off=function(n,t){lt(this,n,t)}}function ft(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function sv(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function bh(n){return null!=n.defaultPrevented?n.defaultPrevented:0==n.returnValue}function kf(n){ft(n);sv(n)}function kh(n){return n.target||n.srcElement}function hv(n){var t=n.which;return null==t&&(1&n.button?t=1:2&n.button?t=3:4&n.button&&(t=2)),t=at&&n.ctrlKey&&1==t?3:t}function co(n){if("string"==typeof n&&su.hasOwnProperty(n))n=su[n];else if(n&&"string"==typeof n.name&&su.hasOwnProperty(n.name)){var t=su[n.name];(n=nv(t="string"==typeof t?{name:t}:t,n)).name=t.name}else{if("string"==typeof n&&/^[\w\-]+\/[\w\-]+\+xml$/.test(n))return co("application/xml");if("string"==typeof n&&/^[\w\-]+\/[\w\-]+\+json$/.test(n))return co("application/json")}return"string"==typeof n?{name:n}:n||{name:"null"}}function rc(n,t){var f,i,r,u,e;if(t=co(t),f=ic[t.name],!f)return rc(n,"text/plain");if(i=f(n,t),hr.hasOwnProperty(t.name)){u=hr[t.name];for(r in u)u.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&(i["_"+r]=i[r]),i[r]=u[r])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(e in t.modeProps)i[e]=t.modeProps[e];return i}function dk(n,t){sr(t,hr.hasOwnProperty(n)?hr[n]:hr[n]={})}function cr(n,t){var r,u,i;if(!0===t)return t;if(n.copyState)return n.copyState(t);u={};for(r in t)i=t[r],i instanceof Array&&(i=i.concat([])),u[r]=i;return u}function uc(n,t){for(var i;n.innerMode&&(i=n.innerMode(t))&&i.mode!=n;)t=i.state,n=i.mode;return i||{mode:n,state:t}}function cv(n,t,i){return!n.startState||n.startState(t,i)}function t(n,t){var i,r,u,f;if((t-=n.first)<0||t>=n.size)throw new Error("There is no line "+(t+n.first)+" in the document.");for(i=n;!i.lines;)for(r=0;;++r){if(u=i.children[r],f=u.chunkSize(),t<f){i=u;break}t-=f}return i.lines[t]}function lr(n,t,i){var u=[],r=t.line;return n.iter(t.line,i.line+1,function(n){n=n.text;r==i.line&&(n=n.slice(0,i.ch));r==t.line&&(n=n.slice(t.ch));u.push(n);++r}),u}function fc(n,t,i){var r=[];return n.iter(t,i,function(n){r.push(n.text)}),r}function fi(n,t){var r=t-n.height,i;if(r)for(i=n;i;i=i.parent)i.height+=r}function l(n){var r;if(null==n.parent)return null;for(var t=n.parent,u=tt(t.lines,n),i=t.parent;i;i=(t=i).parent)for(r=0;i.children[r]!=t;++r)u+=i.children[r].chunkSize();return u+t.first}function ar(n,t){var f=n.first,r,u,e,i,o;n:do{for(r=0;r<n.children.length;++r){if(u=n.children[r],e=u.height,t<e){n=u;continue n}t-=e;f+=u.chunkSize()}return f}while(!n.lines);for(i=0;i<n.lines.length;++i){if(o=n.lines[i].height,t<o)break;t-=o}return f+i}function df(n,t){return t>=n.first&&t<n.first+n.size}function ec(n,t){return String(n.lineNumberFormatter(t+n.firstLineNumber))}function n(t,i,r){if(void 0===r&&(r=null),!(this instanceof n))return new n(t,i,r);this.line=t;this.ch=i;this.sticky=r}function e(n,t){return n.line-t.line||n.ch-t.ch}function oc(n,t){return n.sticky==t.sticky&&0==e(n,t)}function sc(t){return n(t.line,t.ch)}function lo(n,t){return e(n,t)<0?t:n}function ao(n,t){return e(n,t)<0?n:t}function lv(n,t){return Math.max(n.first,Math.min(t,n.first+n.size-1))}function o(i,r){if(r.line<i.first)return n(i.first,0);var u=i.first+i.size-1;return r.line>u?n(u,t(i,u).text.length):(i=t(i,(u=r).line).text.length,null==(r=u.ch)||i<r?n(u.line,i):r<0?n(u.line,0):u)}function av(n,t){for(var r=[],i=0;i<t.length;i++)r[i]=o(n,t[i]);return r}function vo(n,t){this.state=n;this.lookAhead=t}function vv(n,t,i,r){for(var u=[n.state.modeGen],f={},o=(kv(n,t.text,n.doc.mode,i,function(n,t){u.push(n,t)},f,r),i.state),e=0;e<n.state.overlays.length;++e)!function(r){i.baseTokens=u;var s=n.state.overlays[r],e=1,h=0;i.state=!0;kv(n,t.text,s.mode,i,function(n,t){for(var r,f,i=e;h<n;)r=u[e],n<r&&u.splice(e,1,n,u[e+1],r),e+=2,h=Math.min(n,r);if(t)if(s.opaque)u.splice(i,e-i,n,"overlay "+t),e=i+2;else for(;i<e;i+=2)f=u[i+1],u[i+1]=(f?f+" ":"")+"overlay "+t},f);i.state=o;i.baseTokens=null;i.baseTokenPos=1}(e);return{styles:u,classes:f.bgClass||f.textClass?f:null}}function yv(n,t,i){var r,u,f;return t.styles&&t.styles[0]==n.state.modeGen||(r=gf(n,l(t)),u=t.text.length>n.options.maxHighlightLength&&cr(n.doc.mode,r.state),f=vv(n,t,r),u&&(r.state=u),t.stateAfter=r.save(!u),t.styles=f.styles,f.classes?t.styleClasses=f.classes:t.styleClasses&&(t.styleClasses=null),i===n.doc.highlightFrontier&&(n.doc.modeFrontier=Math.max(n.doc.modeFrontier,++n.doc.highlightFrontier))),t.styles}function gf(n,i,r){var u=n.doc,o=n.display;if(!u.mode.startState)return new dt(u,!0,i);var e=function(n,i,r){for(var s,f,h,o,e=n.doc,c=r?-1:i-(n.doc.mode.innerMode?1e3:100),u=i;c<u;--u){if(u<=e.first)return e.first;if(s=t(e,u-1),f=s.stateAfter,f&&(!r||u+(f instanceof vo?f.lookAhead:0)<=e.modeFrontier))return u;f=yt(s.text,null,n.options.tabSize);(null==o||f<h)&&(o=u-1,h=f)}return o}(n,i,r),s=e>u.first&&t(u,e-1).stateAfter,f=s?dt.fromSaved(u,s,e):new dt(u,cv(u.mode),e);return u.iter(e,i,function(t){hc(n,t.text,f);var r=f.line;t.stateAfter=r==i-1||r%5==0||r>=o.viewFrom&&r<o.viewTo?f.save():null;f.nextLine()}),r&&(u.modeFrontier=f.line),f}function hc(n,t,i,r){var f=n.doc.mode,u=new p(t,n.options.tabSize,i);for(u.start=u.pos=r||0,""==t&&pv(f,i.state);!u.eol();)cc(f,u,i.state),u.start=u.pos}function pv(n,t){return n.blankLine?n.blankLine(t):n.innerMode?(n=uc(n,t),n.mode.blankLine?n.mode.blankLine(n.state):void 0):void 0}function cc(n,t,i,r){for(var f,u=0;u<10;u++)if(r&&(r[0]=uc(n,i).mode),f=n.token(t,i),t.pos>t.start)return f;throw new Error("Mode "+n.name+" failed to advance stream.");}function wv(n,i,r,u){var h,c,e=n.doc,l=e.mode,a=t(e,(i=o(e,i)).line),s=gf(n,i.line,r),f=new p(a.text,n.options.tabSize,s);for(u&&(c=[]);(u||f.pos<i.ch)&&!f.eol();)f.start=f.pos,h=cc(l,f,s.state),u&&c.push(new lc(f,h,cr(e.mode,s.state)));return u?c:new lc(f,h,s.state)}function bv(n,t){var i,r;if(n)for(;;){if(i=n.match(/(?:^|\s+)line-(background-)?(\S+)/),!i)break;n=n.slice(0,i.index)+n.slice(i.index+i[0].length);r=i[1]?"bgClass":"textClass";null==t[r]?t[r]=i[2]:new RegExp("(?:^|\\s)"+i[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+i[2])}return n}function kv(n,t,i,r,u,f,e){var c=i.flattenSpans,s=(null==c&&(c=n.options.flattenSpans),0),l=null,o=new p(t,n.options.tabSize,r),a=n.options.addModeClass&&[null],v,h,y;for(""==t&&bv(pv(i,r.state),f);!o.eol();){if(h=o.pos>n.options.maxHighlightLength?(c=!1,e&&hc(n,t,r,o.pos),o.pos=t.length,null):bv(cc(i,o,r.state,a),f),!a||(v=a[0].name)&&(h="m-"+(h?v+" "+h:v)),!c||l!=h){for(;s<o.start;)u(s=Math.min(o.start,s+5e3),l);l=h}o.start=o.pos}for(;s<o.pos;)y=Math.min(o.pos,s+5e3),u(y,l),s=y}function yo(n,t,i){this.marker=n;this.from=t;this.to=i}function ne(n,t){var i,r;if(n)for(i=0;i<n.length;++i)if(r=n[i],r.marker==t)return r}function vc(n,i){var p,n,a,b,s,v,f,y,k,d,h,g;if(i.full||(p=df(n,i.from.line)&&t(n,i.from.line).markedSpans,n=df(n,i.to.line)&&t(n,i.to.line).markedSpans,!p&&!n))return null;var w=i.from.ch,tt=i.to.ch,nt=0==e(i.from,i.to),r=function(n,t,i){var e,f,o,r,u;if(n)for(f=0;f<n.length;++f)r=n[f],u=r.marker,(null==r.from||(u.inclusiveLeft?r.from<=t:r.from<t)||!(r.from!=t||"bookmark"!=u.type||i&&r.marker.insertLeft))&&(o=null==r.to||(u.inclusiveRight?r.to>=t:r.to>t),(e=e||[]).push(new yo(u,r.from,o?null:r.to)));return e}(p,w,nt),u=function(n,t,i){var e,f,o,r,u;if(n)for(f=0;f<n.length;++f)r=n[f],u=r.marker,(null==r.to||(u.inclusiveRight?r.to>=t:r.to>t)||r.from==t&&"bookmark"==u.type&&(!i||r.marker.insertLeft))&&(o=null==r.from||(u.inclusiveLeft?r.from<=t:r.from<t),(e=e||[]).push(new yo(u,o?null:r.from-t,null==r.to?null:r.to-t)));return e}(n,tt,nt),o=1==i.text.length,l=c(i.text).length+(o?w:0);if(r)for(a=0;a<r.length;++a)s=r[a],null==s.to&&((b=ne(u,s.marker))?o&&(s.to=null==b.to?null:b.to+l):s.to=w);if(u)for(v=0;v<u.length;++v)f=u[v],null!=f.to&&(f.to+=l),null==f.from?ne(r,f.marker)||(f.from=l,o&&(r=r||[]).push(f)):(f.from+=l,o&&(r=r||[]).push(f));if(r=r&&dv(r),u&&u!=r&&(u=dv(u)),y=[r],!o){if(d=i.text.length-2,0<d&&r)for(h=0;h<r.length;++h)null==r[h].to&&(k=k||[]).push(new yo(r[h].marker,null,null));for(g=0;g<d;++g)y.push(k);y.push(u)}return y}function dv(n){for(var i,t=0;t<n.length;++t)i=n[t],null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&n.splice(t--,1);return n.length?n:null}function gv(n){var i=n.markedSpans,t;if(i){for(t=0;t<i.length;++t)i[t].marker.detachLine(n);n.markedSpans=null}}function ny(n,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(n);n.markedSpans=t}}function po(n){return n.inclusiveLeft?-1:0}function wo(n){return n.inclusiveRight?1:0}function yc(n,t){var i=n.lines.length-t.lines.length;if(0!=i)return i;var i=n.find(),u=t.find(),r=e(i.from,u.from)||po(n)-po(t);return r?-r:(r=e(i.to,u.to)||wo(n)-wo(t),r||t.id-n.id)}function ty(n,t){var r,f=ei&&n.markedSpans,i,u;if(f)for(u=0;u<f.length;++u)(i=f[u]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||yc(r,i.marker)<0)&&(r=i.marker);return r}function iy(n){return ty(n,!0)}function bo(n){return ty(n,!1)}function ry(n,i,r,u,f){var n=t(n,i),l=ei&&n.markedSpans,h,o;if(l)for(h=0;h<l.length;++h)if(o=l[h],o.marker.collapsed){var s=o.marker.find(0),c=e(s.from,r)||po(o.marker)-po(f),a=e(s.to,u)||wo(o.marker)-wo(f);if(!(0<=c&&a<=0||c<=0&&0<=a)&&(c<=0&&(o.marker.inclusiveRight&&f.inclusiveLeft?0<=e(s.to,r):0<e(s.to,r))||0<=c&&(o.marker.inclusiveRight&&f.inclusiveLeft?e(s.from,u)<=0:e(s.from,u)<0)))return 1}}function gt(n){for(var t;t=iy(n);)n=t.find(-1,!0).line;return n}function pc(n,i){var n=t(n,i),r=gt(n);return n==r?i:l(r)}function uy(n,i){if(i>n.lastLine())return i;var u,r=t(n,i);if(!gi(n,r))return i;for(;u=bo(r);)r=u.find(1,!0).line;return l(r)+1}function gi(n,t){var u=ei&&t.markedSpans,i,r;if(u)for(r=0;r<u.length;++r)if((i=u[r]).marker.collapsed&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&function n(t,i,r){var e,u,f;if(null==r.to)return e=r.marker.find(1,!0),n(t,e.line,ne(e.line.markedSpans,r.marker));if(r.marker.inclusiveRight&&r.to==i.text.length)return!0;for(u=void 0,f=0;f<i.markedSpans.length;++f)if((u=i.markedSpans[f]).marker.collapsed&&!u.marker.widgetNode&&u.from==r.to&&(null==u.to||u.to!=r.from)&&(u.marker.inclusiveLeft||r.marker.inclusiveRight)&&n(t,i,u))return!0}(n,t,i)))return!0}function vi(n){for(var e,t,r,o,u=0,i=(n=gt(n)).parent,f=0;f<i.lines.length;++f){if(e=i.lines[f],e==n)break;u+=e.height}for(t=i.parent;t;t=(i=t).parent)for(r=0;r<t.children.length;++r){if(o=t.children[r],o==i)break;u+=o.height}return u}function ko(n){var r,u,t,f,i;if(0==n.height)return 0;for(i=n.text.length,t=n;r=iy(t);)u=r.find(0,!0),t=u.from.line,i+=u.from.ch-u.to.ch;for(t=n;r=bo(t);)f=r.find(0,!0),i=(i-=t.text.length-f.from.ch)+((t=f.to.line).text.length-f.to.ch);return i}function wc(n){var i=n.display,n=n.doc;i.maxLine=t(n,n.first);i.maxLineLength=ko(i.maxLine);i.maxLineChanged=!0;n.iter(function(n){var t=ko(n);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=n)})}function oy(n,t){return!n||/^\s*$/.test(n)?null:(t=t.addModeClass?ey:fy,t[n]||(t[n]=n.replace(/\S+/g,"cm-$&")))}function sy(n,t){var e=uu("span",null,null,rt?"padding-right: .1px":null),i={pre:uu("pre",[e],"CodeMirror-line"),content:e,col:0,pos:0,cm:n,trailingSpace:!1,splitSpaces:n.getOption("lineWrapping")},o;for(t.measure={},o=0;o<=(t.rest?t.rest.length:0);o++){var r=o?t.rest[o-1]:t.line,f=void 0,f=(i.pos=0,i.addToken=nd,function(n){if(null!=gh)return gh;var i=ct(n,document.createTextNode("AخA")),t=af(i,0,1).getBoundingClientRect(),i=af(i,1,2).getBoundingClientRect();return bi(n),t&&t.left!=t.right&&(gh=i.right-t.right<3)}(n.display.measure)&&(f=ai(r,n.doc.direction))&&(i.addToken=function(n,t){return function(i,r,u,f,e,o,s){var h,a,c,l;for(u=u?u+" cm-force-border":"cm-force-border",h=i.pos,a=h+r.length;;){for(c=void 0,l=0;l<t.length&&!((c=t[l]).to>h&&c.from<=h);l++);if(c.to>=a)return n(i,r,u,f,e,o,s);n(i,r.slice(0,c.to-h),u,f,null,o,s);f=null;r=r.slice(c.to-h);h=c.to}}}(i.addToken,f)),i.map=[],t!=n.display.externalMeasured&&l(r));!function(n,t,i){var nt=n.markedSpans,tt=n.text,p=0,f,u,et,v,d,l,ot,g,y;if(nt)for(var it,a,w,b,k,e,h,rt=tt.length,r=0,st=1,s="",o=0;;){if(o==r){w=b=k=a="";e=h=null;o=1/0;for(var ut=[],c=void 0,ft=0;ft<nt.length;++ft)if(f=nt[ft],u=f.marker,"bookmark"==u.type&&f.from==r&&u.widgetNode)ut.push(u);else if(f.from<=r&&(null==f.to||f.to>r||u.collapsed&&f.to==r&&f.from==r)){if(null!=f.to&&f.to!=r&&o>f.to&&(o=f.to,b=""),u.className&&(w+=" "+u.className),u.css&&(a=(a?a+";":"")+u.css),u.startStyle&&f.from==r&&(k+=" "+u.startStyle),u.endStyle&&f.to==o&&(c=c||[]).push(u.endStyle,f.to),u.title&&((h=h||{}).title=u.title),u.attributes)for(et in u.attributes)(h=h||{})[et]=u.attributes[et];u.collapsed&&(!e||yc(e.marker,u)<0)&&(e=f)}else f.from>r&&o>f.from&&(o=f.from);if(c)for(v=0;v<c.length;v+=2)c[v+1]==o&&(b+=" "+c[v]);if(!e||e.from==r)for(d=0;d<ut.length;++d)hy(t,0,ut[d]);if(e&&(e.from||0)==r){if(hy(t,(null==e.to?rt+1:e.to)-r,e.marker,null==e.from),null==e.to)return;e.to==r&&(e=!1)}}if(rt<=r)break;for(l=Math.min(rt,o);;){if(s){if(g=r+s.length,e||(ot=l<g?s.slice(0,l-r):s,t.addToken(t,ot,it?it+w:w,k,r+ot.length==o?b:"",a,h)),l<=g){s=s.slice(l-r);r=l;break}r=g;k=""}s=tt.slice(p,p=i[st++]);it=oy(i[st++],t.cm.options)}}else for(y=1;y<i.length;y+=2)t.addToken(t,tt.slice(p,p=i[y]),oy(i[y+1],t.cm.options))}(r,i,yv(n,r,f));r.styleClasses&&(r.styleClasses.bgClass&&(i.bgClass=uh(r.styleClasses.bgClass,i.bgClass||"")),r.styleClasses.textClass&&(i.textClass=uh(r.styleClasses.textClass,i.textClass||"")));0==i.map.length&&i.map.push(0,0,i.content.appendChild((f=n.display.measure,r=void 0,null==dh&&(r=u("span","​"),ct(f,u("span",[r,document.createTextNode("x")])),0!=f.firstChild.offsetHeight&&(dh=r.offsetWidth<=1&&2<r.offsetHeight&&!(s&&v<8))),(f=dh?u("span","​"):u("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")).setAttribute("cm-text",""),f)));0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return rt&&(e=i.content.lastChild,(/\bcm-tab\b/.test(e.className)||e.querySelector&&e.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")),b(n,"renderLine",n,t.line,i.pre),i.pre.className&&(i.textClass=uh(i.pre.className,i.textClass||"")),i}function gk(n){var t=u("span","•","cm-invalidchar");return t.title="\\u"+n.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function nd(n,t,i,r,f,e,o){var l,y,a,h,c,p,d,w;if(t){var b=n.splitSpaces?function(n,t){var r;if(1<n.length&&!/  /.test(n))return n;for(var u=t,f="",i=0;i<n.length;i++)r=n.charAt(i)," "==r&&u&&(i==n.length-1||32==n.charCodeAt(i+1))&&(r=" "),f+=r,u=" "==r;return f}(t,n.trailingSpace):t,k=n.cm.state.specialChars,p=!1;if(k.test(t))for(l=document.createDocumentFragment(),y=0;;){if(k.lastIndex=y,a=k.exec(t),h=a?a.index-y:t.length-y,h&&(c=document.createTextNode(b.slice(y,y+h)),s&&v<9?l.appendChild(u("span",[c])):l.appendChild(c),n.map.push(n.pos,n.pos+h,c),n.col+=h,n.pos+=h),!a)break;y+=1+h;c=void 0;"\t"==a[0]?(h=(h=n.cm.options.tabSize)-n.col%h,(c=l.appendChild(u("span",sh(h),"cm-tab"))).setAttribute("role","presentation"),c.setAttribute("cm-text","\t"),n.col+=h):("\r"==a[0]||"\n"==a[0]?(c=l.appendChild(u("span","\r"==a[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",a[0]):((c=n.cm.options.specialCharPlaceholder(a[0])).setAttribute("cm-text",a[0]),s&&v<9?l.appendChild(u("span",[c])):l.appendChild(c)),n.col+=1);n.map.push(n.pos,n.pos+1,c);n.pos++}else n.col+=t.length,l=document.createTextNode(b),n.map.push(n.pos,n.pos+t.length,l),s&&v<9&&(p=!0),n.pos+=t.length;if(n.trailingSpace=32==b.charCodeAt(t.length-1),i||r||f||p||e||o){if(p=i||"",d=(r&&(p+=r),f&&(p+=f),u("span",[l],p,e)),o)for(w in o)o.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&d.setAttribute(w,o[w]);return n.content.appendChild(d)}n.content.appendChild(l)}}function hy(n,t,i,r){var u=!r&&i.widgetNode;u&&n.map.push(n.pos,n.pos+t,u);!r&&n.cm.display.input.needsContentAttribute&&(u=u||n.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",i.id);u&&(n.cm.display.input.setUneditable(u),n.content.appendChild(u));n.pos+=t;n.trailingSpace=!1}function cy(n,t,i){this.line=t;this.rest=function(n){for(var i,t;i=bo(n);)n=i.find(1,!0).line,(t=t||[]).push(n);return t}(t);this.size=this.rest?l(c(this.rest))-i+1:1;this.node=this.text=null;this.hidden=gi(n,t)}function go(n,i,r){for(var e,o,f=[],u=i;u<r;u=o)e=new cy(n.doc,t(n.doc,u),u),o=u+e.size,f.push(e);return f}function d(n,t){var u=wh(n,t),i,f,r;if(u.length)for(f=Array.prototype.slice.call(arguments,2),r=(yr?i=yr.delayedCallbacks:hu?i=hu:(i=hu=[],setTimeout(td,0)),0);r<u.length;++r)!function(n){i.push(function(){return u[n].apply(null,f)})}(r)}function td(){var t=hu,n;for(hu=null,n=0;n<t.length;++n)t[n]()}function ly(n,t,i,r){for(var s,c=0;c<t.changes.length;c++)if(s=t.changes[c],"text"==s){f=l=u=h=void 0;var h=n,u=t,l=u.text.className,f=ay(h,u);u.text==u.node&&(u.node=f.pre);u.text.parentNode.replaceChild(f.pre,u.text);u.text=f.pre;f.bgClass!=u.bgClass||f.textClass!=u.textClass?(u.bgClass=f.bgClass,u.textClass=f.textClass,bc(h,u)):l&&(u.text.className=l)}else if("gutter"==s)vy(n,t,i,r);else if("class"==s)bc(n,t);else if("widget"==s){a=o=v=h=e=f=void 0;var f=n,e=t,h=r;e.alignable&&(e.alignable=null);for(var v=ru("CodeMirror-linewidget"),o=e.node.firstChild,a=void 0;o;o=a)a=o.nextSibling,v.test(o.className)&&e.node.removeChild(o);yy(f,e,h)}t.changes=null}function te(n){return n.node==n.text&&(n.node=u("div",null,null,"position: relative"),n.text.parentNode&&n.text.parentNode.replaceChild(n.node,n.text),n.node.appendChild(n.text),s&&v<8&&(n.node.style.zIndex=2)),n.node}function ay(n,t){var i=n.display.externalMeasured;return i&&i.line==t.line?(n.display.externalMeasured=null,t.measure=i.measure,i.built):sy(n,t)}function bc(n,t){n=n;(r=(i=t).bgClass?i.bgClass+" "+(i.line.bgClass||""):i.line.bgClass)&&(r+=" CodeMirror-linebackground");i.background?r?i.background.className=r:(i.background.parentNode.removeChild(i.background),i.background=null):r&&(f=te(i),i.background=f.insertBefore(u("div",null,r),f.firstChild),n.display.input.setUneditable(i.background));t.line.wrapClass?te(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i,f,r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function vy(n,t,i,r){var f,s,e,h,o,c;if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass&&(s=te(t),t.gutterBackground=u("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(n.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),n.display.input.setUneditable(t.gutterBackground),s.insertBefore(t.gutterBackground,t.text)),f=t.line.gutterMarkers,(n.options.lineNumbers||f)&&(s=te(t),e=t.gutter=u("div",null,"CodeMirror-gutter-wrapper","left: "+(n.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),e.setAttribute("aria-hidden","true"),n.display.input.setUneditable(e),s.insertBefore(e,t.text),t.line.gutterClass&&(e.className+=" "+t.line.gutterClass),!n.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(t.lineNumber=e.appendChild(u("div",ec(n.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+n.display.lineNumInnerWidth+"px"))),f))for(h=0;h<n.display.gutterSpecs.length;++h)o=n.display.gutterSpecs[h].className,c=f.hasOwnProperty(o)&&f[o],c&&e.appendChild(u("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[o]+"px; width: "+r.gutterWidth[o]+"px"))}function yy(n,t,i){if(py(n,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)py(n,t.rest[r],t,i,!1)}function py(n,t,i,r,f){if(t.widgets)for(var v=te(i),a=0,y=t.widgets;a<y.length;++a){var o=y[a],c=u("div",[o.node],"CodeMirror-linewidget"+(o.className?" "+o.className:"")),l=(o.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),s=h=s=e=l=void 0,o),e=c,s=i,h=r;l.noHScroll&&((s.alignable||(s.alignable=[])).push(e),s=h.wrapperWidth,e.style.left=h.fixedPos+"px",l.coverGutter||(s-=h.gutterTotalWidth,e.style.paddingLeft=h.gutterTotalWidth+"px"),e.style.width=s+"px");l.coverGutter&&(e.style.zIndex=5,e.style.position="relative",l.noHScroll||(e.style.marginLeft=-h.gutterTotalWidth+"px"));n.display.input.setUneditable(c);f&&o.above?v.insertBefore(c,i.gutter||i.text):v.appendChild(c);d(o,"redraw")}}function ie(n){if(null!=n.height)return n.height;var t,i=n.doc.cm;return i?(ki(document.body,n.node)||(t="position: relative;",n.coverGutter&&(t+="margin-left: -"+i.display.gutters.offsetWidth+"px;"),n.noHScroll&&(t+="width: "+i.display.wrapper.clientWidth+"px;"),ct(i.display.measure,u("div",[n.node],null,t))),n.height=n.node.parentNode.offsetHeight):0}function yi(n,t){for(var i=kh(t);i!=n.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==n.sizer&&i!=n.mover)return 1}function ns(n){return n.lineSpace.offsetTop}function kc(n){return n.mover.offsetHeight-n.lineSpace.offsetHeight}function wy(n){if(n.cachedPaddingH)return n.cachedPaddingH;var t=ct(n.measure,u("pre","x","CodeMirror-line-like")),t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)};return isNaN(t.left)||isNaN(t.right)||(n.cachedPaddingH=t),t}function oi(n){return da-n.display.nativeBarWidth}function pr(n){return n.display.scroller.clientWidth-oi(n)-n.display.barWidth}function dc(n){return n.display.scroller.clientHeight-oi(n)-n.display.barHeight}function by(n,t,i){var r,u;if(n.line==t)return{map:n.measure.map,cache:n.measure.cache};if(n.rest){for(r=0;r<n.rest.length;r++)if(n.rest[r]==t)return{map:n.measure.maps[r],cache:n.measure.caches[r]};for(u=0;u<n.rest.length;u++)if(l(n.rest[u])>i)return{map:n.measure.maps[u],cache:n.measure.caches[u],before:!0}}}function ky(n,t,i,r){return si(n,cu(n,t),i,r)}function gc(n,t){return t>=n.display.viewFrom&&t<n.display.viewTo?n.display.view[kr(n,t)]:(n=n.display.externalMeasured,n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0)}function cu(n,t){var r,u,f=l(t),i=gc(n,f),n=(i&&!i.text?i=null:i&&i.changes&&(ly(n,i,f,fl(n)),n.curOp.forceUpdate=!0),i||(n=n,u=l(r=gt(r=t)),(r=n.display.externalMeasured=new cy(n.doc,r,u)).lineN=u,u=r.built=sy(n,r),r.text=u.pre,ct(n.display.lineMeasure,u.pre),i=r),by(i,t,f));return{line:t,view:i,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function si(n,t,i,r,f){var e,a=(i=t.before?-1:i)+(r||""),w,l,h,b,k;if(t.cache.hasOwnProperty(a))e=t.cache[a];else{if(t.rect||(t.rect=t.view.text.getBoundingClientRect()),!t.hasHeights){var c=n,o=t.view,y=t.rect,p=c.options.lineWrapping,c=p&&pr(c);if(!o.measure.heights||p&&o.measure.width!=c){if(w=o.measure.heights=[],p)for(o.measure.width=c,l=o.text.firstChild.getClientRects(),h=0;h<l.length-1;h++)b=l[h],k=l[h+1],2<Math.abs(b.bottom-k.bottom)&&w.push((b.bottom+k.top)/2-y.top);w.push(y.bottom-y.top)}t.hasHeights=!0}(e=function(n,t,i,r){var f,e=dy(t.map,i,r),h=e.node,o=e.start,c=e.end,y=e.collapse,w;if(3==h.nodeType){for(w=0;w<4;w++){for(;o&&ch(t.line.text.charAt(e.coverStart+o));)--o;for(;e.coverStart+c<e.coverEnd&&ch(t.line.text.charAt(e.coverStart+c));)++c;if((f=s&&v<9&&0==o&&c==e.coverEnd-e.coverStart?h.parentNode.getBoundingClientRect():function(n,t){var i=nl,r,u;if("left"==t)for(r=0;r<n.length&&(i=n[r]).left==i.right;r++);else for(u=n.length-1;0<=u&&(i=n[u]).left==i.right;u--);return i}(af(h,o,c).getClientRects(),r)).left||f.right||0==o)break;c=o;o-=1;y="right"}s&&v<11&&(f=function(n,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(n){if(null!=tc)return tc;var t=(n=ct(n,u("span","x"))).getBoundingClientRect(),n=af(n,0,1).getBoundingClientRect();return tc=1<Math.abs(t.left-n.left)}(n))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(n.display.measure,f))}else 0<o&&(y=r="right"),f=n.options.lineWrapping&&1<(i=h.getClientRects()).length?i["right"==r?i.length-1:0]:h.getBoundingClientRect();!(s&&v<9)||o||f&&(f.left||f.right)||(i=h.parentNode.getClientRects()[0],f=i?{left:i.left,right:i.left+au(n.display),top:i.top,bottom:i.bottom}:nl);for(var i=f.top-t.rect.top,b=f.bottom-t.rect.top,k=(i+b)/2,p=t.view.measure.heights,l=0;l<p.length-1&&!(k<p[l]);l++);var a=l?p[l-1]:0,d=p[l],a={left:("right"==y?f.right:f.left)-t.rect.left,right:("left"==y?f.left:f.right)-t.rect.left,top:a,bottom:d};return f.left||f.right||(a.bogus=!0),n.options.singleCursorHeightPerLine||(a.rtop=i,a.rbottom=b),a}(n,t,i,r)).bogus||(t.cache[a]=e)}return{left:e.left,right:e.right,top:f?e.rtop:e.top,bottom:f?e.rbottom:e.bottom}}function dy(n,t,i){for(var s,f,h,o,e,u,r=0;r<n.length;r+=3)if(e=n[r],u=n[r+1],t<e?(f=0,h=1,o="left"):t<u?h=(f=t-e)+1:(r==n.length-3||t==u&&n[r+3]>t)&&(f=(h=u-e)-1,u<=t&&(o="right")),null!=f){if(s=n[r+2],e==u&&i==(s.insertLeft?"left":"right")&&(o=i),"left"==i&&0==f)for(;r&&n[r-2]==n[r-3]&&n[r-1].insertLeft;)s=n[2+(r-=3)],o="left";if("right"==i&&f==u-e)for(;r<n.length-3&&n[r+3]==n[r+4]&&!n[r+5].insertLeft;)s=n[(r+=3)+2],o="right";break}return{node:s,start:f,end:h,collapse:o,coverStart:e,coverEnd:u}}function gy(n){if(n.measure&&(n.measure.cache={},n.measure.heights=null,n.rest))for(var t=0;t<n.rest.length;t++)n.measure.caches[t]={}}function np(n){n.display.externalMeasure=null;bi(n.display.lineMeasure);for(var t=0;t<n.display.view.length;t++)gy(n.display.view[t])}function re(n){np(n);n.display.cachedCharWidth=n.display.cachedTextHeight=n.display.cachedPaddingH=null;n.options.lineWrapping||(n.display.maxLineChanged=!0);n.display.lineNumChars=null}function tp(n){return wi&&fo?-(n.body.getBoundingClientRect().left-parseInt(getComputedStyle(n.body).marginLeft)):n.defaultView.pageXOffset||(n.documentElement||n.body).scrollLeft}function ip(n){return wi&&fo?-(n.body.getBoundingClientRect().top-parseInt(getComputedStyle(n.body).marginTop)):n.defaultView.pageYOffset||(n.documentElement||n.body).scrollTop}function tl(n){var i=gt(n).widgets,r=0,t;if(i)for(t=0;t<i.length;++t)i[t].above&&(r+=ie(i[t]));return r}function ts(n,t,i,r,u){return(u||(u=tl(t),i.top+=u,i.bottom+=u),"line"==r)?i:(r=r||"local",u=vi(t),"local"==r?u+=ns(n.display):u-=n.display.viewOffset,"page"!=r&&"window"!=r||(u+=(t=n.display.lineSpace.getBoundingClientRect()).top+("window"==r?0:ip(kt(n))),t=t.left+("window"==r?0:tp(kt(n))),i.left+=t,i.right+=t),i.top+=u,i.bottom+=u,i)}function rp(n,t,i){if("div"==i)return t;var r=t.left,t=t.top,i=("page"==i?(r-=tp(kt(n)),t-=ip(kt(n))):"local"!=i&&i||(r+=(i=n.display.sizer.getBoundingClientRect()).left,t+=i.top),n.display.lineSpace.getBoundingClientRect());return{left:r-i.left,top:t-i.top}}function is(n,i,r,u,f){return ts(n,u=u||t(n.doc,i.line),ky(n,u,i.ch,f),r)}function ni(n,i,r,u,f,e){function c(t,i){return t=si(n,f,t,i?"right":"left",e),i?t.left=t.right:t.right=t.left,ts(n,u,t,r)}function l(n,t,i){return c(i?n-1:n,1==s[t].level!=i)}u=u||t(n.doc,i.line);f=f||cu(n,u);var s=ai(u,n.doc.direction),o=i.ch,i=i.sticky;if(o>=u.text.length?(o=u.text.length,i="before"):o<=0&&(o=0,i="after"),!s)return c("before"==i?o-1:o,"before"==i);var h=bf(s,o,i),a=fu,h=l(o,h,"before"==i);return null!=a&&(h.other=l(o,a,"before"!=i)),h}function up(n,i){var r=0,i=(i=o(n.doc,i),n.options.lineWrapping||(r=au(n.display)*i.ch),t(n.doc,i.line)),n=vi(i)+ns(n.display);return{left:r,right:r,top:n,bottom:n+i.height}}function il(t,i,r,u,f){return t=n(t,i,r),t.xRel=f,u&&(t.outside=u),t}function rl(i,r,u){var f=i.doc,o,h,s,e,c;if((u+=i.display.viewOffset)<0)return il(f.first,0,null,-1,-1);if(o=ar(f,u),h=f.first+f.size-1,h<o)return il(f.first+f.size-1,t(f,h).text.length,null,1,1);for(r<0&&(r=0),s=t(f,o);;){if((e=function(t,i,r,u,f){f-=vi(i);var a=cu(t,i),v=tl(i),y=0,o=i.text.length,s=!0,e=ai(i,t.doc.direction);e&&(e=(t.options.lineWrapping?rd:id)(t,i,r,a,e,u,f),s=1!=e.level,y=s?e.from:e.to-1,o=s?e.to:e.from-1);var p=null,h=null,e=wf(function(n){var i=si(t,a,n);return i.top+=v,i.bottom+=v,ul(i,u,f,!1)&&(i.top<=f&&i.left<=u&&(p=n,h=i),1)},y,o),w=!1,c,l;return h?(c=u-h.left<h.right-u,e=p+((l=c==s)?0:1),l=l?"after":"before",c=c?h.left:h.right):(s||e!=o&&e!=y||e++,l=0==e||e!=i.text.length&&si(t,a,e-(s?1:0)).bottom+v<=f==s?"after":"before",o=ni(t,n(r,e,l),"line",i,a),c=o.left,w=f<o.top?-1:f>=o.bottom?1:0),e=uv(i.text,e,1),il(r,e,l,w,u-c)}(i,s,o,r,u),c=function(n,t){var r,f=ei&&n.markedSpans,u,i;if(f)for(u=0;u<f.length;++u)i=f[u],i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!r||yc(r,i.marker)<0)&&(r=i.marker);return r}(s,e.ch+(0<e.xRel||0<e.outside?1:0)),!c)||(e=c.find(1),e.line==o))return e;s=t(f,o=e.line)}}function fp(n,t,i,r){r-=tl(t);var t=t.text.length,u=wf(function(t){return si(n,i,t-1).bottom<=r},t,0);return{begin:u,end:wf(function(t){return si(n,i,t).top>r},u,t)}}function ep(n,t,i,r){return fp(n,t,i=i||cu(n,t),ts(n,t,si(n,i,r),"line").top)}function ul(n,t,i,r){return!(n.bottom<=i)&&(n.top>i||(r?n.left:n.right)>t)}function id(t,i,r,u,f,e,o){var s,c=wf(function(s){var s=f[s],h=1!=s.level;return ul(ni(t,n(r,h?s.to:s.from,h?"before":"after"),"line",i,u),e,o,!0)},0,f.length-1),h=f[c];return 0<c&&(s=1!=h.level,ul(s=ni(t,n(r,s?h.from:h.to,s?"after":"before"),"line",i,u),e,o,!0)&&s.top>o&&(h=f[c-1])),h}function rd(n,t,i,r,u,f,e){for(var c,s,e=fp(n,t,r,e),l=e.begin,h=e.end,o=(/\s/.test(t.text.charAt(h-1))&&h--,null),v=null,a=0;a<u.length;a++)s=u[a],s.from>=h||s.to<=l||(c=(c=si(n,r,1!=s.level?Math.min(h,s.to)-1:Math.max(l,s.from)).right)<f?f-c+1e9:c-f,(!o||c<v)&&(o=s,v=c));return(o=(o=o||u[u.length-1]).from<l?{from:l,to:o.to,level:o.level}:o).to>h?{from:o.from,to:h,level:o.level}:o}function lu(n){var i,t;if(null!=n.cachedTextHeight)return n.cachedTextHeight;if(null==wr){for(wr=u("pre",null,"CodeMirror-line-like"),i=0;i<49;++i)wr.appendChild(document.createTextNode("x")),wr.appendChild(u("br"));wr.appendChild(document.createTextNode("x"))}return ct(n.measure,wr),t=wr.offsetHeight/50,3<t&&(n.cachedTextHeight=t),bi(n.measure),t||1}function au(n){if(null!=n.cachedCharWidth)return n.cachedCharWidth;var t=u("span","xxxxxxxxxx"),i=u("pre",[t],"CodeMirror-line-like"),i=(ct(n.measure,i),t.getBoundingClientRect()),t=(i.right-i.left)/10;return 2<t&&(n.cachedCharWidth=t),t||10}function fl(n){for(var r,i=n.display,u={},f={},o=i.gutters.clientLeft,t=i.gutters.firstChild,e=0;t;t=t.nextSibling,++e)r=n.display.gutterSpecs[e].className,u[r]=t.offsetLeft+t.clientLeft+o,f[r]=t.clientWidth;return{fixedPos:el(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:u,gutterWidth:f,wrapperWidth:i.wrapper.clientWidth}}function el(n){return n.scroller.getBoundingClientRect().left-n.sizer.getBoundingClientRect().left}function op(n){var t=lu(n.display),i=n.options.lineWrapping,r=i&&Math.max(5,n.display.scroller.clientWidth/au(n.display)-3);return function(u){var e,f;if(gi(n.doc,u))return 0;if(e=0,u.widgets)for(f=0;f<u.widgets.length;f++)u.widgets[f].height&&(e+=u.widgets[f].height);return i?e+(Math.ceil(u.text.length/r)||1)*t:e+t}}function ol(n){var t=n.doc,i=op(n);t.iter(function(n){var t=i(n);t!=n.height&&fi(n,t)})}function br(i,r,u,f){var e=i.display,o,s,u;if(!u&&"true"==kh(r).getAttribute("cm-not-content"))return null;u=e.lineSpace.getBoundingClientRect();try{o=r.clientX-u.left;s=r.clientY-u.top}catch(i){return null}return e=rl(i,o,s),f&&0<e.xRel&&(r=t(i.doc,e.line).text).length==e.ch&&(u=yt(r,r.length,i.options.tabSize)-r.length,e=n(e.line,Math.max(0,Math.round((o-wy(i.display).left)/au(i.display))-u))),e}function kr(n,t){if(t>=n.display.viewTo||(t-=n.display.viewFrom)<0)return null;for(var r=n.display.view,i=0;i<r.length;i++)if((t-=r[i].size)<0)return i}function et(n,t,i,r){null==t&&(t=n.doc.first);null==i&&(i=n.doc.first+n.doc.size);var e,u=n.display,f=((r=r||0)&&i<u.viewTo&&(null==u.updateLineNumbers||u.updateLineNumbers>t)&&(u.updateLineNumbers=t),n.curOp.viewChanged=!0,t>=u.viewTo?ei&&pc(n.doc,t)<u.viewTo&&tr(n):i<=u.viewFrom?ei&&uy(n.doc,i+r)>u.viewFrom?tr(n):(u.viewFrom+=r,u.viewTo+=r):t<=u.viewFrom&&i>=u.viewTo?tr(n):t<=u.viewFrom?(f=rs(n,i,i+r,1))?(u.view=u.view.slice(f.index),u.viewFrom=f.lineN,u.viewTo+=r):tr(n):i>=u.viewTo?(f=rs(n,t,t,-1))?(u.view=u.view.slice(0,f.index),u.viewTo=f.lineN):tr(n):(f=rs(n,t,t,-1),e=rs(n,i,i+r,1),f&&e?(u.view=u.view.slice(0,f.index).concat(go(n,f.lineN,e.lineN)).concat(u.view.slice(e.index)),u.viewTo+=r):tr(n)),u.externalMeasured);f&&(i<f.lineN?f.lineN+=r:t<f.lineN+f.size&&(u.externalMeasured=null))}function nr(n,t,i){n.curOp.viewChanged=!0;var u=n.display,r=n.display.externalMeasured;r&&t>=r.lineN&&t<r.lineN+r.size&&(u.externalMeasured=null);t<u.viewFrom||t>=u.viewTo||null!=(r=u.view[kr(n,t)]).node&&-1==tt(u=r.changes||(r.changes=[]),i)&&u.push(i)}function tr(n){n.display.viewFrom=n.display.viewTo=n.doc.first;n.display.view=[];n.display.viewOffset=0}function rs(n,t,i,r){var o,u=kr(n,t),f=n.display.view,e,s;if(!ei||i==n.doc.first+n.doc.size)return{index:u,lineN:i};for(e=n.display.viewFrom,s=0;s<u;s++)e+=f[s].size;if(e!=t){if(0<r){if(u==f.length-1)return null;o=e+f[u].size-t;u++}else o=e-t;t+=o;i+=o}for(;pc(n.doc,i)!=i;){if(u==(r<0?0:f.length-1))return null;i+=r*f[u-(r<0?1:0)].size;u+=r}return{index:u,lineN:i}}function sp(n){for(var t,r=n.display.view,u=0,i=0;i<r.length;i++)t=r[i],t.hidden||t.node&&!t.changes||++u;return u}function ue(n){n.display.input.showSelection(n.display.input.prepareSelection())}function hp(i,r){var f,c,a,e;void 0===r&&(r=!0);var o=i.doc,s={},l=s.cursors=document.createDocumentFragment(),v=s.selection=document.createDocumentFragment(),h=i.options.$customCursor;for(h&&(r=!0),e=0;e<o.sel.ranges.length;e++)(r||e!=o.sel.primIndex)&&((f=o.sel.ranges[e]).from().line>=i.display.viewTo||f.to().line<i.display.viewFrom||(c=f.empty(),h?(a=h(i,f))&&sl(i,a,l):(c||i.options.showCursorWhenSelecting)&&sl(i,f.head,l),c||function(i,r,f){function c(n,t,i,r){t<0&&(t=0);t=Math.round(t);r=Math.round(r);p.appendChild(u("div",null,"CodeMirror-selected","position: absolute; left: "+n+"px;\n                             top: "+t+"px; width: "+(null==i?l-n:i)+"px;\n                             height: "+(r-t)+"px"))}function y(r,u,f){function p(t,u){return is(i,n(r,t),"div",a,u)}function y(n,t,r){return n=ep(i,a,null,n),t="ltr"==t==("after"==r)?"left":"right",p("after"==r?n.begin:n.end-(/\s/.test(a.text.charAt(n.end-1))?2:1),t)[t]}var e,s,a=t(v,r),b=a.text.length,w=ai(a,v.direction);return function(n,t,i,r){var e,f,u;if(!n)return r(t,i,"ltr",0);for(e=!1,f=0;f<n.length;++f)u=n[f],(u.from<i&&u.to>t||t==i&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,i),1==u.level?"rtl":"ltr",f),e=!0);e||r(t,i,"ltr")}(w,u||0,null==f?b:f,function(n,t,i,r){var rt,d,ut,g,nt,k="ltr"==i,a=p(n,k?"left":"right"),v=p(t-1,k?"right":"left"),tt=null==u&&0==n,it=null==f&&t==b,ft=0==r,r=!w||r==w.length-1;v.top-a.top<=3?(rt=(o?tt:it)&&ft?h:(k?a:v).left,nt=(o?it:tt)&&r?l:(k?v:a).right,c(rt,a.top,nt-rt,a.bottom)):(nt=k?(d=o&&tt&&ft?h:a.left,ut=o?l:y(n,i,"before"),g=o?h:y(t,i,"after"),o&&it&&r?l:v.right):(d=o?y(n,i,"before"):h,ut=!o&&tt&&ft?l:a.right,g=!o&&it&&r?h:v.left,o?y(t,i,"after"):l),c(d,a.top,ut-d,a.bottom),a.bottom<v.top&&c(h,a.bottom,null,v.top),c(g,v.top,nt-g,v.bottom));(!e||us(a,e)<0)&&(e=a);us(v,e)<0&&(e=v);(!s||us(a,s)<0)&&(s=a);us(v,s)<0&&(s=v)}),{start:e,end:s}}var e=i.display,v=i.doc,p=document.createDocumentFragment(),s=wy(i.display),h=s.left,l=Math.max(e.sizerWidth,pr(i)-e.sizer.offsetLeft)-s.right,o="ltr"==v.direction,a;e=r.from();s=r.to();e.line==s.line?y(e.line,e.ch,s.ch):(r=t(v,e.line),a=t(v,s.line),a=gt(r)==gt(a),e=y(e.line,e.ch,a?r.text.length+1:null).end,r=y(s.line,a?0:null,s.ch).start,a&&(e.top<r.top-2?(c(e.right,e.top,null,e.bottom),c(h,r.top,r.left,r.bottom)):c(e.right,e.top,r.left-e.right,e.bottom)),e.bottom<r.top&&c(h,e.bottom,null,r.top));f.appendChild(p)}(i,f,v)));return s}function sl(n,t,i){var r=ni(n,t,"div",null,null,!n.options.singleCursorHeightPerLine),f=i.appendChild(u("div"," ","CodeMirror-cursor"));f.style.left=r.left+"px";f.style.top=r.top+"px";f.style.height=Math.max(0,r.bottom-r.top)*n.options.cursorHeight+"px";/\bcm-fat-cursor\b/.test(n.getWrapperElement().className)&&(t=(t=is(n,t,"div",null,null)).right-t.left,f.style.width=(0<t?t:n.defaultCharWidth())+"px");r.other&&((f=i.appendChild(u("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",f.style.left=r.other.left+"px",f.style.top=r.other.top+"px",f.style.height=.85*(r.other.bottom-r.other.top)+"px")}function us(n,t){return n.top-t.top||n.left-t.left}function hl(n){var t,i;n.state.focused&&(t=n.display,clearInterval(t.blinker),i=!0,t.cursorDiv.style.visibility="",0<n.options.cursorBlinkRate?t.blinker=setInterval(function(){n.hasFocus()||vu(n);t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},n.options.cursorBlinkRate):n.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function cp(n){n.hasFocus()||(n.display.input.focus(),n.state.focused||ll(n))}function cl(n){n.state.delayingBlurEvent=!0;setTimeout(function(){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1,n.state.focused&&vu(n))},100)}function ll(n,t){n.state.delayingBlurEvent&&!n.state.draggingText&&(n.state.delayingBlurEvent=!1);"nocursor"!=n.options.readOnly&&(n.state.focused||(b(n,"focus",n,t),n.state.focused=!0,or(n.display.wrapper,"CodeMirror-focused"),n.curOp||n.display.selForContextMenu==n.doc.sel||(n.display.input.reset(),rt&&setTimeout(function(){return n.display.input.reset(!0)},20)),n.display.input.receivedFocus()),hl(n))}function vu(n,t){n.state.delayingBlurEvent||(n.state.focused&&(b(n,"blur",n,t),n.state.focused=!1,er(n.display.wrapper,"CodeMirror-focused")),clearInterval(n.display.blinker),setTimeout(function(){n.state.focused||(n.display.shift=!1)},150))}function fs(n){for(var u,i,e,r=n.display,l=r.lineDiv.offsetTop,y=Math.max(0,r.scroller.getBoundingClientRect().top),a=r.lineDiv.getBoundingClientRect().top,o=0,h=0;h<r.view.length;h++){var t=r.view[h],i=n.options.lineWrapping,f=void 0,c=0;if(!t.hidden){if(a+=t.line.height,s&&v<8?(f=(u=t.node.offsetTop+t.node.offsetHeight)-l,l=u):(f=(u=t.node.getBoundingClientRect()).bottom-u.top,!i&&t.text.firstChild&&(c=t.text.firstChild.getBoundingClientRect().right-u.left-1)),i=t.line.height-f,(.005<i||i<-.005)&&(a<y&&(o-=i),fi(t.line,f),lp(t.line),t.rest))for(e=0;e<t.rest.length;e++)lp(t.rest[e]);c>n.display.sizerWidth&&(i=Math.ceil(c/au(n.display)))>n.display.maxLineLength&&(n.display.maxLineLength=i,n.display.maxLine=t.line,n.display.maxLineChanged=!0)}}2<Math.abs(o)&&(r.scroller.scrollTop+=o)}function lp(n){var t,i,r;if(n.widgets)for(t=0;t<n.widgets.length;++t)i=n.widgets[t],r=i.node.parentNode,r&&(i.height=r.offsetHeight)}function es(n,i,r){var e,u=r&&null!=r.top?Math.max(0,r.top):n.scroller.scrollTop,u=Math.floor(u-ns(n)),f=r&&null!=r.bottom?r.bottom:u+n.wrapper.clientHeight,u=ar(i,u),f=ar(i,f);return r&&r.ensure&&(e=r.ensure.from.line,r=r.ensure.to.line,e<u?f=ar(i,vi(t(i,u=e))+n.wrapper.clientHeight):Math.min(r,i.lastLine())>=f&&(u=ar(i,vi(t(i,r))-n.wrapper.clientHeight),f=r)),{from:u,to:Math.max(f,u+1)}}function al(n,t){var f=n.display,e=lu(n.display),r=(t.top<0&&(t.top=0),(n.curOp&&null!=n.curOp.scrollTop?n.curOp:f.scroller).scrollTop),i=dc(n),u={},o=(t.bottom-t.top>i&&(t.bottom=t.top+i),n.doc.height+kc(f)),s=t.top<e,e=t.bottom>o-e,e=(t.top<r?u.scrollTop=s?0:t.top:t.bottom>r+i&&(s=Math.min(t.top,(e?o:t.bottom)-i))!=r&&(u.scrollTop=s),n.options.fixedGutter?0:f.gutters.offsetWidth),o=n.curOp&&null!=n.curOp.scrollLeft?n.curOp.scrollLeft:f.scroller.scrollLeft-e,i=pr(n)-f.gutters.offsetWidth,r=t.right-t.left>i;return r&&(t.right=t.left+i),t.left<10?u.scrollLeft=0:t.left<o?u.scrollLeft=Math.max(0,t.left+e-(r?0:10)):t.right>i+o-3&&(u.scrollLeft=t.right+(r?0:10)-i),u}function vl(n,t){null!=t&&(os(n),n.curOp.scrollTop=(null==n.curOp.scrollTop?n.doc:n.curOp).scrollTop+t)}function yu(n){os(n);var t=n.getCursor();n.curOp.scrollToPos={from:t,to:t,margin:n.options.cursorScrollMargin}}function fe(n,t,i){null==t&&null==i||os(n);null!=t&&(n.curOp.scrollLeft=t);null!=i&&(n.curOp.scrollTop=i)}function os(n){var t=n.curOp.scrollToPos;t&&(n.curOp.scrollToPos=null,ap(n,up(n,t.from),up(n,t.to),t.margin))}function ap(n,t,i,r){t=al(n,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});fe(n,t.scrollLeft,t.scrollTop)}function ee(n,t){Math.abs(n.doc.scrollTop-t)<2||(li||wl(n,{top:t}),vp(n,t,!0),li&&wl(n),he(n,100))}function vp(n,t,i){t=Math.max(0,Math.min(n.display.scroller.scrollHeight-n.display.scroller.clientHeight,t));(n.display.scroller.scrollTop!=t||i)&&(n.doc.scrollTop=t,n.display.scrollbars.setScrollTop(t),n.display.scroller.scrollTop!=t&&(n.display.scroller.scrollTop=t))}function dr(n,t,i,r){t=Math.max(0,Math.min(t,n.display.scroller.scrollWidth-n.display.scroller.clientWidth));(i?t==n.doc.scrollLeft:Math.abs(n.doc.scrollLeft-t)<2)&&!r||(n.doc.scrollLeft=t,kp(n),n.display.scroller.scrollLeft!=t&&(n.display.scroller.scrollLeft=t),n.display.scrollbars.setScrollLeft(t))}function oe(n){var t=n.display,i=t.gutters.offsetWidth,r=Math.round(n.doc.height+kc(n.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:n.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+oi(n)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function gr(n,t,i){this.cm=i;var r=this.vert=u("div",[u("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=u("div",[u("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=e.tabIndex=-1;n(r);n(e);f(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")});f(e,"scroll",function(){e.clientWidth&&t(e.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;s&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function se(){}function pu(n,t){var i,r,u;for(t=t||oe(n),i=n.display.barWidth,r=n.display.barHeight,yp(n,t),u=0;u<4&&i!=n.display.barWidth||r!=n.display.barHeight;u++)i!=n.display.barWidth&&n.options.lineWrapping&&fs(n),yp(n,oe(n)),i=n.display.barWidth,r=n.display.barHeight}function yp(n,t){var i=n.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px";i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px";i.heightForcer.style.borderBottom=r.bottom+"px solid transparent";r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="";r.bottom&&n.options.coverGutterNextToScrollbar&&n.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function pp(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&er(n.display.wrapper,n.display.scrollbars.addClass));n.display.scrollbars=new yl[n.options.scrollbarStyle](function(t){n.display.wrapper.insertBefore(t,n.display.scrollbarFiller);f(t,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)});t.setAttribute("cm-not-content","true")},function(t,i){("horizontal"==i?dr:ee)(n,t)},n);n.display.scrollbars.addClass&&or(n.display.wrapper,n.display.scrollbars.addClass)}function nu(n){n.curOp={cm:n,viewChanged:!1,startHeight:n.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++wp,markArrays:null};n=n.curOp;yr?yr.ops.push(n):n.ownsGroup=yr={ops:[n],delayedCallbacks:[]}}function tu(t){var h,f,i;if(t=t.curOp,t&&(h=function(t){for(var h,it,ut,y,ft,et,r,e,ot,ct,st,p,w,d,g,tt=0;tt<t.ops.length;tt++)t.ops[tt].cm.curOp=null;for(h=t.ops,it=0;it<h.length;it++){rt=v=f=void 0;var f=h[it],v=f.cm,rt=v.display;(function(n){var t=n.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=oi(n)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=oi(n)+"px",t.scrollbarsClipped=!0)})(v);f.updateMaxLine&&wc(v);f.mustUpdate=f.viewChanged||f.forceUpdate||null!=f.scrollTop||f.scrollToPos&&(f.scrollToPos.from.line<rt.viewFrom||f.scrollToPos.to.line>=rt.viewTo)||rt.maxLineChanged&&v.options.lineWrapping;f.update=f.mustUpdate&&new ce(v,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}for(ut=0;ut<h.length;ut++)y=void 0,y=h[ut],y.updatedDisplay=y.mustUpdate&&pl(y.cm,y.update);for(ft=0;ft<h.length;ft++){s=void 0;l=void 0;a=void 0;var s=h[ft],l=s.cm,a=l.display;s.updatedDisplay&&fs(l);s.barMeasure=oe(l);a.maxLineChanged&&!l.options.lineWrapping&&(s.adjustWidthTo=ky(l,a.maxLine,a.maxLine.text.length).left+3,l.display.sizerWidth=s.adjustWidthTo,s.barMeasure.scrollWidth=Math.max(a.scroller.clientWidth,a.sizer.offsetLeft+s.adjustWidthTo+oi(l)+l.display.barWidth),s.maxScrollLeft=Math.max(0,a.sizer.offsetLeft+s.adjustWidthTo-pr(l)));(s.updatedDisplay||s.selectionChanged)&&(s.preparedSelection=a.input.prepareSelection())}for(et=0;et<h.length;et++)r=void 0,e=void 0,ot=void 0,r=h[et],e=r.cm,null!=r.adjustWidthTo&&(e.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<e.doc.scrollLeft&&dr(e,Math.min(e.display.scroller.scrollLeft,r.maxScrollLeft),!0),e.display.maxLineChanged=!1),ot=r.focus&&r.focus==vt(kt(e)),r.preparedSelection&&e.display.input.showSelection(r.preparedSelection,ot),(r.updatedDisplay||r.startHeight!=e.doc.height)&&pu(e,r.barMeasure),r.updatedDisplay&&kl(e,r.barMeasure),r.selectionChanged&&hl(e),e.state.focused&&r.updateInput&&e.display.input.reset(r.typing),ot&&cp(r.cm);for(st=0;st<h.length;st++){i=void 0;c=void 0;nt=void 0;ht=void 0;ct=void 0;p=void 0;w=void 0;d=void 0;g=void 0;var i=h[st],c=i.cm,nt=c.display,ht=c.doc;if(i.updatedDisplay&&bp(c,i.update),null!=nt.wheelStartX&&(null!=i.scrollTop||null!=i.scrollLeft||i.scrollToPos)&&(nt.wheelStartX=nt.wheelStartY=null),null!=i.scrollTop&&vp(c,i.scrollTop,i.forceScroll),null!=i.scrollLeft&&dr(c,i.scrollLeft,!0,!0),i.scrollToPos&&(ct=function(t,i,r,u){var o;for(null==u&&(u=0),t.options.lineWrapping||i!=r||(r="before"==i.sticky?n(i.line,i.ch+1,"before"):i,i=i.ch?n(i.line,"before"==i.sticky?i.ch-1:i.ch,"after"):i),o=0;o<5;o++){var h,s=!1,f=ni(t,i),e=r&&r!=i?ni(t,r):f,f=al(t,h={left:Math.min(f.left,e.left),top:Math.min(f.top,e.top)-u,right:Math.max(f.left,e.left),bottom:Math.max(f.bottom,e.bottom)+u}),e=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=f.scrollTop&&(ee(t,f.scrollTop),1<Math.abs(t.doc.scrollTop-e)&&(s=!0)),null!=f.scrollLeft&&(dr(t,f.scrollLeft),1<Math.abs(t.doc.scrollLeft-c)&&(s=!0)),!s)break}return h}(c,o(ht,i.scrollToPos.from),o(ht,i.scrollToPos.to),i.scrollToPos.margin),function(n,t){var f,r,e,i;k(n,"scrollCursorIntoView")||(i=(f=n.display).sizer.getBoundingClientRect(),r=null,e=f.wrapper.ownerDocument,t.top+i.top<0?r=!0:t.bottom+i.top>(e.defaultView.innerHeight||e.documentElement.clientHeight)&&(r=!1),null==r||yk||(i=u("div","​",null,"position: absolute;\n                         top: "+(t.top-f.viewOffset-ns(n.display))+"px;\n                         height: "+(t.bottom-t.top+oi(n)+f.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;"),n.display.lineSpace.appendChild(i),i.scrollIntoView(r),n.display.lineSpace.removeChild(i)))}(c,ct)),p=i.maybeHiddenMarkers,w=i.maybeUnhiddenMarkers,p)for(d=0;d<p.length;++d)p[d].lines.length||b(p[d],"hide");if(w)for(g=0;g<w.length;++g)w[g].lines.length&&b(w[g],"unhide");nt.wrapper.offsetHeight&&(ht.scrollTop=c.display.scroller.scrollTop);i.changeObjs&&b(c,"changes",c,i.changeObjs);i.update&&i.update.finish()}},t=t.ownsGroup))try{var e=t,s=e.delayedCallbacks,r=0;do{for(;r<s.length;r++)s[r].call(null);for(f=0;f<e.ops.length;f++)if(i=e.ops[f],i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}while(r<s.length)}finally{yr=null;h(t)}}function ot(n,t){if(n.curOp)return t();nu(n);try{return t()}finally{tu(n)}}function g(n,t){return function(){if(n.curOp)return t.apply(n,arguments);nu(n);try{return t.apply(n,arguments)}finally{tu(n)}}}function ut(n){return function(){if(this.curOp)return n.apply(this,arguments);nu(this);try{return n.apply(this,arguments)}finally{tu(this)}}}function nt(n){return function(){var t=this.cm;if(!t||t.curOp)return n.apply(this,arguments);nu(t);try{return n.apply(this,arguments)}finally{tu(t)}}}function he(n,t){n.doc.highlightFrontier<n.display.viewTo&&n.state.highlight.set(t,fh(ud,n))}function ud(n){var u,t,r,i=n.doc;i.highlightFrontier>=n.display.viewTo||(u=+new Date+n.options.workTime,t=gf(n,i.highlightFrontier),r=[],i.iter(t.line,Math.min(i.first+i.size,n.display.viewTo+500),function(f){if(t.line>=n.display.viewFrom){for(var s=f.styles,o=f.text.length>n.options.maxHighlightLength?cr(i.mode,t.state):null,e=vv(n,f,t,!0),o=(o&&(t.state=o),f.styles=e.styles,f.styleClasses),e=e.classes,c=(e?f.styleClasses=e:o&&(f.styleClasses=null),!s||s.length!=f.styles.length||o!=e&&(!o||!e||o.bgClass!=e.bgClass||o.textClass!=e.textClass)),h=0;!c&&h<s.length;++h)c=s[h]!=f.styles[h];c&&r.push(t.line);f.stateAfter=t.save();t.nextLine()}else f.text.length<=n.options.maxHighlightLength&&hc(n,f.text,t),f.stateAfter=t.line%5==0?t.save():null,t.nextLine();if(+new Date>u)return he(n,n.options.workDelay),!0}),i.highlightFrontier=t.line,i.modeFrontier=Math.max(i.modeFrontier,t.line),r.length&&ot(n,function(){for(var t=0;t<r.length;t++)nr(n,r[t],"text")}))}function pl(n,i){function k(n){var t=n.nextSibling;return rt&&at&&l.display.currentWheelTarget==n?n.style.display="none":n.parentNode.removeChild(n),t}var r=n.display,c=n.doc,s,v;if(i.editorIsHidden)return tr(n),!1;if(!i.force&&i.visible.from>=r.viewFrom&&i.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==sp(n))return!1;dp(n)&&(tr(n),i.dims=fl(n));var e=c.first+c.size,u=Math.max(i.visible.from-n.options.viewportMargin,c.first),o=Math.min(e,i.visible.to+n.options.viewportMargin),c=(r.viewFrom<u&&u-r.viewFrom<20&&(u=Math.max(c.first,r.viewFrom)),r.viewTo>o&&r.viewTo-o<20&&(o=Math.min(e,r.viewTo)),ei&&(u=pc(n.doc,u),o=uy(n.doc,o)),u!=r.viewFrom||o!=r.viewTo||r.lastWrapHeight!=i.wrapperHeight||r.lastWrapWidth!=i.wrapperWidth),e=(e=u,u=o,0==(f=(o=n).display).view.length||e>=f.viewTo||u<=f.viewFrom?(f.view=go(o,e,u),f.viewFrom=e):(f.viewFrom>e?f.view=go(o,e,f.viewFrom).concat(f.view):f.viewFrom<e&&(f.view=f.view.slice(kr(o,e))),f.viewFrom=e,f.viewTo<u?f.view=f.view.concat(go(o,f.viewTo,u)):f.viewTo>u&&(f.view=f.view.slice(0,kr(o,u)))),f.viewTo=u,r.viewOffset=vi(t(n.doc,r.viewFrom)),n.display.mover.style.top=r.viewOffset+"px",sp(n));if(!c&&0==e&&!i.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;for(var o=function(n){if(n.hasFocus()||!(t=vt(kt(n)))||!ki(n.display.lineDiv,t))return null;var i,t={activeElt:t};return window.getSelection&&(i=eo(n).getSelection()).anchorNode&&i.extend&&ki(n.display.lineDiv,i.anchorNode)&&(t.anchorNode=i.anchorNode,t.anchorOffset=i.anchorOffset,t.focusNode=i.focusNode,t.focusOffset=i.focusOffset),t}(n),l=(4<e&&(r.lineDiv.style.display="none"),n),w=r.updateLineNumbers,b=i.dims,f=l.display,g=l.options.lineNumbers,y=f.lineDiv,h=y.firstChild,d=f.view,a=f.viewFrom,p=0;p<d.length;p++){if(s=d[p],!s.hidden)if(s.node&&s.node.parentNode==y){for(;h!=s.node;)h=k(h);v=g&&null!=w&&w<=a&&s.lineNumber;s.changes&&(-1<tt(s.changes,"gutter")&&(v=!1),ly(l,s,a,b));v&&(bi(s.lineNumber),s.lineNumber.appendChild(document.createTextNode(ec(l.options,a))));h=s.node.nextSibling}else v=function(n,t,i,r){var u=ay(n,t);return t.text=t.node=u.pre,u.bgClass&&(t.bgClass=u.bgClass),u.textClass&&(t.textClass=u.textClass),bc(n,t),vy(n,t,i,r),yy(n,t,r),t.node}(l,s,a,b),y.insertBefore(v,h);a+=s.size}for(;h;)h=k(h);return 4<e&&(r.lineDiv.style.display=""),r.renderedView=r.view,(u=o)&&u.activeElt&&u.activeElt!=vt(u.activeElt.ownerDocument)&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&ki(document.body,u.anchorNode)&&ki(document.body,u.focusNode)&&(e=(f=u.activeElt.ownerDocument).defaultView.getSelection(),(f=f.createRange()).setEnd(u.anchorNode,u.anchorOffset),f.collapse(!1),e.removeAllRanges(),e.addRange(f),e.extend(u.focusNode,u.focusOffset))),bi(r.cursorDiv),bi(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,c&&(r.lastWrapHeight=i.wrapperHeight,r.lastWrapWidth=i.wrapperWidth,he(n,400)),!(r.updateLineNumbers=null)}function bp(n,t){for(var u,i=t.viewport,r=!0;;r=!1){if(r&&n.options.lineWrapping&&t.oldDisplayWidth!=pr(n))r&&(t.visible=es(n.display,n.doc,i));else if(i&&null!=i.top&&(i={top:Math.min(n.doc.height+kc(n.display)-dc(n),i.top)}),t.visible=es(n.display,n.doc,i),t.visible.from>=n.display.viewFrom&&t.visible.to<=n.display.viewTo)break;if(!pl(n,t))break;fs(n);u=oe(n);ue(n);pu(n,u);kl(n,u);t.force=!1}t.signal(n,"update",n);n.display.viewFrom==n.display.reportedViewFrom&&n.display.viewTo==n.display.reportedViewTo||(t.signal(n,"viewportChange",n,n.display.viewFrom,n.display.viewTo),n.display.reportedViewFrom=n.display.viewFrom,n.display.reportedViewTo=n.display.viewTo)}function wl(n,t){var i,t=new ce(n,t);pl(n,t)&&(fs(n),bp(n,t),i=oe(n),ue(n),pu(n,i),kl(n,i),t.finish())}function bl(n){var t=n.gutters.offsetWidth;n.sizer.style.marginLeft=t+"px";d(n,"gutterChanged",n)}function kl(n,t){n.display.sizer.style.minHeight=t.docHeight+"px";n.display.heightForcer.style.top=t.docHeight+"px";n.display.gutters.style.height=t.docHeight+n.display.barHeight+oi(n)+"px"}function kp(n){var i=n.display,r=i.view,u,f;if(i.alignWidgets||i.gutters.firstChild&&n.options.fixedGutter){for(var o=el(i)-i.scroller.scrollLeft+n.doc.scrollLeft,s=i.gutters.offsetWidth,e=o+"px",t=0;t<r.length;t++)if(!r[t].hidden&&(n.options.fixedGutter&&(r[t].gutter&&(r[t].gutter.style.left=e),r[t].gutterBackground&&(r[t].gutterBackground.style.left=e)),u=r[t].alignable,u))for(f=0;f<u.length;f++)u[f].style.left=e;n.options.fixedGutter&&(i.gutters.style.left=o+s+"px")}}function dp(n){var i,t,f,r;if(n.options.lineNumbers)return i=n.doc,i=ec(n.options,i.first+i.size-1),t=n.display,i.length!=t.lineNumChars?(f=(r=t.measure.appendChild(u("div",[u("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt"))).firstChild.offsetWidth,r=r.offsetWidth-f,t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(f,t.lineGutter.offsetWidth-r)+1,t.lineNumWidth=t.lineNumInnerWidth+r,t.lineNumChars=t.lineNumInnerWidth?i.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",bl(n.display),1):void 0}function dl(n,t){for(var i,f,r=[],e=!1,u=0;u<n.length;u++){if(i=n[u],f=null,"string"!=typeof i&&(f=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!t)continue;e=!0}r.push({className:i,style:f})}return t&&!e&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function gp(n){var r=n.gutters,f=n.gutterSpecs,t;for(bi(r),n.lineGutter=null,t=0;t<f.length;++t){var i=f[t],e=i.className,i=i.style,o=r.appendChild(u("div",null,"CodeMirror-gutter "+e));i&&(o.style.cssText=i);"CodeMirror-linenumbers"==e&&((n.lineGutter=o).style.width=(n.lineNumWidth||1)+"px")}r.style.display=f.length?"":"none";bl(n)}function le(n){gp(n.display);et(n);kp(n)}function fd(n,t,i,r){var f=this,e=(this.input=i,f.scrollbarFiller=u("div",null,"CodeMirror-scrollbar-filler"),f.scrollbarFiller.setAttribute("cm-not-content","true"),f.gutterFiller=u("div",null,"CodeMirror-gutter-filler"),f.gutterFiller.setAttribute("cm-not-content","true"),f.lineDiv=uu("div",null,"CodeMirror-code"),f.selectionDiv=u("div",null,null,"position: relative; z-index: 1"),f.cursorDiv=u("div",null,"CodeMirror-cursors"),f.measure=u("div",null,"CodeMirror-measure"),f.lineMeasure=u("div",null,"CodeMirror-measure"),f.lineSpace=uu("div",[f.measure,f.lineMeasure,f.selectionDiv,f.cursorDiv,f.lineDiv],null,"position: relative; outline: none"),uu("div",[f.lineSpace],"CodeMirror-lines"));f.mover=u("div",[e],null,"position: relative");f.sizer=u("div",[f.mover],"CodeMirror-sizer");f.sizerWidth=null;f.heightForcer=u("div",null,null,"position: absolute; height: "+da+"px; width: 1px;");f.gutters=u("div",null,"CodeMirror-gutters");f.lineGutter=null;f.scroller=u("div",[f.sizer,f.heightForcer,f.gutters],"CodeMirror-scroll");f.scroller.setAttribute("tabIndex","-1");f.wrapper=u("div",[f.scrollbarFiller,f.gutterFiller,f.scroller],"CodeMirror");wi&&105<=ba&&(f.wrapper.style.clipPath="inset(0px)");f.wrapper.setAttribute("translate","no");s&&v<8&&(f.gutters.style.zIndex=-1,f.scroller.style.paddingRight=0);rt||li&&lf||(f.scroller.draggable=!0);n&&(n.appendChild?n.appendChild(f.wrapper):n(f.wrapper));f.viewFrom=f.viewTo=t.first;f.reportedViewFrom=f.reportedViewTo=t.first;f.view=[];f.renderedView=null;f.externalMeasured=null;f.viewOffset=0;f.lastWrapHeight=f.lastWrapWidth=0;f.updateLineNumbers=null;f.nativeBarWidth=f.barHeight=f.barWidth=0;f.scrollbarsClipped=!1;f.lineNumWidth=f.lineNumInnerWidth=f.lineNumChars=null;f.alignWidgets=!1;f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null;f.maxLine=null;f.maxLineLength=0;f.maxLineChanged=!1;f.wheelDX=f.wheelDY=f.wheelStartX=f.wheelStartY=null;f.shift=!1;f.selForContextMenu=null;f.activeTouch=null;f.gutterSpecs=dl(r.gutters,r.lineNumbers);gp(f);i.init(f)}function nw(n){var i=n.wheelDeltaX,t=n.wheelDeltaY;return null==i&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(i=n.detail),null==t&&n.detail&&n.axis==n.VERTICAL_AXIS?t=n.detail:null==t&&(t=n.wheelDelta),{x:i,y:t}}function ed(n){return n=nw(n),n.x*=hi,n.y*=hi,n}function tw(n,t){var s,l,c;wi&&102==ba&&(null==n.display.chromeScrollHack?n.display.sizer.style.pointerEvents="none":clearTimeout(n.display.chromeScrollHack),n.display.chromeScrollHack=setTimeout(function(){n.display.chromeScrollHack=null;n.display.sizer.style.pointerEvents=""},100));var r=nw(t),o=r.x,r=r.y,f=hi,i=(0===t.deltaMode&&(o=t.deltaX,r=t.deltaY,f=1),n.display),u=i.scroller,h=u.scrollWidth>u.clientWidth,e=u.scrollHeight>u.clientHeight;if(o&&h||r&&e){if(r&&at&&rt)n:for(s=t.target,l=i.view;s!=u;s=s.parentNode)for(c=0;c<l.length;c++)if(l[c].node==s){n.display.currentWheelTarget=s;break n}if(o&&!li&&!bt&&null!=f)return r&&e&&ee(n,Math.max(0,u.scrollTop+r*f)),dr(n,Math.max(0,u.scrollLeft+o*f)),r&&!e||ft(t),void(i.wheelStartX=null);r&&null!=f&&(e=(h=n.doc.scrollTop)+i.wrapper.clientHeight,(f=r*f)<0?h=Math.max(0,h+f-50):e=Math.min(n.doc.height,e+f+50),wl(n,{top:h,bottom:e}));ae<20&&0!==t.deltaMode&&(null==i.wheelStartX?(i.wheelStartX=u.scrollLeft,i.wheelStartY=u.scrollTop,i.wheelDX=o,i.wheelDY=r,setTimeout(function(){var t,n;null!=i.wheelStartX&&(t=u.scrollLeft-i.wheelStartX,n=(n=u.scrollTop-i.wheelStartY)&&i.wheelDY&&n/i.wheelDY||t&&i.wheelDX&&t/i.wheelDX,i.wheelStartX=i.wheelStartY=null,n&&(hi=(hi*ae+n)/(ae+1),++ae))},200)):(i.wheelDX+=o,i.wheelDY+=r))}}function ti(n,t,i){var c=n&&n.options.selectionsMayTouch,n=t[i],u;for(t.sort(function(n,t){return e(n.from(),t.from())}),i=tt(t,n),u=1;u<t.length;u++){var s,r=t[u],f=t[u-1],o=e(f.to(),r.from());(c&&!r.empty()?0<o:0<=o)&&(o=ao(f.from(),r.from()),s=lo(f.to(),r.to()),r=f.empty()?r.from()==r.head:f.from()==f.head,u<=i&&--i,t.splice(--u,2,new h(r?s:o,r?o:s)))}return new st(t,i)}function ir(n,t){return new st([new h(n,t||n)],0)}function rr(t){return t.text?n(t.from.line+t.text.length-1,c(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function iw(t,i){if(e(t,i.from)<0)return t;if(e(t,i.to)<=0)return rr(i);var u=t.line+i.text.length-(i.to.line-i.from.line)-1,r=t.ch;return t.line==i.to.line&&(r+=rr(i).ch-i.to.ch),n(u,r)}function gl(n,t){for(var u,r=[],i=0;i<n.sel.ranges.length;i++)u=n.sel.ranges[i],r.push(new h(iw(u.anchor,t),iw(u.head,t)));return ti(n.cm,r,n.sel.primIndex)}function rw(t,i,r){return t.line==i.line?n(r.line,t.ch-i.ch+r.ch):n(r.line+(t.line-i.line),t.ch)}function na(n){n.doc.mode=rc(n.options,n.doc.modeOption);ve(n)}function ve(n){n.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null);n.styles&&(n.styles=null)});n.doc.modeFrontier=n.doc.highlightFrontier=n.doc.first;he(n,100);n.state.modeGen++;n.curOp&&et(n)}function uw(n,t){return 0==t.from.ch&&0==t.to.ch&&""==c(t.text)&&(!n.cm||n.cm.options.wholeLineUpdateBefore)}function ta(n,i,r,u){function v(n){return r?r[n]:null}function h(n,t,r){var f,e;t=t;r=r;e=u;(f=n).text=t;f.stateAfter&&(f.stateAfter=null);f.styles&&(f.styles=null);null!=f.order&&(f.order=null);gv(f);ny(f,r);(t=e?e(f):1)!=f.height&&fi(f,t);d(n,"change",n,i)}function p(n,t){for(var r=[],i=n;i<t;++i)r.push(new vr(f[i],v(i),u));return r}var s,e=i.from,l=i.to,f=i.text,o=t(n,e.line),a=t(n,l.line),b=c(f),w=v(f.length-1),y=l.line-e.line;i.full?(n.insert(0,p(0,f.length)),n.remove(f.length,n.size-f.length)):uw(n,i)?(s=p(0,f.length-1),h(a,a.text,w),y&&n.remove(e.line,y),s.length&&n.insert(e.line,s)):o==a?1==f.length?h(o,o.text.slice(0,e.ch)+b+o.text.slice(l.ch),w):((s=p(1,f.length-1)).push(new vr(b+o.text.slice(l.ch),w,u)),h(o,o.text.slice(0,e.ch)+f[0],v(0)),n.insert(e.line+1,s)):1==f.length?(h(o,o.text.slice(0,e.ch)+f[0]+a.text.slice(l.ch),v(0)),n.remove(e.line+1,y)):(h(o,o.text.slice(0,e.ch)+f[0],v(0)),h(a,b+a.text.slice(l.ch),w),s=p(1,f.length-1),1<y&&n.remove(e.line+1,y-1),n.insert(e.line+1,s));d(n,"change",n,i)}function ur(n,t,i){!function n(r,u,f){var o,s,e;if(r.linked)for(o=0;o<r.linked.length;++o)e=r.linked[o],e.doc!=u&&(s=f&&e.sharedHist,i&&!s||(t(e.doc,s),n(e.doc,r,s)))}(n,null,!0)}function fw(n,t){if(t.cm)throw new Error("This document is already in use.");ol((n.doc=t).cm=n);na(n);ew(n);n.options.direction=t.direction;n.options.lineWrapping||wc(n);n.options.mode=t.modeOption;et(n)}function ew(n){("rtl"==n.doc.direction?or:er)(n.display.lineDiv,"CodeMirror-rtl")}function ss(n){this.done=[];this.undone=[];this.undoDepth=n?n.undoDepth:1/0;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=n?n.maxGeneration:1}function ia(n,t){var i={from:sc(t.from),to:rr(t),text:lr(n,t.from,t.to)};return hw(n,i,t.from.line,t.to.line+1),ur(n,function(n){return hw(n,i,t.from.line,t.to.line+1)},!0),i}function ow(n){for(;n.length;){if(!c(n).ranges)break;n.pop()}}function sw(n,t,i,r){var o,f,u=n.history,h=(u.undone.length=0,+new Date),s;if((u.lastOp==r||u.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&u.lastModTime>h-(n.cm?n.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(f=(f=u).lastOp==r?(ow(f.done),c(f.done)):f.done.length&&!c(f.done).ranges?c(f.done):1<f.done.length&&!f.done[f.done.length-2].ranges?(f.done.pop(),c(f.done)):void 0))o=c(f.changes),0==e(t.from,t.to)&&0==e(t.from,o.to)?o.to=rr(t):f.changes.push(ia(n,t));else for(s=c(u.done),s&&s.ranges||hs(n.sel,u.done),f={changes:[ia(n,t)],generation:u.generation},u.done.push(f);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift();u.done.push(i);u.generation=++u.maxGeneration;u.lastModTime=u.lastSelTime=h;u.lastOp=u.lastSelOp=r;u.lastOrigin=u.lastSelOrigin=t.origin;o||b(n,"historyAdded")}function od(n,t,i,r){var e,o,s,u=n.history,f=r&&r.origin;i==u.lastSelOp||f&&u.lastSelOrigin==f&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==f||(n=n,e=f,o=c(u.done),s=t,"*"==(e=e.charAt(0))||"+"==e&&o.ranges.length==s.ranges.length&&o.somethingSelected()==s.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=t:hs(t,u.done);u.lastSelTime=+new Date;u.lastSelOrigin=f;u.lastSelOp=i;r&&!1!==r.clearRedo&&ow(u.undone)}function hs(n,t){var i=c(t);i&&i.ranges&&i.equals(n)||t.push(n)}function hw(n,t,i,r){var u=t["spans_"+n.id],f=0;n.iter(Math.max(n.first,i),Math.min(n.first+n.size,r),function(i){i.markedSpans&&((u=u||(t["spans_"+n.id]={}))[f]=i.markedSpans);++f})}function sd(n,t){var u=t["spans_"+n.id],r,i;if(!u)return null;for(r=[],i=0;i<t.text.length;++i)r.push(function(n){if(!n)return null;for(var t,i=0;i<n.length;++i)n[i].marker.explicitlyCleared?t=t||n.slice(0,i):t&&t.push(n[i]);return t?t.length?t:null:n}(u[i]));return r}function cw(n,t){var i=sd(n,t),s=vc(n,t),r,f,u,e,h,o;if(!i)return s;if(!s)return i;for(r=0;r<i.length;++r)if(f=i[r],u=s[r],f&&u)n:for(e=0;e<u.length;++e){for(h=u[e],o=0;o<f.length;++o)if(f[o].marker==h.marker)continue n;f.push(h)}else u&&(i[r]=u);return i}function wu(n,t,i){for(var u,l,s,h,a,r,f,e=[],o=0;o<n.length;++o)if(u=n[o],u.ranges)e.push(i?st.prototype.deepCopy.call(u):u);else for(l=u.changes,s=[],e.push({changes:s}),h=0;h<l.length;++h)if(r=l[h],s.push({from:r.from,to:r.to,text:r.text}),t)for(f in r)(a=f.match(/^spans_(\d+)$/))&&-1<tt(t,Number(a[1]))&&(c(s)[f]=r[f],delete r[f]);return e}function ra(n,t,i,r){return r?(r=n.anchor,i&&((n=e(t,r)<0)!=e(i,r)<0?(r=t,t=i):n!=e(t,i)<0&&(t=i)),new h(r,t)):new h(i||t,t)}function cs(n,t,i,r,u){null==u&&(u=n.cm&&(n.cm.display.shift||n.extend));it(n,new st([ra(n.sel.primary(),t,i,u)],0),r)}function lw(n,t,i){for(var u=[],f=n.cm&&(n.cm.display.shift||n.extend),r=0;r<n.sel.ranges.length;r++)u[r]=ra(n.sel.ranges[r],t[r],null,f);it(n,ti(n.cm,u,n.sel.primIndex),i)}function ua(n,t,i,r){var u=n.sel.ranges.slice(0);u[t]=i;it(n,ti(n.cm,u,n.sel.primIndex),r)}function aw(n,t,i,r){it(n,ir(t,i),r)}function vw(n,t,i){var r=n.history.done,u=c(r);u&&u.ranges?ls(n,r[r.length-1]=t,i):it(n,t,i)}function it(n,t,i){ls(n,t,i);od(n,n.sel,n.cm?n.cm.curOp.id:NaN,i)}function ls(n,t,i){(pt(n,"beforeSelectionChange")||n.cm&&pt(n.cm,"beforeSelectionChange"))&&(u=n,r=i,r={ranges:(f=t).ranges,update:function(n){this.ranges=[];for(var t=0;t<n.length;t++)this.ranges[t]=new h(o(u,n[t].anchor),o(u,n[t].head))},origin:r&&r.origin},b(u,"beforeSelectionChange",u,r),u.cm&&b(u.cm,"beforeSelectionChange",u.cm,r),t=r.ranges!=f.ranges?ti(u.cm,r.ranges,r.ranges.length-1):f);var u,f,r=i&&i.bias||(e(t.primary().head,n.sel.primary().head)<0?-1:1);yw(n,ww(n,t,r,!0));i&&!1===i.scroll||!n.cm||"nocursor"==n.cm.getOption("readOnly")||yu(n.cm)}function yw(n,t){t.equals(n.sel)||(n.sel=t,n.cm&&(n.cm.curOp.updateInput=1,n.cm.curOp.selectionChanged=!0,ov(n.cm)),d(n,"cursorActivity",n))}function pw(n){yw(n,ww(n,n.sel,null,!1))}function ww(n,t,i,r){for(var o,u=0;u<t.ranges.length;u++){var f=t.ranges[u],e=t.ranges.length==n.sel.ranges.length&&n.sel.ranges[u],s=as(n,f.anchor,e&&e.anchor,i,r),e=f.head==f.anchor?s:as(n,f.head,e&&e.head,i,r);(o||s!=f.anchor||e!=f.head)&&((o=o||t.ranges.slice(0,u))[u]=new h(s,e))}return o?ti(n.cm,o,t.primIndex):t}function bu(n,i,r,u,f){var c=t(n,i.line),l,o,h;if(c.markedSpans)for(l=0;l<c.markedSpans.length;++l){var o=c.markedSpans[l],s=o.marker,a="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,v="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==o.from||(a?o.from<=i.ch:o.from<i.ch))&&(null==o.to||(v?o.to>=i.ch:o.to>i.ch))){if(f&&(b(s,"beforeCursorEnter"),s.explicitlyCleared)){if(c.markedSpans){--l;continue}break}if(s.atomic)return r&&(o=s.find(u<0?1:-1),h=void 0,(o=(u<0?v:a)?bw(n,o,-u,o&&o.line==i.line?c:null):o)&&o.line==i.line&&(h=e(o,r))&&(u<0?h<0:0<h))?bu(n,o,i,u,f):(h=s.find(u<0?-1:1),(h=(u<0?a:v)?bw(n,h,u,h.line==i.line?c:null):h)?bu(n,h,i,u,f):null)}}return i}function as(t,i,r,u,f){return u=u||1,f=bu(t,i,r,u,f)||!f&&bu(t,i,r,u,!0)||bu(t,i,r,-u,f)||!f&&bu(t,i,r,-u,!0),f||(t.cantEdit=!0,n(t.first,0))}function bw(i,r,u,f){return u<0&&0==r.ch?r.line>i.first?o(i,n(r.line-1)):null:0<u&&r.ch==(f||t(i,r.line)).text.length?r.line<i.first+i.size-1?n(r.line+1,0):null:new n(r.line,r.ch+u)}function kw(t){t.setSelection(n(t.firstLine(),0),n(t.lastLine()),ui)}function dw(n,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(t,i,u,f){t&&(r.from=o(n,t));i&&(r.to=o(n,i));u&&(r.text=u);void 0!==f&&(r.origin=f)}),b(n,"beforeChange",n,r),n.cm&&b(n.cm,"beforeChange",n.cm,r),r.canceled?(n.cm&&(n.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ku(n,t,i){var u,r;if(n.cm){if(!n.cm.curOp)return g(n.cm,ku)(n,t,i);if(n.cm.state.suppressEdits)return}if(!(pt(n,"beforeChange")||n.cm&&pt(n.cm,"beforeChange"))||(t=dw(n,t,!0)))if(u=ac&&!i&&function(n,t,i){var r=null,f,c,h,a,v,u;if(n.iter(t.line,i.line+1,function(n){var t,i;if(n.markedSpans)for(t=0;t<n.markedSpans.length;++t)i=n.markedSpans[t].marker,!i.readOnly||r&&-1!=tt(r,i)||(r=r||[]).push(i)}),!r)return null;for(f=[{from:t,to:i}],c=0;c<r.length;++c)for(var l=r[c],o=l.find(0),s=0;s<f.length;++s)u=f[s],e(u.to,o.from)<0||0<e(u.from,o.to)||(h=[s,1],a=e(u.from,o.from),v=e(u.to,o.to),(a<0||!l.inclusiveLeft&&!a)&&h.push({from:u.from,to:o.from}),(0<v||!l.inclusiveRight&&!v)&&h.push({from:o.to,to:u.to}),f.splice.apply(f,h),s+=h.length-3);return f}(n,t.from,t.to),u)for(r=u.length-1;0<=r;--r)gw(n,{from:u[r].from,to:u[r].to,text:r?[""]:t.text,origin:t.origin});else gw(n,t)}function gw(n,t){var i,r;1==t.text.length&&""==t.text[0]&&0==e(t.from,t.to)||(i=gl(n,t),sw(n,t,i,n.cm?n.cm.curOp.id:NaN),ye(n,t,i,vc(n,t)),r=[],ur(n,function(n,i){i||-1!=tt(r,n.history)||(rb(n.history,t),r.push(n.history));ye(n,t,null,vc(n,t))}))}function vs(n,t,i){var l=n.cm&&n.cm.state.suppressEdits,h;if(!l||i){for(var r,u=n.history,a=n.sel,f="undo"==t?u.done:u.undone,o="undo"==t?u.undone:u.done,e=0;e<f.length&&(r=f[e],i?!r.ranges||r.equals(n.sel):r.ranges);e++);if(e!=f.length){for(u.lastOrigin=u.lastSelOrigin=null;;){if(!(r=f.pop()).ranges){if(l)return void f.push(r);break}if(hs(r,o),i&&!r.equals(n.sel))return void it(n,r,{clearRedo:!1});a=r}for(var v=[],y=(hs(a,o),o.push({changes:v,generation:u.generation}),u.generation=r.generation||++u.maxGeneration,pt(n,"beforeChange")||n.cm&&pt(n.cm,"beforeChange")),s=r.changes.length-1;0<=s;--s)if(h=function(i){var u=r.changes[i],o,e;if(u.origin=t,y&&!dw(n,u,!1))return f.length=0,{};v.push(ia(n,u));o=i?gl(n,u):c(f);e=(ye(n,u,o,cw(n,u)),!i&&n.cm&&n.cm.scrollIntoView({from:u.from,to:rr(u)}),[]);ur(n,function(n,t){t||-1!=tt(e,n.history)||(rb(n.history,u),e.push(n.history));ye(n,u,null,cw(n,u))})}(s),h)return h.v}}}function nb(t,i){if(0!=i&&(t.first+=i,t.sel=new st(so(t.sel.ranges,function(t){return new h(n(t.anchor.line+i,t.anchor.ch),n(t.head.line+i,t.head.ch))}),t.sel.primIndex),t.cm)){et(t.cm,t.first,t.first-i,i);for(var u=t.cm.display,r=u.viewFrom;r<u.viewTo;r++)nr(t.cm,r,"gutter")}}function ye(i,r,u,f){var e,nt,p,tt;if(i.cm&&!i.cm.curOp)return g(i.cm,ye)(i,r,u,f);if(r.to.line<i.first)nb(i,r.text.length-1-(r.to.line-r.from.line));else if(!(r.from.line>i.lastLine())){if(r.from.line<i.first&&(nb(i,e=r.text.length-1-(i.first-r.from.line)),r={from:n(i.first,0),to:n(r.to.line+e,r.to.ch),text:[c(r.text)],origin:r.origin}),e=i.lastLine(),(r=r.to.line>e?{from:r.from,to:n(e,t(i,e).text.length),text:[r.text[0]],origin:r.origin}:r).removed=lr(i,r.from,r.to),u=u||gl(i,r),i.cm){var e=i.cm,o=r,v=f,h=e.doc,w=e.display,s=o.from,b=o.to,it=!1,y=s.line,a=(e.options.lineWrapping||(y=l(gt(t(h,s.line))),h.iter(y,b.line+1,function(n){if(n==w.maxLine)return it=!0})),-1<h.sel.contains(o.from,o.to)&&ov(e),ta(h,o,v,op(e)),e.options.lineWrapping||(h.iter(y,s.line+o.text.length,function(n){var t=ko(n);t>w.maxLineLength&&(w.maxLine=n,w.maxLineLength=t,w.maxLineChanged=!0,it=!1)}),it&&(e.curOp.updateMaxLine=!0)),h),k=s.line;if(a.modeFrontier=Math.min(a.modeFrontier,k),!(a.highlightFrontier<k-10)){for(nt=a.first,p=k-1;nt<p;p--)if(tt=t(a,p).stateAfter,tt&&(!(tt instanceof vo)||p+tt.lookAhead<k)){nt=p+1;break}a.highlightFrontier=Math.min(a.highlightFrontier,nt)}he(e,400);v=o.text.length-(b.line-s.line)-1;o.full?et(e):s.line!=b.line||1!=o.text.length||uw(e.doc,o)?et(e,s.line,b.line+1,v):nr(e,s.line,"text");y=pt(e,"changes");((h=pt(e,"change"))||y)&&(v={from:s,to:b,text:o.text,removed:o.removed,origin:o.origin},h&&d(e,"change",e,v),y&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(v));e.display.selForContextMenu=null}else ta(i,r,f);ls(i,u,ui);i.cantEdit&&as(i,n(i.firstLine(),0))&&(i.cantEdit=!1)}}function du(n,t,i,r,u){var f;e(r=r||i,i)<0&&(i=(f=[r,i])[0],r=f[1]);"string"==typeof t&&(t=n.splitLines(t));ku(n,{from:i,to:r,text:t,origin:u})}function tb(n,t,i,r){i<n.line?n.line+=r:t<n.line&&(n.line=t,n.ch=0)}function ib(t,i,r,u){for(var f,c,s,h,e,o=0;o<t.length;++o)if(f=t[o],c=!0,f.ranges)for(f.copied||((f=t[o]=f.deepCopy()).copied=!0),s=0;s<f.ranges.length;s++)tb(f.ranges[s].anchor,i,r,u),tb(f.ranges[s].head,i,r,u);else{for(h=0;h<f.changes.length;++h)if(e=f.changes[h],r<e.from.line)e.from=n(e.from.line+u,e.from.ch),e.to=n(e.to.line+u,e.to.ch);else if(i<=e.to.line){c=!1;break}c||(t.splice(0,o+1),o=0)}}function rb(n,t){var i=t.from.line,r=t.to.line,t=t.text.length-(r-i)-1;ib(n.done,i,r,t);ib(n.undone,i,r,t)}function pe(n,i,r,u){var f=i,e=i;return"number"==typeof i?e=t(n,lv(n,i)):f=l(i),null==f?null:(u(e,f)&&n.cm&&nr(n.cm,f,r),e)}function we(n){this.lines=n;this.parent=null;for(var i=0,t=0;t<n.length;++t)n[t].parent=this,i+=n[t].height;this.height=i}function be(n){var t;this.children=n;for(var r=0,u=0,i=0;i<n.length;++i)t=n[i],r+=t.chunkSize(),u+=t.height,t.parent=this;this.size=r;this.height=u;this.parent=null}function ke(n,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=n;this.node=t}function ub(n,t,i){vi(t)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&vl(n,i)}function fr(n,t){this.lines=[];this.type=t;this.doc=n;this.id=++fa}function gu(n,t,i,r,u){var w,b,l,k,y,nt,tt,s,a,it,v,h,p;if(r&&r.shared)return a=n,w=t,b=i,k=u,(l=sr(l=r)).shared=!1,y=[gu(a,w,b,l,k)],nt=y[0],tt=l.widgetNode,ur(a,function(n){tt&&(l.widgetNode=tt.cloneNode(!0));y.push(gu(n,o(n,w),o(n,b),l,k));for(var t=0;t<n.linked.length;++t)if(n.linked[t].isParent)return;nt=c(y)}),new nf(y,nt);if(n.cm&&!n.cm.curOp)return g(n.cm,gu)(n,t,i,r,u);if(s=new fr(n,u),a=e(t,i),r&&sr(r,s,!1),0<a||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=uu("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(ry(n,t.line,t,i,s)||t.line!=i.line&&ry(n,i.line,t,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");ei=!0}if(s.addToHistory&&sw(n,{from:t,to:i,origin:"markText"},n.sel,NaN),v=t.line,h=n.cm,n.iter(v,i.line+1,function(r){var f,u;h&&s.collapsed&&!h.options.lineWrapping&&gt(r)==h.display.maxLine&&(it=!0);s.collapsed&&v!=t.line&&fi(r,0);r=r;f=new yo(s,v==t.line?t.ch:null,v==i.line?i.ch:null);(u=(u=n.cm&&n.cm.curOp)&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet)))&&r.markedSpans&&u.has(r.markedSpans)?r.markedSpans.push(f):(r.markedSpans=r.markedSpans?r.markedSpans.concat([f]):[f],u&&u.add(r.markedSpans));f.marker.attachLine(r);++v}),s.collapsed&&n.iter(t.line,i.line+1,function(t){gi(n,t)&&fi(t,0)}),s.clearOnEnter&&f(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(ac=!0,(n.history.done.length||n.history.undone.length)&&n.clearHistory()),s.collapsed&&(s.id=++fa,s.atomic=!0),h){if(it&&(h.curOp.updateMaxLine=!0),s.collapsed)et(h,t.line,i.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(p=t.line;p<=i.line;p++)nr(h,p,"text");s.atomic&&pw(h.doc);d(h,"markerAdded",h,s)}return s}function fb(t){return t.findMarks(n(t.first,0),t.clipPos(n(t.lastLine())),function(n){return n.parent})}function hd(n){for(var t=0;t<n.length;t++)!function(t){var i=n[t],f=[i.primary.doc],r,u;for(ur(i.primary.doc,function(n){return f.push(n)}),r=0;r<i.markers.length;r++)u=i.markers[r],-1==tt(f,u.doc)&&(u.parent=null,i.markers.splice(r--,1))}(t)}function ht(t,i,r,u,f){if(!(this instanceof ht))return new ht(t,i,r,u,f);null==r&&(r=0);be.call(this,[new we([new vr("",null)])]);this.first=r;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;r=n(this.modeFrontier=this.highlightFrontier=r,0);this.sel=ir(r);this.history=new ss(null);this.id=++eb;this.modeOption=i;this.lineSep=u;this.direction="rtl"==f?"rtl":"ltr";this.extend=!1;"string"==typeof t&&(t=this.splitLines(t));ta(this,{from:r,to:r,text:t});it(this,ir(r),ui)}function cd(n){var t=this,i,r,u,c,f;if((ob(t),!k(t,n)&&!yi(t.display,n))&&(ft(n),s&&(ea=+new Date),i=br(t,n,!0),r=n.dataTransfer.files,i&&!t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var l=r.length,a=Array(l),v=0,h=function(){++v==l&&g(t,function(){var n={from:i=o(t.doc,i),to:i,text:t.doc.splitLines(a.filter(function(n){return null!=n}).join(t.doc.lineSeparator())),origin:"paste"};ku(t.doc,n);vw(t.doc,ir(o(t.doc,i),o(t.doc,rr(n))))})()},e=0;e<r.length;e++)!function(n,i){var r;t.options.allowDropFileTypes&&-1==tt(t.options.allowDropFileTypes,n.type)?h():((r=new FileReader).onerror=function(){return h()},r.onload=function(){var n=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(n)||(a[i]=n);h()},r.readAsText(n))}(r[e],e);else{if(t.state.draggingText&&-1<t.doc.sel.contains(i))return t.state.draggingText(n),void setTimeout(function(){return t.display.input.focus()},20);try{if(c=n.dataTransfer.getData("Text"),c){if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),ls(t.doc,ir(i,i)),u)for(f=0;f<u.length;++f)du(t.doc,"",u[f].anchor,u[f].head,"drag");t.replaceSelection(c,"around","paste");t.display.input.focus()}}catch(n){}}}function ob(n){n.display.dragCursor&&(n.display.lineSpace.removeChild(n.display.dragCursor),n.display.dragCursor=null)}function sb(n){var r;if(document.getElementsByClassName){for(var u=document.getElementsByClassName("CodeMirror"),t=[],i=0;i<u.length;i++)r=u[i].CodeMirror,r&&t.push(r);t.length&&t[0].operation(function(){for(var i=0;i<t.length;i++)n(t[i])})}}function ld(){var n;oa||(f(window,"resize",function(){null==n&&(n=setTimeout(function(){n=null;sb(ad)},100))}),f(window,"blur",function(){return sb(vu)}),oa=!0)}function ad(n){var t=n.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null;t.scrollbarsClipped=!1;n.setSize()}function vd(n){var u,f,e,o,i=n.split(/-(?!$)/),r,t;for(n=i[i.length-1],r=0;r<i.length-1;r++)if(t=i[r],/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))u=!0;else if(/^(c|ctrl|control)$/i.test(t))f=!0;else{if(!/^s(hift)?$/i.test(t))throw new Error("Unrecognized modifier name: "+t);e=!0}return u&&(n="Alt-"+n),f&&(n="Ctrl-"+n),o&&(n="Cmd-"+n),n=e?"Shift-"+n:n}function yd(n){var t,e,f={},o,i,r;for(t in n)if(n.hasOwnProperty(t)&&(o=n[t],!/^(name|fallthrough|(de|at)tach)$/.test(t)))if("..."==o)delete n[t];else{for(i=so(t.split(" "),vd),r=0;r<i.length;r++){var s=void 0,u=void 0,s=r==i.length-1?(u=i.join(" "),o):(u=i.slice(0,r+1).join(" "),"..."),h=f[u];if(h){if(h!=s)throw new Error("Inconsistent bindings for "+u);}else f[u]=s}delete n[t]}for(e in f)n[e]=f[e];return n}function uf(n,t,i,r){var u=(t=ys(t)).call?t.call(n,r):t[n],f,e;if(!1===u)return"nothing";if("..."===u)return"multi";if(null!=u&&i(u))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return uf(n,t.fallthrough,i,r);for(f=0;f<t.fallthrough.length;f++)if(e=uf(n,t.fallthrough[f],i,r),e)return e}}function hb(n){return n="string"==typeof n?n:pi[n.keyCode],"Ctrl"==n||"Alt"==n||"Shift"==n||"Mod"==n}function cb(n,t,i){var r=n;return t.altKey&&"Alt"!=r&&(n="Alt-"+n),(ka?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(ka?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(n="Cmd-"+n),n=!i&&t.shiftKey&&"Shift"!=r?"Shift-"+n:n}function lb(n,t){if(bt&&34==n.keyCode&&n.char)return!1;var i=pi[n.keyCode];return null!=i&&!n.altGraphKey&&cb(i=3==n.keyCode&&n.code?n.code:i,n,t)}function ys(n){return"string"==typeof n?ci[n]:n}function ff(n,t){for(var r,f,o=n.doc.sel.ranges,i=[],u=0;u<o.length;u++){for(r=t(o[u]);i.length&&e(r.from,c(i).to)<=0;)if(f=i.pop(),e(f.from,r.from)<0){r.from=f.from;break}i.push(r)}ot(n,function(){for(var t=i.length-1;0<=t;t--)du(n.doc,"",i[t].from,i[t].to,"+delete");yu(n)})}function sa(n,t,i){return t=uv(n.text,t+i,i),t<0||t>n.text.length?null:t}function ha(t,i,r){return t=sa(t,i.ch,r),null==t?null:new n(i.line,t,r<0?"after":"before")}function ca(t,i,r,u,f){if(t){"rtl"==i.doc.direction&&(f=-f);var o,s,e,h,t=ai(r,i.doc.direction);if(t)return o=f<0==(1==(t=f<0?c(t):t[0]).level)?"after":"before",0<t.level||"rtl"==i.doc.direction?(s=cu(i,r),e=f<0?r.text.length-1:0,h=si(i,s,e).top,e=wf(function(n){return si(i,s,n).top==h},f<0==(1==t.level)?t.from:t.to-1,e),"before"==o&&(e=sa(r,e,1))):e=f<0?t.to:t.from,new n(u,e,o)}return new n(u,f<0?r.text.length:0,f<0?"before":"after")}function pd(t,i,r,u){function s(t,r){return sa(i,t instanceof n?t.ch:t,r)}function v(n){return t.options.lineWrapping?(a=a||cu(t,i),ep(t,i,a,n)):{begin:0,end:i.text.length}}function y(t,i,u){for(var c=function(t,i){return i?new n(r.line,s(t,1),"before"):new n(r.line,t,"after")};0<=t&&t<o.length;t+=i){var e=o[t],h=0<i==(1!=e.level),f=h?u.begin:s(u.end,-1);if(e.from<=f&&f<e.to||(f=h?e.from:s(e.to,-1),u.begin<=f&&f<u.end))return c(f,h)}}var o=ai(i,t.doc.direction),l,f,a,h,c,e;return o?(r.ch>=i.text.length?(r.ch=i.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after"),l=bf(o,r.ch,r.sticky),f=o[l],"ltr"==t.doc.direction&&f.level%2==0&&(0<u?f.to>r.ch:f.from<r.ch))?ha(i,r,u):(h=v("before"==r.sticky?s(r,-1):r.ch),("rtl"==t.doc.direction||1==f.level)&&(c=1==f.level==u<0,e=s(r,c?1:-1),null!=e&&(c?e<=f.to&&e<=h.end:e>=f.from&&e>=h.begin)))?new n(r.line,e,c?"before":"after"):(f=y(l+u,u,h),f)?f:(e=0<u?h.end:s(h.begin,-1),null==e||0<u&&e==i.text.length||!(f=y(0<u?0:o.length-1,u,v(e)))?null:f):ha(i,r,u)}function ab(n,i){var u=t(n.doc,i),r=gt(u);return ca(!0,n,r,i=r!=u?l(r):i,1)}function vb(i,r){var u=ab(i,r.line),f=t(i.doc,u.line),i=ai(f,i.doc.direction);return i&&0!=i[0].level?u:(i=Math.max(u.ch,f.text.search(/\S/)),f=r.line==u.line&&r.ch<=i&&r.ch,n(u.line,f?0:i,u.sticky))}function ps(n,t,i){if("string"==typeof t&&!(t=ef[t]))return!1;n.display.input.ensurePolled();var u=n.display.shift,r=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0);i&&(n.display.shift=!1);r=t(n)!=oo}finally{n.display.shift=u;n.state.suppressEdits=!1}return r}function ge(n,t,i,r){var u=n.state.keySeq;if(u){if(hb(t))return"handled";if(/\'$/.test(t)?n.state.keySeq=null:yb.set(50,function(){n.state.keySeq==u&&(n.state.keySeq=null,n.display.input.reset())}),pb(n,u+" "+t,i,r))return!0}return pb(n,t,i,r)}function pb(n,t,i,r){return r=function(n,t,i){for(var u,r=0;r<n.state.keyMaps.length;r++)if(u=uf(t,n.state.keyMaps[r],i,n),u)return u;return n.options.extraKeys&&uf(t,n.options.extraKeys,i,n)||uf(t,n.options.keyMap,i,n)}(n,t,r),"multi"==r&&(n.state.keySeq=t),"handled"==r&&d(n,"keyHandled",n,t,i),"handled"!=r&&"multi"!=r||(ft(i),hl(n)),!!r}function wb(n,t){var i=lb(t,!0);return!!i&&(t.shiftKey&&!n.state.keySeq?ge(n,"Shift-"+i,t,function(t){return ps(n,t,!0)})||ge(n,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ps(n,t)}):ge(n,i,t,function(t){return ps(n,t)}))}function bb(n){function u(n){18!=n.keyCode&&n.altKey||(er(e,"CodeMirror-crosshair"),lt(document,"keyup",u),lt(document,"mouseover",u))}var i,r,e,t=this;n.target&&n.target!=t.display.input.getField()||(t.curOp.focus=vt(kt(t)),k(t,n)||(s&&v<11&&27==n.keyCode&&(n.returnValue=!1),i=n.keyCode,t.display.shift=16==i||n.shiftKey,r=wb(t,n),bt&&(ws=r?i:null,!r&&88==i&&!kk&&(at?n.metaKey:n.ctrlKey)&&t.replaceSelection("",null,"cut")),li&&!at&&!r&&46==i&&n.shiftKey&&!n.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||(or(e=t.display.lineDiv,"CodeMirror-crosshair"),f(document,"keyup",u),f(document,"mouseover",u))))}function kb(n){16==n.keyCode&&(this.doc.sel.shift=!1);k(this,n)}function db(n){var t=this,u,i,r;if(!(n.target&&n.target!=t.display.input.getField()||yi(t.display,n)||k(t,n)||n.ctrlKey&&!n.altKey||at&&n.metaKey)){if(i=n.keyCode,r=n.charCode,bt&&i==ws)return ws=null,void ft(n);bt&&(!n.which||n.which<10)&&wb(t,n)||"\b"==(i=String.fromCharCode(null==r?i:r))||ge(u=t,"'"+i+"'",n,function(n){return ps(u,n,!0)})||t.display.input.onKeyPress(n)}}function la(n,t,i){this.time=n;this.pos=t;this.button=i}function gb(i){var l,p,y,r,u,w,b,nt,d,c=this,a=c.display;k(c,i)||a.activeTouch&&a.input.supportsTouch()||(a.input.ensurePolled(),a.shift=i.shiftKey,yi(a,i)?rt||(a.scroller.draggable=!1,setTimeout(function(){return a.scroller.draggable=!0},100)):aa(c,i)||(l=br(c,i),p=hv(i),y=l?(r=l,u=p,y=+new Date,to&&to.compare(y,r,u)?(no=to=null,"triple"):no&&no.compare(y,r,u)?(to=new la(y,r,u),no=null,"double"):(no=new la(y,r,u),to=null,"single")):"single",eo(c).focus(),1==p&&c.state.selectingText&&c.state.selectingText(i),l&&function(n,t,i,r,u){var f="Click";return"double"==r?f="Double"+f:"triple"==r&&(f="Triple"+f),ge(n,cb(f=(1==t?"Left":2==t?"Middle":"Right")+f,u),u,function(t){if(!(t="string"==typeof t?ef[t]:t))return!1;var r=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0);r=t(n,i)!=oo}finally{n.state.suppressEdits=!1}return r})}(c,p,l,y,i)||(1==p?l?(r=c,u=l,w=y,b=i,s?setTimeout(fh(cp,r),0):r.curOp.focus=vt(kt(r)),nt=function(n,t,i){var r=n.getOption("configureMouse"),r=r?r(n,t,i):{},u;return null==r.unit&&(u=pk?i.shiftKey&&i.metaKey:i.altKey,r.unit=u?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==r.extend||n.doc.extend)&&(r.extend=n.doc.extend||i.shiftKey),null==r.addNew&&(r.addNew=at?i.metaKey:i.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(at?i.altKey:i.ctrlKey)),r}(r,w,b),d=r.doc.sel,(r.options.dragDrop&&wk&&!r.isReadOnly()&&"single"==w&&-1<(w=d.contains(u))&&(e((w=d.ranges[w]).from(),u)<0||0<u.xRel)&&(0<e(w.to(),u)||u.xRel<0)?function(n,t,i,r){var u=n.display,o=!1,e=g(n,function(t){rt&&(u.scroller.draggable=!1);n.state.draggingText=!1;n.state.delayingBlurEvent&&(n.hasFocus()?n.state.delayingBlurEvent=!1:cl(n));lt(u.wrapper.ownerDocument,"mouseup",e);lt(u.wrapper.ownerDocument,"mousemove",h);lt(u.scroller,"dragstart",c);lt(u.scroller,"drop",e);o||(ft(t),r.addNew||cs(n.doc,i,null,null,r.extend),rt&&!uo||s&&9==v?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0});u.input.focus()},20):u.input.focus())}),h=function(n){o=o||10<=Math.abs(t.clientX-n.clientX)+Math.abs(t.clientY-n.clientY)},c=function(){return o=!0};rt&&(u.scroller.draggable=!0);(n.state.draggingText=e).copy=!r.moveOnDrag;f(u.wrapper.ownerDocument,"mouseup",e);f(u.wrapper.ownerDocument,"mousemove",h);f(u.scroller,"dragstart",c);f(u.scroller,"drop",e);n.state.delayingBlurEvent=!0;setTimeout(function(){return u.input.focus()},20);u.scroller.dragDrop&&u.scroller.dragDrop()}:function(i,r,u,c){function ut(r){var g,b;if(0!=e(k,r))if(k=r,"rectangle"==c.unit){for(var p=[],d=i.options.tabSize,f=yt(t(l,u.line).text,u.ch,d),s=yt(t(l,r.line).text,r.ch,d),tt=Math.min(f,s),rt=Math.max(f,s),v=Math.min(u.line,r.line),ut=Math.min(i.lastLine(),Math.max(u.line,r.line));v<=ut;v++)g=t(l,v).text,b=oh(g,tt,d),tt==rt?p.push(new h(n(v,b),n(v,b))):g.length>b&&p.push(new h(n(v,b),n(v,oh(g,rt,d))));p.length||p.push(new h(u,u));it(l,ti(i,w.ranges.slice(0,a).concat(p),a),{origin:"*mouse",scroll:!1});i.scrollIntoView(r)}else{var nt,f=y,s=nk(i,r,c.unit),r=f.anchor,r=0<e(s.anchor,r)?(nt=s.head,ao(f.from(),s.anchor)):(nt=s.anchor,lo(f.to(),s.head)),f=w.ranges.slice(0);f[a]=function(i,r){var u=r.anchor,l=r.head,f=t(i.doc,u.line),o,s,c;return 0==e(u,l)&&u.sticky==l.sticky?r:(f=ai(f),!f)?r:(o=bf(f,u.ch,u.sticky),s=f[o],s.from!=u.ch&&s.to!=u.ch)?r:(c=o+(s.from==u.ch==(1!=s.level)?0:1),0==c||c==f.length)?r:(s=l.line!=u.line?0<(l.line-u.line)*("ltr"==i.doc.direction?1:-1):(i=bf(f,l.ch,l.sticky),o=i-o||(l.ch-u.ch)*(1==s.level?-1:1),i==c-1||i==c?o<0:0<o),i=f[c+(s?-1:0)],o=s==(1==i.level),f=o?i.from:i.to,c=o?"after":"before",u.ch==f&&u.sticky==c?r:new h(new n(u.line,f,c),l))}(i,new h(o(l,r),nt));it(l,ti(i,f,a),eh)}}function rt(n){i.state.selectingText=!1;b=1/0;n&&(ft(n),v.input.focus());lt(v.wrapper.ownerDocument,"mousemove",tt);lt(v.wrapper.ownerDocument,"mouseup",d);l.history.lastSelOrigin=null}var v,l,y,a,w,p,k,nt,b,tt,d;s&&cl(i);v=i.display;l=i.doc;ft(r);w=l.sel;p=w.ranges;c.addNew&&!c.extend?(a=l.sel.contains(u),y=-1<a?p[a]:new h(u,u)):(y=l.sel.primary(),a=l.sel.primIndex);"rectangle"==c.unit?(c.addNew||(y=new h(u,u)),u=br(i,r,!0,!0),a=-1):(r=nk(i,u,c.unit),y=c.extend?ra(y,r.anchor,r.head,c.extend):r);c.addNew?-1==a?(a=p.length,it(l,ti(i,p.concat([y]),a),{scroll:!1,origin:"*mouse"})):1<p.length&&p[a].empty()&&"char"==c.unit&&!c.extend?(it(l,ti(i,p.slice(0,a).concat(p.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),w=l.sel):ua(l,a,y,eh):(it(l,new st([y],a=0),eh),w=l.sel);k=u;nt=v.wrapper.getBoundingClientRect();b=0;tt=g(i,function(n){(0!==n.buttons&&hv(n)?function n(t){var u,f,o=++b,r=br(i,t,!0,"rectangle"==c.unit);r&&(0!=e(r,k)?(i.curOp.focus=vt(kt(i)),ut(r),u=es(v,l),(r.line>=u.to||r.line<u.from)&&setTimeout(g(i,function(){b==o&&n(t)}),150)):(f=t.clientY<nt.top?-20:t.clientY>nt.bottom?20:0)&&setTimeout(g(i,function(){b==o&&(v.scroller.scrollTop+=f,n(t))}),50))}:rt)(n)});d=g(i,rt);i.state.selectingText=d;f(v.wrapper.ownerDocument,"mousemove",tt);f(v.wrapper.ownerDocument,"mouseup",d)})(r,b,u,nt)):kh(i)==a.scroller&&ft(i):2==p?(l&&cs(c.doc,l),setTimeout(function(){return a.input.focus()},20)):3==p&&(rh?c.display.input.onContextMenu(i):cl(c)))))}function nk(t,i,r){return"char"==r?new h(i,i):"word"==r?t.findWordAt(i):"line"==r?new h(n(i.line,0),o(t.doc,n(i.line+1,0))):(r=r(t,i),new h(r.from,r.to))}function tk(n,t,i,r){var e,u,o,r,f,s;if(t.touches)e=t.touches[0].clientX,u=t.touches[0].clientY;else try{e=t.clientX;u=t.clientY}catch(n){return!1}if(e>=Math.floor(n.display.gutters.getBoundingClientRect().right))return!1;if(r&&ft(t),o=n.display,r=o.lineDiv.getBoundingClientRect(),u>r.bottom||!pt(n,i))return bh(t);for(u-=r.top-o.viewOffset,f=0;f<n.display.gutterSpecs.length;++f)if(s=o.gutters.childNodes[f],s&&s.getBoundingClientRect().right>=e)return b(n,i,n,ar(n.doc,u),n.display.gutterSpecs[f].className,t),bh(t)}function aa(n,t){return tk(n,t,"gutterClick",!0)}function ik(n,t){var i,r;yi(n.display,t)||(r=t,pt(i=n,"gutterContextMenu")&&tk(i,r,"gutterContextMenu",!1))||k(n,t,"contextmenu")||rh||n.display.input.onContextMenu(t)}function rk(n){n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+n.options.theme.replace(/(^|\s)\s*/g," cm-s-");re(n)}function wd(n,t,i){!t!=!(i&&i!=of)&&(i=n.display.dragFunctions,(t=t?f:lt)(n.display.scroller,"dragstart",i.start),t(n.display.scroller,"dragenter",i.enter),t(n.display.scroller,"dragover",i.over),t(n.display.scroller,"dragleave",i.leave),t(n.display.scroller,"drop",i.drop))}function bd(n){n.options.lineWrapping?(or(n.display.wrapper,"CodeMirror-wrap"),n.display.sizer.style.minWidth="",n.display.sizerWidth=null):(er(n.display.wrapper,"CodeMirror-wrap"),wc(n));ol(n);et(n);re(n);setTimeout(function(){return pu(n)},100)}function y(t,i){function tt(){e.activeTouch&&(nt=setTimeout(function(){return e.activeTouch=null},1e3),(w=e.activeTouch).end=+new Date)}function it(n,t){if(null==t.left)return 1;var i=t.left-n.left,t=t.top-n.top;return 400<i*i+t*t}var a=this,nt,w,d;if(!(this instanceof y))return new y(t,i);this.options=i=i?sr(i):{};sr(uk,i,!1);var p,c=i.value,l=("string"==typeof c?c=new ht(c,i.mode,null,i.lineSeparator,i.direction):i.mode&&(c.modeOption=i.mode),this.doc=c,new y.inputStyles[i.inputStyle](this)),t=this.display=new fd(t,c,l,i),r=(rk(t.wrapper.CodeMirror=this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),pp(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new di,keySeq:null,specialChars:null},i.autofocus&&!lf&&t.input.focus(),s&&v<11&&setTimeout(function(){return a.display.input.reset(!0)},20),this),e=r.display;f(e.scroller,"mousedown",g(r,gb));f(e.scroller,"dblclick",s&&v<11?g(r,function(n){var t;k(r,n)||!(t=br(r,n))||aa(r,n)||yi(r.display,n)||(ft(n),n=r.findWordAt(t),cs(r.doc,n.anchor,n.head))}):function(n){return k(r,n)||ft(n)});f(e.scroller,"contextmenu",function(n){return ik(r,n)});f(e.input.getField(),"contextmenu",function(n){e.scroller.contains(n.target)||ik(r,n)});w={end:0};f(e.scroller,"touchstart",function(n){var t;k(r,n)||function(n){if(1==n.touches.length)return(n=n.touches[0]).radiusX<=1&&n.radiusY<=1}(n)||aa(r,n)||(e.input.ensurePolled(),clearTimeout(nt),t=+new Date,e.activeTouch={start:t,moved:!1,prev:t-w.end<=300?w:null},1==n.touches.length&&(e.activeTouch.left=n.touches[0].pageX,e.activeTouch.top=n.touches[0].pageY))});f(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)});f(e.scroller,"touchend",function(t){var u,i=e.activeTouch;i&&!yi(e,t)&&null!=i.left&&!i.moved&&new Date-i.start<300&&(u=r.coordsChar(e.activeTouch,"page"),i=!i.prev||it(i,i.prev)?new h(u,u):!i.prev.prev||it(i,i.prev.prev)?r.findWordAt(u):new h(n(u.line,0),o(r.doc,n(u.line+1,0))),r.setSelection(i.anchor,i.head),r.focus(),ft(t));tt()});f(e.scroller,"touchcancel",tt);f(e.scroller,"scroll",function(){e.scroller.clientHeight&&(ee(r,e.scroller.scrollTop),dr(r,e.scroller.scrollLeft,!0),b(r,"scroll",r))});f(e.scroller,"mousewheel",function(n){return tw(r,n)});f(e.scroller,"DOMMouseScroll",function(n){return tw(r,n)});f(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0});e.dragFunctions={enter:function(n){k(r,n)||kf(n)},over:function(n){var t,i;k(r,n)||((i=br(t=r,i=n))&&(sl(t,i,i=document.createDocumentFragment()),t.display.dragCursor||(t.display.dragCursor=u("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),ct(t.display.dragCursor,i)),kf(n))},start:function(n){var i,t;i=r;n=n;s&&(!i.state.draggingText||+new Date-ea<100)?kf(n):k(i,n)||yi(i.display,n)||(n.dataTransfer.setData("Text",i.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!uo&&((t=u("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",bt&&(t.width=t.height=1,i.display.wrapper.appendChild(t),t._top=t.offsetTop),n.dataTransfer.setDragImage(t,0,0),bt&&t.parentNode.removeChild(t)))},drop:g(r,cd),leave:function(n){k(r,n)||ob(r)}};l=e.input.getField();for(p in f(l,"keyup",function(n){return kb.call(r,n)}),f(l,"keydown",g(r,bb)),f(l,"keypress",g(r,db)),f(l,"focus",function(n){return ll(r,n)}),f(l,"blur",function(n){return vu(r,n)}),ld(),nu(this),this.curOp.forceUpdate=!0,fw(this,c),i.autofocus&&!lf||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&ll(a)},20):vu(this),bs)bs.hasOwnProperty(p)&&bs[p](this,i[p],of);for(dp(this),i.finishInit&&i.finishInit(this),d=0;d<ks.length;++d)ks[d](this);tu(this);rt&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(t.lineDiv).textRendering&&(t.lineDiv.style.textRendering="auto")}function io(i,r,u,f){var k,o=i.doc,v=("smart"==(u=null==u?"add":u)&&(o.mode.indent?k=gf(i,r).state:u="prev"),i.options.tabSize),s=t(o,r),p=yt(s.text,null,v),l=(s.stateAfter&&(s.stateAfter=null),s.text.match(/^\s*/)[0]),b,a,c;if(f||/\S/.test(s.text)){if("smart"==u&&((e=o.mode.indent(k,s.text.slice(l.length),s.text))==oo||150<e)){if(!f)return;u="prev"}}else e=0,u="not";"prev"==u?e=r>o.first?yt(t(o,r-1).text,null,v):0:"add"==u?e=p+i.options.indentUnit:"subtract"==u?e=p-i.options.indentUnit:"number"==typeof u&&(e=p+u);var e=Math.max(0,e),y="",w=0;if(i.options.indentWithTabs)for(b=Math.floor(e/v);b;--b)w+=v,y+="\t";if(w<e&&(y+=sh(e-w)),y!=l)return du(o,y,n(r,0),n(r,l.length),"+input"),!(s.stateAfter=null);for(a=0;a<o.sel.ranges.length;a++)if(c=o.sel.ranges[a],c.head.line==r&&c.head.ch<l.length){c=n(r,l.length);ua(o,a,new h(c,c));break}}function ds(n){wt=n}function va(i,r,u,f,e){var w=i.doc,b=(i.display.shift=!1,f=f||w.sel,+new Date-200),l="paste"==e||i.state.pasteIncoming>b,a=nc(r),o=null,p,k,v;if(l&&1<f.ranges.length)if(wt&&wt.text.join("\n")==r){if(f.ranges.length%wt.text.length==0)for(o=[],p=0;p<wt.text.length;p++)o.push(w.splitLines(wt.text[p]))}else a.length==f.ranges.length&&i.options.pasteLinesPerSelection&&(o=so(a,function(n){return[n]}));for(k=i.curOp.updateInput,v=f.ranges.length-1;0<=v;v--){var y=f.ranges[v],s=y.from(),h=y.to(),y=(y.empty()&&(u&&0<u?s=n(s.line,s.ch-u):i.state.overwrite&&!l?h=n(h.line,Math.min(t(w,h.line).text.length,h.ch+c(a).length)):l&&wt&&wt.lineWise&&wt.text.join("\n")==a.join("\n")&&(s=h=n(s.line,0))),{from:s,to:h,text:o?o[v%o.length]:a,origin:e||(l?"paste":i.state.cutIncoming>b?"cut":"+input")});ku(i.doc,y);d(i,"inputRead",i,y)}r&&!l&&ek(i,r);yu(i);i.curOp.updateInput<2&&(i.curOp.updateInput=k);i.curOp.typing=!0;i.state.pasteIncoming=i.state.cutIncoming=-1}function fk(n,t){var i=n.clipboardData&&n.clipboardData.getData("Text");return i&&(n.preventDefault(),t.isReadOnly()||t.options.disableInput||!t.hasFocus()||ot(t,function(){return va(t,i,0,null,"paste")}),1)}function ek(n,i){var e,u,r,f,o,s;if(n.options.electricChars&&n.options.smartIndent)for(e=n.doc.sel,u=e.ranges.length-1;0<=u;u--)if(r=e.ranges[u],!(100<r.head.ch||u&&e.ranges[u-1].head.line==r.head.line)){if(f=n.getModeAt(r.head),o=!1,f.electricChars){for(s=0;s<f.electricChars.length;s++)if(-1<i.indexOf(f.electricChars.charAt(s))){o=io(n,r.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(t(n.doc,r.head.line).text.slice(0,r.head.ch))&&(o=io(n,r.head.line,"smart"));o&&d(n,"electricInput",n,r.head.line)}}function ok(t){for(var i,u=[],f=[],r=0;r<t.doc.sel.ranges.length;r++)i=t.doc.sel.ranges[r].head.line,i={anchor:n(i,0),head:n(i+1,0)},f.push(i),u.push(t.getRange(i.anchor,i.head));return{text:u,ranges:f}}function ya(n,t,i,r){n.setAttribute("autocorrect",i?"on":"off");n.setAttribute("autocapitalize",r?"on":"off");n.setAttribute("spellcheck",!!t)}function sk(){var n=u("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=u("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return rt?n.style.width="1000px":n.setAttribute("wrap","off"),cf&&(n.style.border="1px solid black"),t}function pa(i,r,u,f,e){function c(o){var h;if(null==(h="codepoint"==f?(h=s.text.charCodeAt(r.ch+(0<u?0:-1)),isNaN(h)?null:(h=0<u?55296<=h&&h<56320:56320<=h&&h<57343,new n(r.line,Math.max(0,Math.min(s.text.length,r.ch+u*(h?2:1))),-u))):e?pd(i.cm,s,r,u):ha(s,r,u))){if(o||(o=r.line+p)<i.first||o>=i.first+i.size||(r=new n(o,r.ch,r.sticky),!(s=t(i,o))))return;r=ca(e,i.cm,s,r.line,p)}else r=h;return 1}var y=r,h=u,s=t(i,r.line),p=e&&"rtl"==i.direction?-u:u,o;if("char"==f||"codepoint"==f)c();else if("column"==f)c(!0);else if("word"==f||"group"==f)for(var a=null,v="group"==f,w=i.cm&&i.cm.getHelper(r,"wordChars"),l=!0;!(u<0)||c(!l);l=!1){if(o=s.text.charAt(r.ch)||"\n",o=ho(o,w)?"w":v&&"\n"==o?"n":!v||/\s/.test(o)?null:"p",!v||l||o||(o="s"),a&&a!=o){u<0&&(u=1,c(),r.sticky="after");break}if(o&&(a=o),0<u&&!c(!l))break}return h=as(i,r,y,h,!0),oc(y,h)&&(h.hitSide=!0),h}function hk(n,t,i,r){var f,u,e,o=n.doc,s=t.left;for("page"==r?(f=Math.min(n.display.wrapper.clientHeight,eo(n).innerHeight||o(n).documentElement.clientHeight),f=Math.max(f-.5*lu(n.display),3),u=(0<i?t.bottom:t.top)+i*f):"line"==r&&(u=0<i?t.bottom+3:t.top-3);(e=rl(n,s,u)).outside;){if(i<0?u<=0:u>=o.height){e.hitSide=!0;break}u+=5*i}return e}function a(n){this.cm=n;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new di;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null}function ck(n,i){var u=gc(n,i.line);if(!u||u.hidden)return null;var r=t(n.doc,i.line),u=by(u,r,i.line),r=ai(r,n.doc.direction),n="left",r=(r&&(n=bf(r,i.ch)%2?"right":"left"),dy(u.map,i.ch,n));return r.offset="right"==r.collapse?r.end:r.start,r}function sf(n,t){return t&&(n.bad=!0),n}function gs(t,i,r){var f,w,u,e,a,d,k,o,v,g,y,nt;if(i==t.display.lineDiv){if(!(f=t.display.lineDiv.childNodes[r]))return sf(t.clipPos(n(t.display.viewTo-1)),!0);i=null;r=0}else for(f=i;;f=f.parentNode){if(!f||f==t.display.lineDiv)return null;if(f.parentNode&&f.parentNode==t.display.lineDiv)break}for(w=0;w<t.display.view.length;w++)if(u=t.display.view[w],u.node==f){var s=u,u=i,h=r,b=s.text.firstChild,p=!1;if(!u||!ki(b,u))return sf(n(l(s.line),0),!0);if(u==b&&(p=!0,u=b.childNodes[h],h=0,!u))return sf(n(l(e=s.rest?c(s.rest):s.line),e.text.length),p);for(e=3==u.nodeType?u:null,a=u,e||1!=u.childNodes.length||3!=u.firstChild.nodeType||(e=u.firstChild,h=h&&e.nodeValue.length);a.parentNode!=b;)a=a.parentNode;d=s.measure;k=d.maps;function t(t,i,r){for(var e,f,c,h,o,u=-1;u<(k?k.length:0);u++)for(e=u<0?d.map:k[u],f=0;f<e.length;f+=3)if(o=e[f+2],o==t||o==i)return c=l(u<0?s.line:s.rest[u]),h=e[f]+r,n(c,h=r<0||o!=t?e[f+(r?1:0)]:h)}if(o=t(e,a,h),o)return sf(o,p);for(v=a.nextSibling,g=e?e.nodeValue.length-h:0;v;v=v.nextSibling){if(o=t(v,v.firstChild,0))return sf(n(o.line,o.ch-g),p);g+=v.textContent.length}for(y=a.previousSibling,nt=h;y;y=y.previousSibling){if(o=t(y,y.firstChild,-1))return sf(n(o.line,o.ch+nt),p);nt+=y.textContent.length}return}}function w(n){this.cm=n;this.prevInput="";this.pollingFast=!1;this.polling=new di;this.hasSelection=!1;this.composing=null;this.resetting=!1}function i(n,t,i,r){nh.defaults[n]=t;i&&(lk[n]=r?function(n,t,r){r!=of&&i(n,t,r)}:i)}var r=navigator.userAgent,hf=navigator.platform,li=/gecko\/\d/i.test(r),th=/MSIE \d/.test(r),ih=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),ri=/Edge\/(\d+)/.exec(r),s=th||ih||ri,v=s&&(th?document.documentMode||6:+(ri||ih)[1]),rt=!ri&&/WebKit\//.test(r),th=rt&&/Qt\/\d+\.\d+/.test(r),wi=!ri&&/Chrome\/(\d+)/.exec(r),ba=wi&&+wi[1],bt=/Opera\//.test(r),uo=/Apple Computer/.test(navigator.vendor),vk=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),yk=/PhantomJS/.test(r),cf=uo&&(/Mobile\/\w+/.test(r)||2<navigator.maxTouchPoints),fo=/Android/.test(r),lf=cf||fo||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),at=cf||/Mac/.test(hf),pk=/\bCrOS\b/.test(r),ih=/win/i.test(hf),ri=bt&&r.match(/Version\/(\d*\.\d*)/),ka=((ri=ri&&Number(ri[1]))&&15<=ri&&(rt=!(bt=!1)),at&&(th||bt&&(null==ri||ri<12.11))),rh=li||s&&9<=v,er=function(n,t){var i,r=n.className,t=ru(t).exec(r);t&&(i=r.slice(t.index+t[0].length),n.className=r.slice(0,t.index)+(i?t[1]+i:""))},af=document.createRange?function(n,t,i,r){var u=document.createRange();return u.setEnd(r||n,i),u.setStart(n,t),u}:function(n,t,i){var r=document.body.createTextRange();try{r.moveToElementText(n.parentNode)}catch(n){return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r},vf=function(n){n.select()},pf,tv,rv,fu,fv,lh,ah,vh,yh,ev,ph,f,hr,p,dt,lc,ac,ei,vr,fy,ey,yr,hu,wr,nl,yl,wp,ce,ae,hi,st,h,fa,nf,eb,ea,oa,pi,tf,de,rf,ci,ef,yb,ws,no,to,ks,wt,nh,lk,ii,wa,iu,ro,ak;cf?vf=function(n){n.selectionStart=0;n.selectionEnd=n.value.length}:s&&(vf=function(n){try{n.select()}catch(n){}});di.prototype.onTimeout=function(n){n.id=0;n.time<=+new Date?n.f():setTimeout(n.handler,n.time-+new Date)};var da=50,oo={toString:function(){return"CodeMirror.Pass"}},ui={scroll:!(di.prototype.set=function(n,t){this.f=t;t=+new Date+n;(!this.id||t<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,n),this.time=t)})},eh={origin:"*mouse"},yf={origin:"+move"};pf=[""];tv=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;rv=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;fu=null;fv=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;lh=/[stwN]/;ah=/[LRr]/;vh=/[Lb1n]/;yh=/[1n]/;ev=function(n,t){var p="ltr"==t?"L":"R",d,et,ot,w,st,tt,v,y,it,s,ht,h,at,rt,g,ct,ut,l,a,b,f,r,yt,e,wt;if(0==n.length||"ltr"==t&&!fv.test(n))return!1;for(var o,u=n.length,i=[],ft=0;ft<u;++ft)i.push((o=n.charCodeAt(ft))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(o):1424<=o&&o<=1524?"R":1536<=o&&o<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(o-1536):1774<=o&&o<=2220?"r":8192<=o&&o<=8203?"w":8204==o?"b":"L");for(d=0,et=p;d<u;++d)ot=i[d],"m"==ot?i[d]=et:et=ot;for(w=0,st=p;w<u;++w)tt=i[w],"1"==tt&&"r"==st?i[w]="n":ah.test(tt)&&"r"==(st=tt)&&(i[w]="R");for(v=1,y=i[0];v<u-1;++v)it=i[v],"+"==it&&"1"==y&&"1"==i[v+1]?i[v]="1":","!=it||y!=i[v+1]||"1"!=y&&"n"!=y||(i[v]=y),y=it;for(s=0;s<u;++s)if(ht=i[s],","==ht)i[s]="N";else if("%"==ht){for(h=void 0,h=s+1;h<u&&"%"==i[h];++h);for(at=s&&"!"==i[s-1]||h<u&&"1"==i[h]?"1":"N",rt=s;rt<h;++rt)i[rt]=at;s=h-1}for(g=0,ct=p;g<u;++g)ut=i[g],"L"==ct&&"1"==ut?i[g]="L":ah.test(ut)&&(ct=ut);for(l=0;l<u;++l)if(lh.test(i[l])){for(a=void 0,a=l+1;a<u&&lh.test(i[a]);++a);for(var vt="L"==(l?i[l-1]:p),bt=vt==("L"==(a<u?i[a]:p))?vt?"L":"R":p,lt=l;lt<a;++lt)i[lt]=bt;l=a-1}for(f=[],r=0;r<u;)if(vh.test(i[r])){for(yt=r,++r;r<u&&vh.test(i[r]);++r);f.push(new eu(0,yt,r))}else{var k=r,nt=f.length,pt="rtl"==t?1:0;for(++r;r<u&&"L"!=i[r];++r);for(e=k;e<r;)if(yh.test(i[e])){for(k<e&&(f.splice(nt,0,new eu(1,k,e)),nt+=pt),wt=e,++e;e<r&&yh.test(i[e]);++e);f.splice(nt,0,new eu(2,wt,e));nt+=pt;k=e}else++e;k<r&&f.splice(nt,0,new eu(1,k,r))}return"ltr"==t&&(1==f[0].level&&(b=n.match(/^\s+/))&&(f[0].from=b[0].length,f.unshift(new eu(0,0,b[0].length))),1==c(f).level&&(b=n.match(/\s+$/))&&(c(f).to-=b[0].length,f.push(new eu(0,u-b[0].length,u)))),"rtl"==t?f.reverse():f};ph=[];f=function(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):(n=n._handlers||(n._handlers={}))[t]=(n[t]||ph).concat(i)};var dh,gh,wk=function(){if(s&&v<9)return!1;var n=u("div");return"draggable"in n||"dragDrop"in n}(),nc=3!="\n\nb".split(/\n/).length?function(n){for(var i=0,r=[],e=n.length;i<=e;){var t=n.indexOf("\n",i),u=(-1==t&&(t=n.length),n.slice(i,"\r"==n.charAt(t-1)?t-1:t)),f=u.indexOf("\r");-1!=f?(r.push(u.slice(0,f)),i+=f+1):(r.push(u),i=t+1)}return r}:function(n){return n.split(/\r\n?|\n/)},bk=window.getSelection?function(n){try{return n.selectionStart!=n.selectionEnd}catch(n){return!1}}:function(n){var t;try{t=n.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=n)&&0!=t.compareEndPoints("StartToEnd",t)},kk="oncopy"in(hf=u("div"))||(hf.setAttribute("oncopy","return;"),"function"==typeof hf.oncopy),tc=null,ic={},su={};for(hr={},p=function(n,t,i){this.pos=this.start=0;this.string=n;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=i},p.prototype.eol=function(){return this.pos>=this.string.length},p.prototype.sol=function(){return this.pos==this.lineStart},p.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},p.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},p.prototype.eat=function(n){var t=this.string.charAt(this.pos),n="string"==typeof n?t==n:t&&(n.test?n.test(t):n(t));if(n)return++this.pos,t},p.prototype.eatWhile=function(n){for(var t=this.pos;this.eat(n););return this.pos>t},p.prototype.eatSpace=function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},p.prototype.skipToEnd=function(){this.pos=this.string.length},p.prototype.skipTo=function(n){return n=this.string.indexOf(n,this.pos),-1<n?(this.pos=n,!0):void 0},p.prototype.backUp=function(n){this.pos-=n},p.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?yt(this.string,this.lineStart,this.tabSize):0)},p.prototype.indentation=function(){return yt(this.string,null,this.tabSize)-(this.lineStart?yt(this.string,this.lineStart,this.tabSize):0)},p.prototype.match=function(n,t,i){function u(n){return i?n.toLowerCase():n}var r;return"string"!=typeof n?(r=this.string.slice(this.pos).match(n))&&0<r.index?null:(r&&!1!==t&&(this.pos+=r[0].length),r):u(this.string.substr(this.pos,n.length))==u(n)?(!1!==t&&(this.pos+=n.length),!0):void 0},p.prototype.current=function(){return this.string.slice(this.start,this.pos)},p.prototype.hideFirstChars=function(n,t){this.lineStart+=n;try{return t()}finally{this.lineStart-=n}},p.prototype.lookAhead=function(n){var t=this.lineOracle;return t&&t.lookAhead(n)},p.prototype.baseToken=function(){var n=this.lineOracle;return n&&n.baseToken(this.pos)},dt=function(n,t,i,r){this.state=t;this.doc=n;this.line=i;this.maxLookAhead=r||0;this.baseTokens=null;this.baseTokenPos=1},dt.prototype.lookAhead=function(n){var t=this.doc.getLine(this.line+n);return null!=t&&n>this.maxLookAhead&&(this.maxLookAhead=n),t},dt.prototype.baseToken=function(n){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=n;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-n}},dt.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--},dt.fromSaved=function(n,t,i){return t instanceof vo?new dt(n,cr(n.mode,t.state),i,t.lookAhead):new dt(n,cr(n.mode,t),i)},dt.prototype.save=function(n){return n=!1!==n?cr(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new vo(n,this.maxLookAhead):n},lc=function(n,t,i){this.start=n.start;this.end=n.pos;this.string=n.current();this.type=t||null;this.state=i},ac=!1,ei=!1,vr=function(n,t,i){this.text=n;ny(this,t);this.height=i?i(this):1},vr.prototype.lineNo=function(){return l(this)},ou(vr),fy={},ey={},yr=null,hu=null,nl={left:0,right:0,top:0,bottom:0},gr.prototype.update=function(n){var i,r=n.scrollWidth>n.clientWidth+1,u=n.scrollHeight>n.clientHeight+1,t=n.nativeBarWidth;return u?(this.vert.style.display="block",this.vert.style.bottom=r?t+"px":"0",i=n.viewHeight-(r?t:0),this.vert.firstChild.style.height=Math.max(0,n.scrollHeight-n.clientHeight+i)+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),r?(this.horiz.style.display="block",this.horiz.style.right=u?t+"px":"0",this.horiz.style.left=n.barLeft+"px",i=n.viewWidth-n.barLeft-(u?t:0),this.horiz.firstChild.style.width=Math.max(0,n.scrollWidth-n.clientWidth+i)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<n.clientHeight&&(0==t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?t:0,bottom:r?t:0}},gr.prototype.setScrollLeft=function(n){this.horiz.scrollLeft!=n&&(this.horiz.scrollLeft=n);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},gr.prototype.setScrollTop=function(n){this.vert.scrollTop!=n&&(this.vert.scrollTop=n);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},gr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=at&&!vk?"12px":"18px";this.horiz.style.visibility=this.vert.style.visibility="hidden";this.disableHoriz=new di;this.disableVert=new di},gr.prototype.enableZeroWidthBar=function(n,t,i){n.style.visibility="";t.set(1e3,function r(){var u=n.getBoundingClientRect();("vert"==i?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1))!=n?n.style.visibility="hidden":t.set(1e3,r)})},gr.prototype.clear=function(){var n=this.horiz.parentNode;n.removeChild(this.horiz);n.removeChild(this.vert)},se.prototype.update=function(){return{bottom:0,right:0}},se.prototype.setScrollLeft=function(){},se.prototype.setScrollTop=function(){},se.prototype.clear=function(){},yl={"native":gr,"null":se},wp=0,ce=function(n,t,i){var r=n.display;this.viewport=t;this.visible=es(r,n.doc,t);this.editorIsHidden=!r.wrapper.offsetWidth;this.wrapperHeight=r.wrapper.clientHeight;this.wrapperWidth=r.wrapper.clientWidth;this.oldDisplayWidth=pr(n);this.force=i;this.dims=fl(n);this.events=[]},ce.prototype.signal=function(n,t){pt(n,t)&&this.events.push(arguments)},ce.prototype.finish=function(){for(var n=0;n<this.events.length;n++)b.apply(null,this.events[n])},ae=0,hi=null,s?hi=-.53:li?hi=15:wi?hi=-.7:uo&&(hi=-1/3),st=function(n,t){this.ranges=n;this.primIndex=t},h=(st.prototype.primary=function(){return this.ranges[this.primIndex]},st.prototype.equals=function(n){var t,i,r;if(n==this)return!0;if(n.primIndex!=this.primIndex||n.ranges.length!=this.ranges.length)return!1;for(t=0;t<this.ranges.length;t++)if(i=this.ranges[t],r=n.ranges[t],!oc(i.anchor,r.anchor)||!oc(i.head,r.head))return!1;return!0},st.prototype.deepCopy=function(){for(var t=[],n=0;n<this.ranges.length;n++)t[n]=new h(sc(this.ranges[n].anchor),sc(this.ranges[n].head));return new st(t,this.primIndex)},st.prototype.somethingSelected=function(){for(var n=0;n<this.ranges.length;n++)if(!this.ranges[n].empty())return!0;return!1},st.prototype.contains=function(n,t){var i,r;for(t=t||n,i=0;i<this.ranges.length;i++)if(r=this.ranges[i],0<=e(t,r.from())&&e(n,r.to())<=0)return i;return-1},function(n,t){this.anchor=n;this.head=t}),h.prototype.from=function(){return ao(this.anchor,this.head)},h.prototype.to=function(){return lo(this.anchor,this.head)},h.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},we.prototype={chunkSize:function(){return this.lines.length},removeInner:function(n,t){for(var u,r,i=n,f=n+t;i<f;++i)r=this.lines[i],this.height-=r.height,(u=r).parent=null,gv(u),d(r,"delete");this.lines.splice(n,t)},collapse:function(n){n.push.apply(n,this.lines)},insertInner:function(n,t,i){this.height+=i;this.lines=this.lines.slice(0,n).concat(t).concat(this.lines.slice(n));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(n,t,i){for(var r=n+t;n<r;++n)if(i(this.lines[n]))return!0}},be.prototype={chunkSize:function(){return this.size},removeInner:function(n,t){var e,r,i,u,f,o;for(this.size-=t,r=0;r<this.children.length;++r)if(i=this.children[r],u=i.chunkSize(),n<u){if(f=Math.min(t,u-n),o=i.height,i.removeInner(n,f),this.height-=o-i.height,u==f&&(this.children.splice(r--,1),i.parent=null),0==(t-=f))break;n=0}else n-=u;this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof we))&&(this.collapse(e=[]),this.children=[new we(e)],this.children[0].parent=this)},collapse:function(n){for(var t=0;t<this.children.length;++t)this.children[t].collapse(n)},insertInner:function(n,t,i){var u,r,o,s,f,e;for(this.size+=t.length,this.height+=i,u=0;u<this.children.length;++u){if(r=this.children[u],o=r.chunkSize(),n<=o){if(r.insertInner(n,t,i),r.lines&&50<r.lines.length){for(s=r.lines.length%25+25,f=s;f<r.lines.length;)e=new we(r.lines.slice(f,f+=25)),r.height-=e.height,this.children.splice(++u,0,e),e.parent=this;r.lines=r.lines.slice(0,s);this.maybeSpill()}break}n-=o}},maybeSpill:function(){var n,i,t;if(!(this.children.length<=10)){n=this;do t=new be(n.children.splice(n.children.length-5,5));while(n.parent?(n.size-=t.size,n.height-=t.height,i=tt(n.parent.children,n),n.parent.children.splice(i+1,0,t)):(((i=new be(n.children)).parent=n).children=[i,t],n=i),t.parent=n.parent,10<n.children.length);n.parent.maybeSpill()}},iterN:function(n,t,i){for(var f,u,e,r=0;r<this.children.length;++r)if(f=this.children[r],u=f.chunkSize(),n<u){if(e=Math.min(t,u-n),f.iterN(n,e,i))return!0;if(0==(t-=e))break;n=0}else n-=u}},ke.prototype.clear=function(){var n=this.doc.cm,t=this.line.widgets,i=this.line,u=l(i),r,f;if(null!=u&&t){for(r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(i.widgets=null);f=ie(this);fi(i,Math.max(0,i.height-f));n&&(ot(n,function(){ub(n,i,-f);nr(n,u,"widget")}),d(n,"lineWidgetCleared",n,this,u))}},ke.prototype.changed=function(){var r=this,u=this.height,n=this.doc.cm,t=this.line,i=(this.height=null,ie(this)-u);i&&(gi(this.doc,t)||fi(t,t.height+i),n&&ot(n,function(){n.curOp.forceUpdate=!0;ub(n,t,i);d(n,"lineWidgetChanged",n,r,l(t))}))},ou(ke),fa=0,fr.prototype.clear=function(){var t,i,u,s,h;if(!this.explicitlyCleared){for(var f,n=this.doc.cm,c=n&&!n.curOp,r=(c&&nu(n),!pt(this,"clear")||(f=this.find())&&d(this,"clear",f.from,f.to),null),e=null,o=0;o<this.lines.length;++o)t=this.lines[o],i=ne(t.markedSpans,this),n&&!this.collapsed?nr(n,l(t),"text"):n&&(null!=i.to&&(e=l(t)),null!=i.from&&(r=l(t))),t.markedSpans=function(n,t){for(var r,i=0;i<n.length;++i)n[i]!=t&&(r=r||[]).push(n[i]);return r}(t.markedSpans,i),null==i.from&&this.collapsed&&!gi(this.doc,t)&&n&&fi(t,lu(n.display));if(n&&this.collapsed&&!n.options.lineWrapping)for(u=0;u<this.lines.length;++u)s=gt(this.lines[u]),h=ko(s),h>n.display.maxLineLength&&(n.display.maxLine=s,n.display.maxLineLength=h,n.display.maxLineChanged=!0);null!=r&&n&&this.collapsed&&et(n,r,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,n&&pw(n.doc));n&&d(n,"markerCleared",n,this,r,e);c&&tu(n);this.parent&&this.parent.clear()}},fr.prototype.find=function(t,i){var f,o,e,r,u;for(null==t&&"bookmark"==this.type&&(t=1),e=0;e<this.lines.length;++e){if(r=this.lines[e],u=ne(r.markedSpans,this),null!=u.from&&(f=n(i?r:l(r),u.from),-1==t))return f;if(null!=u.to&&(o=n(i?r:l(r),u.to),1==t))return o}return f&&{from:f,to:o}},fr.prototype.changed=function(){var r=this,i=this.find(-1,!0),t=this,n=this.doc.cm;i&&n&&ot(n,function(){var f=i.line,u=l(i.line),u=gc(n,u);u&&(gy(u),n.curOp.selectionChanged=n.curOp.forceUpdate=!0);n.curOp.updateMaxLine=!0;gi(t.doc,f)||null==t.height||(u=t.height,t.height=null,(u=ie(t)-u)&&fi(f,f.height+u));d(n,"markerChanged",n,r)})},fr.prototype.attachLine=function(n){var t;this.lines.length||!this.doc.cm||(t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=tt(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this);this.lines.push(n)},fr.prototype.detachLine=function(n){this.lines.splice(tt(this.lines,n),1);!this.lines.length&&this.doc.cm&&((n=this.doc.cm.curOp).maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)},ou(fr),nf=function(n,t){this.markers=n;this.primary=t;for(var i=0;i<n.length;++i)n[i].parent=this},nf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var n=0;n<this.markers.length;++n)this.markers[n].clear();d(this,"clear")}},nf.prototype.find=function(n,t){return this.primary.find(n,t)},ou(nf),eb=0,ea=((ht.prototype=nv(be.prototype,{constructor:ht,iter:function(n,t,i){i?this.iterN(n-this.first,t-n,i):this.iterN(this.first,this.first+this.size,n)},insert:function(n,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(n-this.first,t,r)},remove:function(n,t){this.removeInner(n-this.first,t)},getValue:function(n){var t=fc(this,this.first,this.first+this.size);return!1===n?t:t.join(n||this.lineSeparator())},setValue:nt(function(i){var r=n(this.first,0),u=this.first+this.size-1;ku(this,{from:r,to:n(u,t(this,u).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0);this.cm&&fe(this.cm,0,0);it(this,ir(r),ui)}),replaceRange:function(n,t,i,r){du(this,n,t=o(this,t),i=i?o(this,i):t,r)},getRange:function(n,t,i){return n=lr(this,o(this,n),o(this,t)),!1===i?n:""===i?n.join(""):n.join(i||this.lineSeparator())},getLine:function(n){return n=this.getLineHandle(n),n&&n.text},getLineHandle:function(n){if(df(this,n))return t(this,n)},getLineNumber:l,getLineHandleVisualStart:function(n){return gt(n="number"==typeof n?t(this,n):n)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(n){return o(this,n)},getCursor:function(n){var t=this.sel.primary(),n=null==n||"head"==n?t.head:"anchor"==n?t.anchor:"end"==n||"to"==n||!1===n?t.to():t.from();return n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nt(function(t,i,r){aw(this,o(this,"number"==typeof t?n(t,i||0):t),null,r)}),setSelection:nt(function(n,t,i){aw(this,o(this,n),o(this,t||n),i)}),extendSelection:nt(function(n,t,i){cs(this,o(this,n),t&&o(this,t),i)}),extendSelections:nt(function(n,t){lw(this,av(this,n),t)}),extendSelectionsBy:nt(function(n,t){lw(this,av(this,so(this.sel.ranges,n)),t)}),setSelections:nt(function(n,t,i){if(n.length){for(var u=[],r=0;r<n.length;r++)u[r]=new h(o(this,n[r].anchor),o(this,n[r].head||n[r].anchor));null==t&&(t=Math.min(n.length-1,this.sel.primIndex));it(this,ti(this.cm,u,t),i)}}),addSelection:nt(function(n,t,i){var r=this.sel.ranges.slice(0);r.push(new h(o(this,n),o(this,t||n)));it(this,ti(this.cm,r,r.length-1),i)}),getSelection:function(n){for(var u,i,r=this.sel.ranges,t=0;t<r.length;t++)u=lr(this,r[t].from(),r[t].to()),i=i?i.concat(u):u;return!1===n?i:i.join(n||this.lineSeparator())},getSelections:function(n){for(var i,u=[],r=this.sel.ranges,t=0;t<r.length;t++)i=lr(this,r[t].from(),r[t].to()),!1!==n&&(i=i.join(n||this.lineSeparator())),u[t]=i;return u},replaceSelection:function(n,t,i){for(var u=[],r=0;r<this.sel.ranges.length;r++)u[r]=n;this.replaceSelections(u,t,i||"+input")},replaceSelections:nt(function(t,i,r){for(var s,i,o,f=[],c=this.sel,u=0;u<c.ranges.length;u++)s=c.ranges[u],f[u]={from:s.from(),to:s.to(),text:this.splitLines(t[u]),origin:r};for(i=i&&"end"!=i&&function(t,i,r){for(var s=[],a=l=n(t.first,0),f=0;f<i.length;f++){var u=i[f],o=rw(u.from,l,a),c=rw(rr(u),l,a),l=u.to,a=c;"around"==r?(u=e((u=t.sel.ranges[f]).head,u.anchor)<0,s[f]=new h(u?c:o,u?o:c)):s[f]=new h(o,o)}return new st(s,t.sel.primIndex)}(this,f,i),o=f.length-1;0<=o;o--)ku(this,f[o]);i?vw(this,i):this.cm&&yu(this.cm)}),undo:nt(function(){vs(this,"undo")}),redo:nt(function(){vs(this,"redo")}),undoSelection:nt(function(){vs(this,"undo",!0)}),redoSelection:nt(function(){vs(this,"redo",!0)}),setExtending:function(n){this.extend=n},getExtending:function(){return this.extend},historySize:function(){for(var t,n=this.history,r=0,u=0,i=0;i<n.done.length;i++)n.done[i].ranges||++r;for(t=0;t<n.undone.length;t++)n.undone[t].ranges||++u;return{undo:r,redo:u}},clearHistory:function(){var n=this;this.history=new ss(this.history);ur(this,function(t){return t.history=n.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(n){return n&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(n){return this.history.generation==(n||this.cleanGeneration)},getHistory:function(){return{done:wu(this.history.done),undone:wu(this.history.undone)}},setHistory:function(n){var t=this.history=new ss(this.history);t.done=wu(n.done.slice(0),null,!0);t.undone=wu(n.undone.slice(0),null,!0)},setGutterMarker:nt(function(n,t,i){return pe(this,n,"gutter",function(n){var r=n.gutterMarkers||(n.gutterMarkers={});return!(r[t]=i)&&iv(r)&&(n.gutterMarkers=null),1})}),clearGutter:nt(function(n){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[n]&&pe(t,i,"gutter",function(){return i.gutterMarkers[n]=null,iv(i.gutterMarkers)&&(i.gutterMarkers=null),1})})}),lineInfo:function(n){var i;if("number"==typeof n){if(!df(this,n)||!(n=t(this,i=n)))return null}else if(null==(i=l(n)))return null;return{line:i,handle:n,text:n.text,gutterMarkers:n.gutterMarkers,textClass:n.textClass,bgClass:n.bgClass,wrapClass:n.wrapClass,widgets:n.widgets}},addLineClass:nt(function(n,t,i){return pe(this,n,"gutter"==t?"gutter":"class",function(n){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(n[r]){if(ru(i).test(n[r]))return;n[r]+=" "+i}else n[r]=i;return 1})}),removeLineClass:nt(function(n,t,i){return pe(this,n,"gutter"==t?"gutter":"class",function(n){var f="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",u=n[f],r,e;if(u){if(null==i)n[f]=null;else{if(r=u.match(ru(i)),!r)return;e=r.index+r[0].length;n[f]=u.slice(0,r.index)+(r.index&&e!=u.length?" ":"")+u.slice(e)||null}return 1}})}),addLineWidget:nt(function(n,t,i){return n=n,r=new ke(f=this,t,i),(u=f.cm)&&r.noHScroll&&(u.display.alignWidgets=!0),pe(f,n,"widget",function(n){var t=n.widgets||(n.widgets=[]);return null==r.insertAt?t.push(r):t.splice(Math.min(t.length,Math.max(0,r.insertAt)),0,r),r.line=n,u&&!gi(f,n)&&(t=vi(n)<f.scrollTop,fi(n,n.height+ie(r)),t&&vl(u,r.height),u.curOp.forceUpdate=!0),1}),u&&d(u,"lineWidgetAdded",u,r,"number"==typeof n?n:l(n)),r;var f,r,u}),removeLineWidget:function(n){n.clear()},markText:function(n,t,i){return gu(this,o(this,n),o(this,t),i,i&&i.type||"range")},setBookmark:function(n,t){return t={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents},gu(this,n=o(this,n),n,t,"bookmark")},findMarksAt:function(n){var f=[],u=t(this,(n=o(this,n)).line).markedSpans,r,i;if(u)for(r=0;r<u.length;++r)i=u[r],(null==i.from||i.from<=n.ch)&&(null==i.to||i.to>=n.ch)&&f.push(i.marker.parent||i.marker);return f},findMarks:function(n,t,i){n=o(this,n);t=o(this,t);var u=[],r=n.line;return this.iter(n.line,t.line+1,function(f){var s=f.markedSpans,o,e;if(s)for(o=0;o<s.length;o++)e=s[o],null!=e.to&&r==n.line&&n.ch>=e.to||null==e.from&&r!=n.line||null!=e.from&&r==t.line&&e.from>=t.ch||i&&!i(e.marker)||u.push(e.marker.parent||e.marker);++r}),u},getAllMarks:function(){var n=[];return this.iter(function(t){var r=t.markedSpans,i;if(r)for(i=0;i<r.length;++i)null!=r[i].from&&n.push(r[i].marker)}),n},posFromIndex:function(t){var i,r=this.first,u=this.lineSeparator().length;return this.iter(function(n){if(n=n.text.length+u,t<n)return i=t,!0;t-=n;++r}),o(this,n(r,i))},indexFromPos:function(n){var t=(n=o(this,n)).ch,i;return n.line<this.first||n.ch<0?0:(i=this.lineSeparator().length,this.iter(this.first,n.line,function(n){t+=n.text.length+i}),t)},copy:function(n){var t=new ht(fc(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,n&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(n){for(var u=this.first,t=this.first+this.size,t=(null!=(n=n||{}).from&&n.from>u&&(u=n.from),null!=n.to&&n.to<t&&(t=n.to),new ht(fc(this,u,t),n.mode||this.modeOption,u,this.lineSep,this.direction)),o=(n.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:n.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:n.sharedHist}],t),h=fb(this),s=0;s<h.length;s++){var i=h[s],f=i.find(),r=o.clipPos(f.from),f=o.clipPos(f.to);e(r,f)&&(r=gu(o,r,f,i.primary,i.primary.type),i.markers.push(r),r.parent=i)}return t},unlinkDoc:function(n){var t,r,i;if(n instanceof y&&(n=n.doc),this.linked)for(t=0;t<this.linked.length;++t)if(r=this.linked[t],r.doc==n){this.linked.splice(t,1);n.unlinkDoc(this);hd(fb(this));break}n.history==this.history&&(i=[n.id],ur(n,function(n){return i.push(n.id)},!0),n.history=new ss(null),n.history.done=wu(this.history.done,i),n.history.undone=wu(this.history.undone,i))},iterLinkedDocs:function(n){ur(this,n)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(n){return this.lineSep?n.split(this.lineSep):nc(n)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nt(function(n){var t;(n="rtl"!=n?"ltr":n)!=this.direction&&(this.direction=n,this.iter(function(n){return n.order=null}),this.cm&&ot(t=this.cm,function(){ew(t);et(t)}))})})).eachLine=ht.prototype.iter,0),oa=!1,pi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},tf=0;tf<10;tf++)pi[tf+48]=pi[tf+96]=String(tf);for(de=65;de<=90;de++)pi[de]=String.fromCharCode(de);for(rf=1;rf<=12;rf++)pi[rf+111]=pi[rf+63235]="F"+rf;ci={};ci.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ci.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ci.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};ci.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ci.default=at?ci.macDefault:ci.pcDefault;ef={selectAll:kw,singleSelection:function(n){return n.setSelection(n.getCursor("anchor"),n.getCursor("head"),ui)},killLine:function(i){return ff(i,function(r){var u;return r.empty()?(u=t(i.doc,r.head.line).text.length,r.head.ch==u&&r.head.line<i.lastLine()?{from:r.head,to:n(r.head.line+1,0)}:{from:r.head,to:n(r.head.line,u)}):{from:r.from(),to:r.to()}})},deleteLine:function(t){return ff(t,function(i){return{from:n(i.from().line,0),to:o(t.doc,n(i.to().line+1,0))}})},delLineLeft:function(t){return ff(t,function(t){return{from:n(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(n){return ff(n,function(t){var i=n.charCoords(t.head,"div").top+5;return{from:n.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(n){return ff(n,function(t){var i=n.charCoords(t.head,"div").top+5,i=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:i}})},undo:function(n){return n.undo()},redo:function(n){return n.redo()},undoSelection:function(n){return n.undoSelection()},redoSelection:function(n){return n.redoSelection()},goDocStart:function(t){return t.extendSelection(n(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(n(t.lastLine()))},goLineStart:function(n){return n.extendSelectionsBy(function(t){return ab(n,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(n){return n.extendSelectionsBy(function(t){return vb(n,t.head)},{origin:"+move",bias:1})},goLineEnd:function(n){return n.extendSelectionsBy(function(i){var u=n,i=i.head.line,r=t(u.doc,i),f=function(n){for(var t;t=bo(n);)n=t.find(1,!0).line;return n}(r);return f!=r&&(i=l(f)),ca(!0,u,r,i,-1)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(t){return t=n.cursorCoords(t.head,"div").top+5,n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div")},yf)},goLineLeft:function(n){return n.extendSelectionsBy(function(t){return t=n.cursorCoords(t.head,"div").top+5,n.coordsChar({left:0,top:t},"div")},yf)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(t){var i=n.cursorCoords(t.head,"div").top+5,i=n.coordsChar({left:0,top:i},"div");return i.ch<n.getLine(i.line).search(/\S/)?vb(n,t.head):i},yf)},goLineUp:function(n){return n.moveV(-1,"line")},goLineDown:function(n){return n.moveV(1,"line")},goPageUp:function(n){return n.moveV(-1,"page")},goPageDown:function(n){return n.moveV(1,"page")},goCharLeft:function(n){return n.moveH(-1,"char")},goCharRight:function(n){return n.moveH(1,"char")},goColumnLeft:function(n){return n.moveH(-1,"column")},goColumnRight:function(n){return n.moveH(1,"column")},goWordLeft:function(n){return n.moveH(-1,"word")},goGroupRight:function(n){return n.moveH(1,"group")},goGroupLeft:function(n){return n.moveH(-1,"group")},goWordRight:function(n){return n.moveH(1,"word")},delCharBefore:function(n){return n.deleteH(-1,"codepoint")},delCharAfter:function(n){return n.deleteH(1,"char")},delWordBefore:function(n){return n.deleteH(-1,"word")},delWordAfter:function(n){return n.deleteH(1,"word")},delGroupBefore:function(n){return n.deleteH(-1,"group")},delGroupAfter:function(n){return n.deleteH(1,"group")},indentAuto:function(n){return n.indentSelection("smart")},indentMore:function(n){return n.indentSelection("add")},indentLess:function(n){return n.indentSelection("subtract")},insertTab:function(n){return n.replaceSelection("\t")},insertSoftTab:function(n){for(var t,u=[],f=n.listSelections(),i=n.options.tabSize,r=0;r<f.length;r++)t=f[r].from(),t=yt(n.getLine(t.line),t.ch,i),u.push(sh(i-t%i));n.replaceSelections(u)},defaultTab:function(n){n.somethingSelected()?n.indentSelection("add"):n.execCommand("insertTab")},transposeChars:function(i){return ot(i,function(){for(var r,u,f,o=i.listSelections(),s=[],e=0;e<o.length;e++)o[e].empty()&&(r=o[e].head,(u=t(i.doc,r.line).text)&&(0<(r=r.ch==u.length?new n(r.line,r.ch-1):r).ch?(r=new n(r.line,r.ch+1),i.replaceRange(u.charAt(r.ch-1)+u.charAt(r.ch-2),n(r.line,r.ch-2),r,"+transpose")):r.line>i.doc.first&&(f=t(i.doc,r.line-1).text)&&(r=new n(r.line,1),i.replaceRange(u.charAt(0)+i.doc.lineSeparator()+f.charAt(f.length-1),n(r.line-1,f.length-1),r,"+transpose"))),s.push(new h(r,r)));i.setSelections(s)})},newlineAndIndent:function(n){return ot(n,function(){for(var t,r,i=(t=n.listSelections()).length-1;0<=i;i--)n.replaceRange(n.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");for(t=n.listSelections(),r=0;r<t.length;r++)n.indentLine(t[r].from().line,null,!0);yu(n)})},openLine:function(n){return n.replaceSelection("\n","start")},toggleOverwrite:function(n){return n.toggleOverwrite()}};yb=new di;ws=null;la.prototype.compare=function(n,t,i){return this.time+400>n&&0==e(t,this.pos)&&i==this.button};var of={toString:function(){return"CodeMirror.Init"}},uk={},bs={};y.defaults=uk;y.optionHandlers=bs;ks=[];y.defineInitHook=function(n){return ks.push(n)};wt=null;a.prototype.init=function(n){function e(n){for(var t=n.target;t;t=t.parentNode){if(t==i)return 1;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}}function o(n){var f,r;if(e(n)&&!k(t,n)){if(t.somethingSelected())ds({lineWise:!1,text:t.getSelections()}),"cut"==n.type&&t.replaceSelection("",null,"cut");else{if(!t.options.lineWiseCopyCut)return;f=ok(t);ds({lineWise:!0,text:f.text});"cut"==n.type&&t.operation(function(){t.setSelections(f.ranges,0,ui);t.replaceSelection("",null,"cut")})}if(n.clipboardData&&(n.clipboardData.clearData(),r=wt.text.join("\n"),n.clipboardData.setData("Text",r),n.clipboardData.getData("Text")==r))return void n.preventDefault();var o=sk(),r=o.firstChild,s=(ya(r),t.display.lineSpace.insertBefore(o,t.display.lineSpace.firstChild),r.value=wt.text.join("\n"),vt(i.ownerDocument));vf(r);setTimeout(function(){t.display.lineSpace.removeChild(o);s.focus();s==i&&u.showPrimarySelection()},50)}}var r=this,u=this,t=u.cm,i=u.div=n.lineDiv;i.contentEditable=!0;ya(i,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize);f(i,"paste",function(n){!e(n)||k(t,n)||fk(n,t)||v<=11&&setTimeout(g(t,function(){return r.updateFromDOM()}),20)});f(i,"compositionstart",function(n){r.composing={data:n.data,done:!1}});f(i,"compositionupdate",function(n){r.composing||(r.composing={data:n.data,done:!1})});f(i,"compositionend",function(n){r.composing&&(n.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)});f(i,"touchstart",function(){return u.forceCompositionEnd()});f(i,"input",function(){r.composing||r.readFromDOMSoon()});f(i,"copy",o);f(i,"cut",o)};a.prototype.screenReaderLabelChanged=function(n){n?this.div.setAttribute("aria-label",n):this.div.removeAttribute("aria-label")};a.prototype.prepareSelection=function(){var n=hp(this.cm,!1);return n.focus=vt(this.div.ownerDocument)==this.div,n};a.prototype.showSelection=function(n,t){n&&this.cm.display.view.length&&((n.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(n))};a.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};a.prototype.showPrimarySelection=function(){var n=this.getSelection(),i=this.cm,r=i.doc.sel.primary(),f=r.from(),r=r.to(),t,u,o;if(i.display.viewTo==i.display.viewFrom||f.line>=i.display.viewTo||r.line<i.display.viewFrom)n.removeAllRanges();else if(t=gs(i,n.anchorNode,n.anchorOffset),u=gs(i,n.focusNode,n.focusOffset),!t||t.bad||!u||u.bad||0!=e(ao(t,u),f)||0!=e(lo(t,u),r)){var t=i.display.view,u=f.line>=i.display.viewFrom&&ck(i,f)||{node:t[0].measure.map[2],offset:0},f=r.line<i.display.viewTo&&ck(i,r);if(f||(f={node:(t=(r=t[t.length-1].measure).maps?r.maps[r.maps.length-1]:r.map)[t.length-1],offset:t[t.length-2]-t[t.length-3]}),u&&f){r=n.rangeCount&&n.getRangeAt(0);try{o=af(u.node,u.offset,f.offset,f.node)}catch(n){}o&&(!li&&i.state.focused?(n.collapse(u.node,u.offset),o.collapsed||(n.removeAllRanges(),n.addRange(o))):(n.removeAllRanges(),n.addRange(o)),r&&null==n.anchorNode?n.addRange(r):li&&this.startGracePeriod());this.rememberSelection()}else n.removeAllRanges()}};a.prototype.startGracePeriod=function(){var n=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){n.gracePeriod=!1;n.selectionChanged()&&n.cm.operation(function(){return n.cm.curOp.selectionChanged=!0})},20)};a.prototype.showMultipleSelections=function(n){ct(this.cm.display.cursorDiv,n.cursors);ct(this.cm.display.selectionDiv,n.selection)};a.prototype.rememberSelection=function(){var n=this.getSelection();this.lastAnchorNode=n.anchorNode;this.lastAnchorOffset=n.anchorOffset;this.lastFocusNode=n.focusNode;this.lastFocusOffset=n.focusOffset};a.prototype.selectionInEditor=function(){var n=this.getSelection();return n.rangeCount?(n=n.getRangeAt(0).commonAncestorContainer,ki(this.div,n)):!1};a.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&vt(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())};a.prototype.blur=function(){this.div.blur()};a.prototype.getField=function(){return this.div};a.prototype.supportsTouch=function(){return!0};a.prototype.receivedFocus=function(){var t=this,n=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):ot(this.cm,function(){return n.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,function t(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,t))})};a.prototype.selectionChanged=function(){var n=this.getSelection();return n.anchorNode!=this.lastAnchorNode||n.anchorOffset!=this.lastAnchorOffset||n.focusNode!=this.lastFocusNode||n.focusOffset!=this.lastFocusOffset};a.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var i,r,n=this.getSelection(),t=this.cm;if(fo&&wi&&this.cm.display.gutterSpecs.length&&function(n){for(var t=n;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return 1;return}(n.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();this.composing||(this.rememberSelection(),i=gs(t,n.anchorNode,n.anchorOffset),r=gs(t,n.focusNode,n.focusOffset),i&&r&&ot(t,function(){it(t.doc,ir(i,r),ui);(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}};a.prototype.pollContent=function(){var i,o;null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var y,u=this.cm,f=u.display,r=u.doc.sel.primary(),h=r.from(),r=r.to();if(0==h.ch&&h.line>u.firstLine()&&(h=n(h.line-1,t(u.doc,h.line-1).length)),r.ch==t(u.doc,r.line).text.length&&r.line<u.lastLine()&&(r=n(r.line+1,0)),h.line<f.viewFrom||r.line>f.viewTo-1)return!1;var p,v=h.line==f.viewFrom||0==(v=kr(u,h.line))?(y=l(f.view[0].line),f.view[0].node):(y=l(f.view[v].line),f.view[v-1].node.nextSibling),r=kr(u,r.line),f=r==f.view.length-1?(p=f.viewTo-1,f.lineDiv.lastChild):(p=l(f.view[r+1].line)-1,f.view[r+1].node.previousSibling);if(!v)return!1;for(i=u.doc.splitLines(function(t,i,r,u,f){function l(){s&&(e+=h,o&&(e+=h),s=o=!1)}function c(n){n&&(l(),e+=n)}for(var e="",s=!1,h=t.doc.lineSeparator(),o=!1;!function i(r){var e,a,v;if(1==r.nodeType){if(e=r.getAttribute("cm-text"),e)c(e);else if(e=r.getAttribute("cm-marker"))(e=t.findMarks(n(u,0),n(f+1,0),(v=+e,function(n){return n.id==v}))).length&&(e=e[0].find(0))&&c(lr(t.doc,e.from,e.to).join(h));else if("false"!=r.getAttribute("contenteditable")&&(e=/^(pre|div|p|li|table|br)$/i.test(r.nodeName),/^br$/i.test(r.nodeName)||0!=r.textContent.length)){for(e&&l(),a=0;a<r.childNodes.length;a++)i(r.childNodes[a]);/^(pre|p)$/i.test(r.nodeName)&&(o=!0);e&&(s=!0)}}else 3==r.nodeType&&c(r.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}(i),i!=r;)i=i.nextSibling,o=!1;return e}(u,v,f,y,p)),o=lr(u.doc,n(y,0),n(p,t(u.doc,p).text.length));1<i.length&&1<o.length;)if(c(i)==c(o))i.pop(),o.pop(),p--;else{if(i[0]!=o[0])break;i.shift();o.shift();y++}for(var s=0,a=0,k=i[0],d=o[0],g=Math.min(k.length,d.length);s<g&&k.charCodeAt(s)==d.charCodeAt(s);)++s;for(var w=c(i),b=c(o),nt=Math.min(w.length-(1==i.length?s:0),b.length-(1==o.length?s:0));a<nt&&w.charCodeAt(w.length-a-1)==b.charCodeAt(b.length-a-1);)++a;if(1==i.length&&1==o.length&&y==h.line)for(;s&&s>h.ch&&w.charCodeAt(w.length-a-1)==b.charCodeAt(b.length-a-1);)s--,a++;return i[i.length-1]=w.slice(0,w.length-a).replace(/^\u200b+/,""),i[0]=i[0].slice(s).replace(/\u200b+$/,""),r=n(y,s),v=n(p,o.length?c(o).length-a:0),1<i.length||i[0]||e(r,v)?(du(u.doc,i,r,v,"+input"),!0):void 0};a.prototype.ensurePolled=function(){this.forceCompositionEnd()};a.prototype.reset=function(){this.forceCompositionEnd()};a.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};a.prototype.readFromDOMSoon=function(){var n=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(n.readDOMTimeout=null,n.composing){if(!n.composing.done)return;n.composing=null}n.updateFromDOM()},80))};a.prototype.updateFromDOM=function(){var n=this;!this.cm.isReadOnly()&&this.pollContent()||ot(this.cm,function(){return et(n.cm)})};a.prototype.setUneditable=function(n){n.contentEditable="false"};a.prototype.onKeyPress=function(n){0==n.charCode||this.composing||(n.preventDefault(),this.cm.isReadOnly()||g(this.cm,va)(this.cm,String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),0))};a.prototype.readOnlyChanged=function(n){this.div.contentEditable=String("nocursor"!=n)};a.prototype.onContextMenu=function(){};a.prototype.resetPosition=function(){};a.prototype.needsContentAttribute=!0;w.prototype.init=function(n){function e(n){if(!k(t,n)){if(t.somethingSelected())ds({lineWise:!1,text:t.getSelections()});else{if(!t.options.lineWiseCopyCut)return;var u=ok(t);ds({lineWise:!0,text:u.text});"cut"==n.type?t.setSelections(u.ranges,null,ui):(i.prevInput="",r.value=u.text.join("\n"),vf(r))}"cut"==n.type&&(t.state.cutIncoming=+new Date)}}var u=this,i=this,t=this.cm,r=(this.createField(n),this.textarea);n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild);cf&&(r.style.width="0px");f(r,"input",function(){s&&9<=v&&u.hasSelection&&(u.hasSelection=null);i.poll()});f(r,"paste",function(n){k(t,n)||fk(n,t)||(t.state.pasteIncoming=+new Date,i.fastPoll())});f(r,"cut",e);f(r,"copy",e);f(n.scroller,"paste",function(u){if(!yi(n,u)&&!k(t,u)){if(!r.dispatchEvent)return t.state.pasteIncoming=+new Date,void i.focus();var f=new Event("paste");f.clipboardData=u.clipboardData;r.dispatchEvent(f)}});f(n.lineSpace,"selectstart",function(t){yi(n,t)||ft(t)});f(r,"compositionstart",function(){var n=t.getCursor("from");i.composing&&i.composing.range.clear();i.composing={start:n,range:t.markText(n,t.getCursor("to"),{className:"CodeMirror-composing"})}});f(r,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})};w.prototype.createField=function(){this.wrapper=sk();this.textarea=this.wrapper.firstChild;var n=this.cm.options;ya(this.textarea,n.spellcheck,n.autocorrect,n.autocapitalize)};w.prototype.screenReaderLabelChanged=function(n){n?this.textarea.setAttribute("aria-label",n):this.textarea.removeAttribute("aria-label")};w.prototype.prepareSelection=function(){var r,n=this.cm,t=n.display,i=n.doc,u=hp(n);return n.options.moveInputWithCursor&&(n=ni(n,i.sel.primary().head,"div"),i=t.wrapper.getBoundingClientRect(),r=t.lineDiv.getBoundingClientRect(),u.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+r.top-i.top)),u.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+r.left-i.left))),u};w.prototype.showSelection=function(n){var t=this.cm.display;ct(t.cursorDiv,n.cursors);ct(t.selectionDiv,n.selection);null!=n.teTop&&(this.wrapper.style.top=n.teTop+"px",this.wrapper.style.left=n.teLeft+"px")};w.prototype.reset=function(n){var t,i;this.contextMenuPending||this.composing&&n||(t=this.cm,this.resetting=!0,t.somethingSelected()?(this.prevInput="",i=t.getSelection(),this.textarea.value=i,t.state.focused&&vf(this.textarea),s&&9<=v&&(this.hasSelection=i)):n||(this.prevInput=this.textarea.value="",s&&9<=v&&(this.hasSelection=null)),this.resetting=!1)};w.prototype.getField=function(){return this.textarea};w.prototype.supportsTouch=function(){return!1};w.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!lf||vt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(n){}};w.prototype.blur=function(){this.textarea.blur()};w.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};w.prototype.receivedFocus=function(){this.slowPoll()};w.prototype.slowPoll=function(){var n=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){n.poll();n.cm.state.focused&&n.slowPoll()})};w.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0;n.polling.set(20,function i(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,i))})};w.prototype.poll=function(){var i=this,n=this.cm,f=this.textarea,r=this.prevInput,t,e,u,o;if(this.contextMenuPending||this.resetting||!n.state.focused||bk(f)&&!r&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq||(t=f.value,t==r&&!n.somethingSelected()))return!1;if(s&&9<=v&&this.hasSelection===t||at&&/[\uf700-\uf7ff]/.test(t))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu&&(e=t.charCodeAt(0),8203!=e||r||(r="​"),8666==e))return this.reset(),this.cm.execCommand("undo");for(u=0,o=Math.min(r.length,t.length);u<o&&r.charCodeAt(u)==t.charCodeAt(u);)++u;return ot(n,function(){va(n,t.slice(u),r.length-u,null,i.composing?"*compose":null);1e3<t.length||-1<t.indexOf("\n")?f.value=i.prevInput="":i.prevInput=t;i.composing&&(i.composing.range.clear(),i.composing.range=n.markText(i.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0};w.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};w.prototype.onKeyPress=function(){s&&9<=v&&(this.hasSelection=null);this.fastPoll()};w.prototype.onContextMenu=function(n){function y(){var f,n;null!=t.selectionStart&&(n="​"+((f=r.somethingSelected())?t.value:""),t.value="⇚",t.value=n,i.prevInput=f?"":"​",t.selectionStart=1,t.selectionEnd=n.length,u.selForContextMenu=r.doc.sel)}function o(){var f,n;i.contextMenuPending==o&&(i.contextMenuPending=!1,i.wrapper.style.cssText=l,t.style.cssText=c,s&&v<9&&u.scrollbars.setScrollTop(u.scroller.scrollTop=p),null!=t.selectionStart&&((!s||v<9)&&y(),f=0,n=function(){u.selForContextMenu==r.doc.sel&&0==t.selectionStart&&0<t.selectionEnd&&"​"==i.prevInput?g(r,kw)(r):f++<10?u.detectingSelectAll=setTimeout(n,500):(u.selForContextMenu=null,u.input.reset())},u.detectingSelectAll=setTimeout(n,200)))}var c,l,a,h,i=this,r=i.cm,u=r.display,t=i.textarea,e=(i.contextMenuPending&&i.contextMenuPending(),br(r,n)),p=u.scroller.scrollTop;e&&!bt&&(r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(e)&&g(r,it)(r.doc,ir(e),ui),c=t.style.cssText,l=i.wrapper.style.cssText,e=i.wrapper.offsetParent.getBoundingClientRect(),i.wrapper.style.cssText="position: static",t.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(n.clientY-e.top-5)+"px; left: "+(n.clientX-e.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",rt&&(a=t.ownerDocument.defaultView.scrollY),u.input.focus(),rt&&t.ownerDocument.defaultView.scrollTo(null,a),u.input.reset(),r.somethingSelected()||(t.value=i.prevInput=" "),i.contextMenuPending=o,u.selForContextMenu=r.doc.sel,clearTimeout(u.detectingSelectAll),s&&9<=v&&y(),rh?(kf(n),h=function(){lt(window,"mouseup",h);setTimeout(o,20)},f(window,"mouseup",h)):setTimeout(o,50))};w.prototype.readOnlyChanged=function(n){n||this.reset();this.textarea.disabled="nocursor"==n;this.textarea.readOnly=!!n};w.prototype.setUneditable=function(){};w.prototype.needsContentAttribute=!1;lk=(nh=y).optionHandlers;nh.defineOption=i;nh.Init=of;i("value","",function(n,t){return n.setValue(t)},!0);i("mode",null,function(n,t){n.doc.modeOption=t;na(n)},!0);i("indentUnit",2,na,!0);i("indentWithTabs",!1);i("smartIndent",!0);i("tabSize",4,function(n){ve(n);re(n);et(n)},!0);i("lineSeparator",null,function(t,i){var r,f,u;if(t.doc.lineSep=i)for(r=[],f=t.doc.first,t.doc.iter(function(t){for(var u,e=0;;){if(u=t.text.indexOf(i,e),-1==u)break;e=u+i.length;r.push(n(f,u))}f++}),u=r.length-1;0<=u;u--)du(t.doc,i,r[u],n(r[u].line,r[u].ch+i.length))});i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(n,t,i){n.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");i!=of&&n.refresh()});i("specialCharPlaceholder",gk,function(n){return n.refresh()},!0);i("electricChars",!0);i("inputStyle",lf?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor");},!0);i("spellcheck",!1,function(n,t){return n.getInputField().spellcheck=t},!0);i("autocorrect",!1,function(n,t){return n.getInputField().autocorrect=t},!0);i("autocapitalize",!1,function(n,t){return n.getInputField().autocapitalize=t},!0);i("rtlMoveVisually",!ih);i("wholeLineUpdateBefore",!0);i("theme","default",function(n){rk(n);le(n)},!0);i("keyMap","default",function(n,t,i){t=ys(t);i=i!=of&&ys(i);i&&i.detach&&i.detach(n,t);t.attach&&t.attach(n,i||null)});i("extraKeys",null);i("configureMouse",null);i("lineWrapping",!1,bd,!0);i("gutters",[],function(n,t){n.display.gutterSpecs=dl(t,n.options.lineNumbers);le(n)},!0);i("fixedGutter",!0,function(n,t){n.display.gutters.style.left=t?el(n.display)+"px":"0";n.refresh()},!0);i("coverGutterNextToScrollbar",!1,function(n){return pu(n)},!0);i("scrollbarStyle","native",function(n){pp(n);pu(n);n.display.scrollbars.setScrollTop(n.doc.scrollTop);n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0);i("lineNumbers",!1,function(n,t){n.display.gutterSpecs=dl(n.options.gutters,t);le(n)},!0);i("firstLineNumber",1,le,!0);i("lineNumberFormatter",function(n){return n},le,!0);i("showCursorWhenSelecting",!1,ue,!0);i("resetSelectionOnContextMenu",!0);i("lineWiseCopyCut",!0);i("pasteLinesPerSelection",!0);i("selectionsMayTouch",!1);i("readOnly",!1,function(n,t){"nocursor"==t&&(vu(n),n.display.input.blur());n.display.input.readOnlyChanged(t)});i("screenReaderLabel",null,function(n,t){n.display.input.screenReaderLabelChanged(t=""===t?null:t)});i("disableInput",!1,function(n,t){t||n.display.input.reset()},!0);i("dragDrop",!0,wd);i("allowDropFileTypes",null);i("cursorBlinkRate",530);i("cursorScrollMargin",0);i("cursorHeight",1,ue,!0);i("singleCursorHeightPerLine",!0,ue,!0);i("workTime",100);i("workDelay",100);i("flattenSpans",!0,ve,!0);i("addModeClass",!1,ve,!0);i("pollInterval",100);i("undoDepth",200,function(n,t){return n.doc.history.undoDepth=t});i("historyEventDelay",1250);i("viewportMargin",10,function(n){return n.refresh()},!0);i("maxHighlightLength",1e4,ve,!0);i("moveInputWithCursor",!0,function(n,t){t||n.display.input.resetPosition()});i("tabindex",null,function(n,t){return n.display.input.getField().tabIndex=t||""});i("autofocus",null);i("direction","ltr",function(n,t){return n.doc.setDirection(t)},!0);i("phrases",null);wa=(ii=y).optionHandlers;iu=ii.helpers={};ii.prototype={constructor:ii,focus:function(){eo(this).focus();this.display.input.focus()},setOption:function(n,t){var i=this.options,r=i[n];i[n]==t&&"mode"!=n||(i[n]=t,wa.hasOwnProperty(n)&&g(this,wa[n])(this,t,r),b(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,t){this.state.keyMaps[t?"push":"unshift"](ys(n))},removeKeyMap:function(n){for(var i=this.state.keyMaps,t=0;t<i.length;++t)if(i[t]==n||i[t].name==n)return i.splice(t,1),!0},addOverlay:ut(function(n,t){var i=n.token?n:ii.getMode(this.options,n);if(i.startState)throw new Error("Overlays may not be stateful.");for(var u=this.state.overlays,i={mode:i,modeSpec:n,opaque:t&&t.opaque,priority:t&&t.priority||0},f=function(n){return n.priority},r=0,e=f(i);r<u.length&&f(u[r])<=e;)r++;u.splice(r,0,i);this.state.modeGen++;et(this)}),removeOverlay:ut(function(n){for(var r,i=this.state.overlays,t=0;t<i.length;++t)if(r=i[t].modeSpec,r==n||"string"==typeof n&&r.name==n)return i.splice(t,1),this.state.modeGen++,void et(this)}),indentLine:ut(function(n,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract");df(this.doc,n)&&io(this,n,t,i)}),indentSelection:ut(function(n){for(var t,u=this.doc.sel.ranges,r=-1,i=0;i<u.length;i++)if(t=u[i],t.empty())t.head.line>r&&(io(this,t.head.line,n,!0),r=t.head.line,i==this.doc.sel.primIndex&&yu(this));else{for(var f=t.from(),t=t.to(),o=Math.max(r,f.line),r=Math.min(this.lastLine(),t.line-(t.ch?0:1))+1,e=o;e<r;++e)io(this,e,n);t=this.doc.sel.ranges;0==f.ch&&u.length==t.length&&0<t[i].from().ch&&ua(this.doc,i,new h(f,t[i].to()),ui)}}),getTokenAt:function(n,t){return wv(this,n,t)},getLineTokens:function(t,i){return wv(this,n(t),i,!0)},getTokenTypeAt:function(n){var i;n=o(this.doc,n);var r,u=yv(this,t(this.doc,n.line)),e=0,s=(u.length-1)/2,f=n.ch;if(0==f)r=u[2];else for(;;)if(i=e+s>>1,(i?u[2*i-1]:0)>=f)s=i;else{if(!(u[2*i+1]<f)){r=u[2*i+2];break}e=1+i}return n=r?r.indexOf("overlay "):-1,n<0?r:0==n?null:r.slice(0,n-1)},getModeAt:function(n){var t=this.doc.mode;return t.innerMode?ii.innerMode(t,this.getTokenAt(n).state).mode:t},getHelper:function(n,t){return this.getHelpers(n,t)[0]},getHelpers:function(n,t){var u=[],r,i,f,s,e,o;if(!iu.hasOwnProperty(t))return u;if(r=iu[t],i=this.getModeAt(n),"string"==typeof i[t])r[i[t]]&&u.push(r[i[t]]);else if(i[t])for(f=0;f<i[t].length;f++)s=r[i[t][f]],s&&u.push(s);else i.helperType&&r[i.helperType]?u.push(r[i.helperType]):r[i.name]&&u.push(r[i.name]);for(e=0;e<r._global.length;e++)o=r._global[e],o.pred(i,this)&&-1==tt(u,o.val)&&u.push(o.val);return u},getStateAfter:function(n,t){var i=this.doc;return gf(this,(n=lv(i,null==n?i.first+i.size-1:n))+1,t).state},cursorCoords:function(n,t){var i=this.doc.sel.primary(),n=null==n?i.head:"object"==typeof n?o(this.doc,n):n?i.from():i.to();return ni(this,n,t||"page")},charCoords:function(n,t){return is(this,o(this.doc,n),t||"page")},coordsChar:function(n,t){return rl(this,(n=rp(this,n,t||"page")).left,n.top)},lineAtHeight:function(n,t){return n=rp(this,{top:n,left:0},t||"page").top,ar(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,i,r){var f=!1,u="number"==typeof n?(u=this.doc.first+this.doc.size-1,n<this.doc.first?n=this.doc.first:u<n&&(n=u,f=!0),t(this.doc,n)):n;return ts(this,u,{top:0,left:0},i||"page",r||f).top+(f?this.doc.height-vi(u):0)},defaultTextHeight:function(){return lu(this.display)},defaultCharWidth:function(){return au(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,t,i,r,u){var c,f,s=this.display,h=(n=ni(this,o(this.doc,n))).bottom,e=n.left;t.style.position="absolute";t.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(t);s.sizer.appendChild(t);"over"==r?h=n.top:"above"!=r&&"near"!=r||(f=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),("above"==r||n.bottom+t.offsetHeight>f)&&n.top>t.offsetHeight?h=n.top-t.offsetHeight:n.bottom+t.offsetHeight<=f&&(h=n.bottom),e+t.offsetWidth>c&&(e=c-t.offsetWidth));t.style.top=h+"px";t.style.left=t.style.right="";"right"==u?(e=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==u?e=0:"middle"==u&&(e=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=e+"px");i&&(r=this,f={left:e,top:h,right:e+t.offsetWidth,bottom:h+t.offsetHeight},null!=(f=al(r,f)).scrollTop&&ee(r,f.scrollTop),null!=f.scrollLeft&&dr(r,f.scrollLeft))},triggerOnKeyDown:ut(bb),triggerOnKeyPress:ut(db),triggerOnKeyUp:kb,triggerOnMouseDown:ut(gb),execCommand:function(n){if(ef.hasOwnProperty(n))return ef[n].call(null,this)},triggerElectric:ut(function(n){ek(this,n)}),findPosH:function(n,t,i,r){for(var f=1,u=(t<0&&(f=-1,t=-t),o(this.doc,n)),e=0;e<t&&!(u=pa(this.doc,u,f,i,r)).hitSide;++e);return u},moveH:ut(function(n,t){var i=this;this.extendSelectionsBy(function(r){return i.display.shift||i.doc.extend||r.empty()?pa(i.doc,r.head,n,t,i.options.rtlMoveVisually):n<0?r.from():r.to()},yf)}),deleteH:ut(function(n,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):ff(this,function(r){var u=pa(i,r.head,n,t,!1);return n<0?{from:u,to:r.head}:{from:r.head,to:u}})}),findPosV:function(n,t,i,r){for(var u,s=1,f=r,e=(t<0&&(s=-1,t=-t),o(this.doc,n)),h=0;h<t;++h)if(u=ni(this,e,"div"),null==f?f=u.left:u.left=f,(e=hk(this,u,s,i)).hitSide)break;return e},moveV:ut(function(n,t){var u=this,i=this.doc,f=[],e=!this.display.shift&&!i.extend&&i.sel.somethingSelected(),r;if(i.extendSelectionsBy(function(r){if(e)return n<0?r.from():r.to();var o=ni(u,r.head,"div"),s=(null!=r.goalColumn&&(o.left=r.goalColumn),f.push(o.left),hk(u,o,n,t));return"page"==t&&r==i.sel.primary()&&vl(u,is(u,s,"div").top-o.top),s},yf),f.length)for(r=0;r<i.sel.ranges.length;r++)i.sel.ranges[r].goalColumn=f[r]}),findWordAt:function(i){var u=t(this.doc,i.line).text,r=i.ch,f=i.ch;if(u){for(var e=this.getHelper(i,"wordChars"),o=("before"!=i.sticky&&f!=u.length||!r?++f:--r,u.charAt(r)),s=ho(o,e)?function(n){return ho(n,e)}:/\s/.test(o)?function(n){return/\s/.test(n)}:function(n){return!/\s/.test(n)&&!ho(n)};0<r&&s(u.charAt(r-1));)--r;for(;f<u.length&&s(u.charAt(f));)++f}return new h(n(i.line,r),n(i.line,f))},toggleOverwrite:function(n){null!=n&&n==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?or:er)(this.display.cursorDiv,"CodeMirror-overwrite"),b(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==vt(kt(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ut(function(n,t){fe(this,n,t)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-oi(this)-this.display.barHeight,width:n.scrollWidth-oi(this)-this.display.barWidth,clientHeight:dc(this),clientWidth:pr(this)}},scrollIntoView:ut(function(t,i){var r;null==t?(t={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof t?t={from:n(t,0),to:null}:null==t.from&&(t={from:t,to:null});t.to||(t.to=t.from);t.margin=i||0;null!=t.from.line?(i=t,os(r=this),r.curOp.scrollToPos=i):ap(this,t.from,t.to,t.margin)}),setSize:ut(function(n,t){function r(n){return"number"==typeof n||/^\d+$/.test(String(n))?n+"px":n}var u=this,i=(null!=n&&(this.display.wrapper.style.width=r(n)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&np(this),this.display.viewFrom);this.doc.iter(i,this.display.viewTo,function(n){if(n.widgets)for(var t=0;t<n.widgets.length;t++)if(n.widgets[t].noHScroll){nr(u,i,"widget");break}++i});this.curOp.forceUpdate=!0;b(this,"refresh",this)}),operation:function(n){return ot(this,n)},startOperation:function(){return nu(this)},endOperation:function(){return tu(this)},refresh:ut(function(){var n=this.display.cachedTextHeight;et(this);this.curOp.forceUpdate=!0;re(this);fe(this,this.doc.scrollLeft,this.doc.scrollTop);bl(this.display);(null==n||.5<Math.abs(n-lu(this.display))||this.options.lineWrapping)&&ol(this);b(this,"refresh",this)}),swapDoc:ut(function(n){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),fw(this,n),re(this),this.display.input.reset(),fe(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,d(this,"swapDoc",this,t),t}),phrase:function(n){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,n)?t[n]:n},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};ou(ii);ii.registerHelper=function(n,t,i){iu.hasOwnProperty(n)||(iu[n]=ii[n]={_global:[]});iu[n][t]=i};ii.registerGlobalHelper=function(n,t,i,r){ii.registerHelper(n,t,r);iu[n]._global.push({pred:i,val:r})};ak="iter insert remove copy getEditor constructor".split(" ");for(ro in ht.prototype)ht.prototype.hasOwnProperty(ro)&&tt(ak,ro)<0&&(y.prototype[ro]=function(n){return function(){return n.apply(this.doc,arguments)}}(ht.prototype[ro]));return ou(ht),y.inputStyles={textarea:w,contenteditable:a},y.defineMode=function(n){y.defaults.mode||"null"==n||(y.defaults.mode=n),function(n,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2));ic[n]=t}.apply(this,arguments)},y.defineMIME=function(n,t){su[n]=t},y.defineMode("null",function(){return{token:function(n){return n.skipToEnd()}}}),y.defineMIME("text/plain","null"),y.defineExtension=function(n,t){y.prototype[n]=t},y.defineDocExtension=function(n,t){ht.prototype[n]=t},y.fromTextArea=function(n,t){function r(){n.value=s.getValue()}var u,i,e,o,s;if((t=t?sr(t):{}).value=n.value,!t.tabindex&&n.tabIndex&&(t.tabindex=n.tabIndex),!t.placeholder&&n.placeholder&&(t.placeholder=n.placeholder),null==t.autofocus&&(u=vt(n.ownerDocument),t.autofocus=u==n||null!=n.getAttribute("autofocus")&&u==document.body),n.form&&(f(n.form,"submit",r),!t.leaveSubmitMethodAlone)){i=n.form;e=i.submit;try{o=i.submit=function(){r();i.submit=e;i.submit();i.submit=o}}catch(u){}}return t.finishInit=function(i){i.save=r;i.getTextArea=function(){return n};i.toTextArea=function(){i.toTextArea=isNaN;r();n.parentNode.removeChild(i.getWrapperElement());n.style.display="";n.form&&(lt(n.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof n.form.submit||(n.form.submit=e))}},n.style.display="none",s=y(function(t){return n.parentNode.insertBefore(t,n.nextSibling)},t)},(r=y).off=lt,r.on=f,r.wheelEventPixels=ed,r.Doc=ht,r.splitLines=nc,r.countColumn=yt,r.findColumn=oh,r.isWordChar=hh,r.Pass=oo,r.signal=b,r.Line=vr,r.changeEnd=rr,r.scrollbarModel=yl,r.Pos=n,r.cmpPos=e,r.modes=ic,r.mimeModes=su,r.resolveMode=co,r.getMode=rc,r.modeExtensions=hr,r.extendMode=dk,r.copyState=cr,r.startState=cv,r.innerMode=uc,r.commands=ef,r.keyMap=ci,r.keyName=lb,r.isModifierKey=hb,r.lookupKey=uf,r.normalizeKeyMap=yd,r.StringStream=p,r.SharedTextMarker=nf,r.TextMarker=fr,r.LineWidget=ke,r.e_preventDefault=ft,r.e_stopPropagation=sv,r.e_stop=kf,r.addClass=or,r.contains=ki,r.rmClass=er,r.keyNames=pi,y.version="5.65.13",y}),function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror"),"cjs"):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],function(t){n(t,"amd")}):n(CodeMirror,"plain")}(function(n,t){function u(n,t){var i=t;return function(){--i==0&&n()}}function r(t,i,r){var s=n.modes[t],o=s&&s.dependencies,e,h,f;if(!o)return i();for(e=[],f=0;f<o.length;++f)n.modes.hasOwnProperty(o[f])||e.push(o[f]);if(!e.length)return i();for(h=u(i,e.length),f=0;f<e.length;++f)n.requireMode(e[f],h,r)}n.modeURL||(n.modeURL="../mode/%N/%N.js");var i={};n.requireMode=function(u,f,e){var o,s,h,c;if(typeof u!="string"&&(u=u.name),n.modes.hasOwnProperty(u))return r(u,f,e);if(i.hasOwnProperty(u))return i[u].push(f);if(o=e&&e.path?e.path(u):n.modeURL.replace(/%N/g,u),e&&e.loadMode)e.loadMode(o,function(){r(u,f,e)});else if(t=="plain"){s=document.createElement("script");s.src=o;h=document.getElementsByTagName("script")[0];c=i[u]=[f];n.on(s,"load",function(){r(u,function(){for(var n=0;n<c.length;++n)c[n]()},e)});h.parentNode.insertBefore(s,h)}else t=="cjs"?(require(o),f()):t=="amd"&&requirejs([o],f)};n.autoLoadMode=function(t,i,r){n.modes.hasOwnProperty(i)||n.requireMode(i,function(){t.setOption("mode",t.getOption("mode"))},r)}}),function(n){typeof exports=="object"&&typeof module=="object"?n(require("../lib/codemirror")):typeof define=="function"&&define.amd?define(["../lib/codemirror"],n):n(CodeMirror)}(function(n){var t,i;for(n.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]},],t=0;t<n.modeInfo.length;t++)i=n.modeInfo[t],i.mimes&&(i.mime=i.mimes[0]);n.findModeByMIME=function(t){var r,i,u;for(t=t.toLowerCase(),r=0;r<n.modeInfo.length;r++){if(i=n.modeInfo[r],i.mime==t)return i;if(i.mimes)for(u=0;u<i.mimes.length;u++)if(i.mimes[u]==t)return i}return/\+xml$/.test(t)?n.findModeByMIME("application/xml"):/\+json$/.test(t)?n.findModeByMIME("application/json"):void 0};n.findModeByExtension=function(t){var r,i,u;for(t=t.toLowerCase(),r=0;r<n.modeInfo.length;r++)if(i=n.modeInfo[r],i.ext)for(u=0;u<i.ext.length;u++)if(i.ext[u]==t)return i};n.findModeByFileName=function(t){for(var r,u,f,i=0;i<n.modeInfo.length;i++)if(r=n.modeInfo[i],r.file&&r.file.test(t))return r;return u=t.lastIndexOf("."),f=u>-1&&t.substring(u+1,t.length),f?n.findModeByExtension(f):void 0};n.findModeByName=function(t){var r,i,u;for(t=t.toLowerCase(),r=0;r<n.modeInfo.length;r++){if(i=n.modeInfo[r],i.name.toLowerCase()==t)return i;if(i.alias)for(u=0;u<i.alias.length;u++)if(i.alias[u].toLowerCase()==t)return i}}});